{"version":3,"file":"CameraManager.js","names":["THREE","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","o","Symbol","iterator","constructor","prototype","_createForOfIteratorHelper","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","length","F","s","done","value","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","toString","slice","name","from","test","arr","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","_toPrimitive","toPrimitive","String","Number","CameraManager","exports","engine","cameraOptions","sceneCenter","Vector3","camera","PerspectiveCamera","angle","aspect","near","far","scene","add","up","direction","lookAt","baseZoom","isFirstRender","initialFlip","flipCamera","update","initialPosition","initialRotation","autoRotate","movieFilter","initialZoomTo","reset","trackballControls","undefined","resetCamera","setCameraPosition","x","y","z","setCameraRotation","rx","ry","rz","radius","instances","map","element","Instances","getInstance","zoomTo","setTrackballControlsConfigs","controls","zoomToParameters","zoomIterator","_iterator","_step","axis","toLowerCase","flipCameraY","flipCameraZ","zoomParameters","that","instancePath","getInstancePath","mesh","meshFactory","meshes","traverse","object","addMeshToZoomParameters","getChildren","geometry","computeBoundingBox","bb","boundingBox","translate","localToWorld","aabbMin","aabbMax","min","max","Math","updateCamera","position","rotation","_this","applyRotation","maxSize","child","visible","size","getSize","diag","subVectors","pointCameraTo","offset","sin","PI","fov","dir","clone","multiplyScalar","addVectors","updateProjectionMatrix","node","COG","shapeCenterOfGravity","v","obj","center","Mesh","Object3D","Box3","children","union","getCamera","incrementCameraPan","incrementPanEnd","incrementCameraRotate","incrementRotationEnd","incrementCameraZoom","incrementZoomEnd","setPosition","setRotation","config","rotationSpeed","zoomSpeed","panSpeed","setRotationalSpeed","setZoomSpeed","setPanSpeed","rotate","movieMode","setInterval","resetRotationalSpeed","clearInterval","shaders","configureRenderer"],"sources":["../../../src/3d-canvas/threeDEngine/CameraManager.js"],"sourcesContent":["import * as THREE from 'three';\n\nexport default class CameraManager {\n  constructor (engine, cameraOptions) {\n    this.engine = engine;\n    this.sceneCenter = new THREE.Vector3();\n    this.camera = new THREE.PerspectiveCamera(\n      cameraOptions.angle,\n      cameraOptions.aspect,\n      cameraOptions.near,\n      cameraOptions.far\n    );\n    this.engine.scene.add(this.camera);\n    this.camera.up = new THREE.Vector3(0, 1, 0);\n    this.camera.direction = new THREE.Vector3(0, 0, 1);\n    this.camera.lookAt(this.sceneCenter);\n    this.baseZoom = cameraOptions.baseZoom;\n    this.isFirstRender = true;\n    const { initialFlip } = cameraOptions;\n    if (initialFlip && initialFlip.length > 0) {\n      this.flipCamera(initialFlip);\n    }\n  }\n\n  update (cameraOptions) {\n    const {\n      initialPosition,\n      initialRotation,\n      autoRotate,\n      movieFilter,\n      initialZoomTo,\n      reset,\n      trackballControls\n    } = cameraOptions;\n\n\n    if (reset || (this.isFirstRender && initialPosition === undefined && initialZoomTo === undefined)) {\n      this.resetCamera(initialPosition, initialRotation, initialZoomTo);\n      if (this.isFirstRender) {\n        this.isFirstRender = false;\n      }\n    } else {\n      if (initialPosition && this.isFirstRender) {\n        this.setCameraPosition(initialPosition.x, initialPosition.y, initialPosition.z);\n      }\n      if (initialRotation && this.isFirstRender) {\n        this.setCameraRotation(\n          initialRotation.rx,\n          initialRotation.ry,\n          initialRotation.rz,\n          initialRotation.radius\n        );\n      }\n      if (initialZoomTo && Array.isArray(initialZoomTo) && this.isFirstRender) {\n        const instances = initialZoomTo.map(element => Instances.getInstance(element));\n        if (instances.length > 0) {\n          this.zoomTo(instances);\n        }\n      }\n      if (autoRotate) {\n        this.autoRotate(movieFilter);\n      }\n      if (trackballControls) {\n        this.setTrackballControlsConfigs(trackballControls);\n      }\n      if (this.isFirstRender) {\n        this.isFirstRender = false;\n      }\n    }\n  }\n\n  /**\n   *\n   * @param instances\n   */\n  zoomTo (instances) {\n    this.engine.controls.reset();\n    this.zoomToParameters(this.zoomIterator(instances, {}));\n  }\n\n  /**\n   *\n   * @param initalFlip\n   */\n  flipCamera (initialFlip) {\n    for (const axis of initialFlip) {\n      if (axis.toLowerCase() === 'y') {\n        this.flipCameraY();\n      } else if (axis.toLowerCase() === 'z') {\n        this.flipCameraZ();\n      }\n    }\n  }\n\n  /**\n   * Reinitializes the camera with the Y axis flipped\n   */\n  flipCameraY () {\n    this.camera.up = new THREE.Vector3(0, -1, 0);\n  }\n\n  /**\n   * Reinitializes the camera with the Z axis flipped\n   */\n  flipCameraZ () {\n    this.camera.direction = new THREE.Vector3(0, 0, -1);\n  }\n\n  /**\n   *\n   * @param instances\n   * @param zoomParameters\n   * @returns {*}\n   */\n  zoomIterator (instances, zoomParameters) {\n    const that = this;\n    for (let i = 0; i < instances.length; i++) {\n      const instancePath = instances[i].getInstancePath();\n      const mesh = this.engine.meshFactory.meshes[instancePath];\n      if (mesh) {\n        mesh.traverse(function (object) {\n          if (Object.prototype.hasOwnProperty.call(object, 'geometry')) {\n            that.addMeshToZoomParameters(object, zoomParameters);\n          }\n        });\n      } else {\n        zoomParameters = this.zoomIterator(\n          instances[i].getChildren(),\n          zoomParameters\n        );\n      }\n    }\n    return zoomParameters;\n  }\n\n  /**\n   *\n   * @param mesh\n   * @param zoomParameters\n   * @returns {*}\n   */\n  addMeshToZoomParameters (mesh, zoomParameters) {\n    mesh.geometry.computeBoundingBox();\n    const bb = mesh.geometry.boundingBox;\n    bb.translate(mesh.localToWorld(new THREE.Vector3()));\n\n    // If min and max vectors are null, first values become default min and max\n    if (\n      zoomParameters.aabbMin == undefined\n            && zoomParameters.aabbMax == undefined\n    ) {\n      zoomParameters.aabbMin = bb.min;\n      zoomParameters.aabbMax = bb.max;\n    } else {\n      // Compare other meshes, particles BB's to find min and max\n      zoomParameters.aabbMin.x = Math.min(zoomParameters.aabbMin.x, bb.min.x);\n      zoomParameters.aabbMin.y = Math.min(zoomParameters.aabbMin.y, bb.min.y);\n      zoomParameters.aabbMin.z = Math.min(zoomParameters.aabbMin.z, bb.min.z);\n      zoomParameters.aabbMax.x = Math.max(zoomParameters.aabbMax.x, bb.max.x);\n      zoomParameters.aabbMax.y = Math.max(zoomParameters.aabbMax.y, bb.max.y);\n      zoomParameters.aabbMax.z = Math.max(zoomParameters.aabbMax.z, bb.max.z);\n    }\n\n    return zoomParameters;\n  }\n\n  /**\n   *\n   * @param zoomParameters\n   */\n  zoomToParameters (zoomParameters) {\n    // Compute world AABB center\n    this.sceneCenter.x\n            = (zoomParameters.aabbMax.x + zoomParameters.aabbMin.x) * 0.5;\n    this.sceneCenter.y\n            = (zoomParameters.aabbMax.y + zoomParameters.aabbMin.y) * 0.5;\n    this.sceneCenter.z\n            = (zoomParameters.aabbMax.z + zoomParameters.aabbMin.z) * 0.5;\n\n    this.updateCamera(zoomParameters.aabbMax, zoomParameters.aabbMin);\n  }\n\n  resetCamera (position, rotation, zoomTo) {\n    const applyRotation = rotation => {\n      if (rotation) {\n        this.setCameraRotation(\n          rotation.rx,\n          rotation.ry,\n          rotation.rz,\n          rotation.radius\n        );\n      }\n    }\n    if (zoomTo) {\n      const instances = zoomTo.map(element => Instances.getInstance(element));\n      if (instances.length > 0) {\n        this.zoomTo(instances);\n      }\n      applyRotation(rotation)\n      return;\n    }\n    if (position) {\n      this.setCameraPosition(position.x, position.y, position.z);\n      applyRotation(rotation)\n      return;\n    }\n\n    this.engine.controls.reset();\n\n    let aabbMin = null;\n    let aabbMax = null;\n    let maxSize = null;\n    this.engine.scene.traverse(function (child) {\n      if (\n        Object.prototype.hasOwnProperty.call(child, 'geometry')\n                && child.visible === true\n      ) {\n        child.geometry.computeBoundingBox();\n\n        let bb = child.geometry.boundingBox;\n        let size = bb.getSize(new THREE.Vector3()).length();\n        bb.translate(child.localToWorld(new THREE.Vector3()));\n\n        /*\n         * If min and max vectors are null, first values become\n         * default min and max\n         */\n        if (aabbMin == null && aabbMax == null && maxSize == null) {\n          aabbMin = bb.min;\n          aabbMax = bb.max;\n          maxSize = size\n        } else {\n          // Compare other meshes, particles BB's to find min and max\n          aabbMin.x = Math.min(aabbMin.x, bb.min.x);\n          aabbMin.y = Math.min(aabbMin.y, bb.min.y);\n          aabbMin.z = Math.min(aabbMin.z, bb.min.z);\n          aabbMax.x = Math.max(aabbMax.x, bb.max.x);\n          aabbMax.y = Math.max(aabbMax.y, bb.max.y);\n          aabbMax.z = Math.max(aabbMax.z, bb.max.z);\n          maxSize = Math.max(maxSize, size);\n        }\n      }\n    });\n\n    if (aabbMin != null && aabbMax != null) {\n      // Compute world AABB center\n      this.sceneCenter.x = (aabbMax.x + aabbMin.x) * 0.5;\n      this.sceneCenter.y = (aabbMax.y + aabbMin.y) * 0.5;\n      this.sceneCenter.z = (aabbMax.z + aabbMin.z) * 0.5;\n      this.camera.near = maxSize / 100;\n      this.camera.far = maxSize * 100;\n      this.updateCamera(aabbMax, aabbMin);\n    }\n\n    applyRotation(rotation)\n  }\n\n  /**\n   * Update camera with new position and place to lookat\n   * @param aabbMax\n   * @param aabbMin\n   */\n  updateCamera (aabbMax, aabbMin) {\n    // Compute world AABB \"radius\"\n    let diag = new THREE.Vector3();\n    diag = diag.subVectors(aabbMax, aabbMin);\n    const radius = diag.length() * 0.5;\n\n    this.pointCameraTo(this.sceneCenter);\n\n    // Compute offset needed to move the camera back that much needed to center AABB\n    const offset\n            = radius\n            / Math.sin((Math.PI / 180.0) * this.camera.fov * 0.5)\n            / this.baseZoom;\n\n    const dir = this.camera.direction.clone();\n    dir.multiplyScalar(offset);\n\n    // Store camera position\n\n    this.camera.position.addVectors(dir, this.engine.controls.target);\n    this.camera.updateProjectionMatrix();\n  }\n\n  /**\n   *  Refocus camera to the center of the new object\n   * @param node\n   */\n  pointCameraTo (node) {\n    let COG;\n    if (node instanceof THREE.Vector3) {\n      COG = node;\n    } else {\n      COG = this.shapeCenterOfGravity(node);\n    }\n    const v = new THREE.Vector3();\n    v.subVectors(COG, this.engine.controls.target);\n    this.camera.position.addVectors(this.camera.position, v);\n\n    // retrieve camera orientation\n\n    this.camera.lookAt(COG);\n    this.engine.controls.target.set(COG.x, COG.y, COG.z);\n  }\n\n  /**\n   *\n   * @param obj\n   * @returns {*}\n   */\n  shapeCenterOfGravity (obj) {\n    return this.boundingBox(obj).center();\n  }\n\n  /**\n   *\n   * @param obj\n   * @returns {*}\n   */\n  boundingBox (obj) {\n    if (obj instanceof THREE.Mesh) {\n      const geometry = obj.geometry;\n      geometry.computeBoundingBox();\n      return geometry.boundingBox;\n    }\n\n    if (obj instanceof THREE.Object3D) {\n      const bb = new THREE.Box3();\n      for (let i = 0; i < obj.children.length; i++) {\n        bb.union(this.boundingBox(obj.children[i]));\n      }\n      return bb;\n    }\n  }\n\n  /**\n   * Returns the camera\n   * @returns camera\n   */\n  getCamera () {\n    return this.camera;\n  }\n\n  /**\n   * @param x\n   * @param y\n   */\n  incrementCameraPan (x, y) {\n    this.engine.controls.incrementPanEnd(x, y);\n  }\n\n  /**\n   * @param x\n   * @param y\n   * @param z\n   */\n  incrementCameraRotate (x, y, z) {\n    this.engine.controls.incrementRotationEnd(x, y, z);\n  }\n\n  /**\n   * @param z\n   */\n  incrementCameraZoom (z) {\n    this.engine.controls.incrementZoomEnd(z);\n  }\n\n  /**\n   * @param x\n   * @param y\n   * @param z\n   */\n  setCameraPosition (x, y, z) {\n    this.engine.controls.setPosition(x, y, z);\n  }\n\n  /**\n   * @param rx\n   * @param ry\n   * @param rz\n   * @param radius\n   */\n  setCameraRotation (rx, ry, rz, radius) {\n    this.engine.controls.setRotation(rx, ry, rz, radius);\n  }\n\n  setTrackballControlsConfigs (config) {\n    let { rotationSpeed, zoomSpeed, panSpeed } = config\n\n    this.engine.controls.setRotationalSpeed(rotationSpeed)\n    this.engine.controls.setZoomSpeed(zoomSpeed)\n    this.engine.controls.setPanSpeed(panSpeed)\n  }\n\n  /**\n   * Rotate the camera around the selection\n   * @movieFilter\n   */\n  autoRotate (movieFilter) {\n    const that = this;\n    if (this.rotate == null) {\n      if (movieFilter === undefined || movieFilter === true) {\n        this.movieMode(true);\n      }\n      this.engine.controls.setRotationalSpeed(0.075);\n      this.rotate = setInterval(function () {\n        that.incrementCameraRotate(0.5, 0);\n      }, 25);\n    } else {\n      if (movieFilter === undefined || movieFilter === true) {\n        this.movieMode(false);\n      }\n      this.engine.controls.resetRotationalSpeed();\n      clearInterval(this.rotate);\n      this.rotate = null;\n    }\n  }\n\n  /**\n   *\n   * @param shaders\n   */\n  movieMode (shaders) {\n    this.engine.configureRenderer(shaders);\n  }\n}\n"],"mappings":"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","ignoreList":[]}
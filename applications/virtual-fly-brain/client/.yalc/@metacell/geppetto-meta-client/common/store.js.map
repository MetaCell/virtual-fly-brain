{"version":3,"file":"store.js","names":["initialState","client","clientInitialState","layout","layoutInitialState","widgets","staticReducers","geppettoClientReducer","storeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","redux","compose","createStore","reducers","state","enhancers","componentMap","layoutManager","initLayoutManager","baseLayout","iconFactory","isMinimizeEnabled","allMiddlewares","callbacksMiddleware","middleware","store","reducerDecorator","combineReducers","applyMiddleware","EventManager","setStore"],"sources":["../../src/common/store.ts"],"sourcesContent":["import * as redux from \"redux\";\nimport { callbacksMiddleware } from './middleware/geppettoMiddleware';\n\nimport { initLayoutManager } from './layout/LayoutManager';\nimport EventManager from './EventManager';\nimport { layoutInitialState, LayoutState, layout, widgets } from './reducer/geppettoLayout';\nimport geppettoClientReducer, { clientInitialState, ClientState } from './reducer/geppettoClient';\nimport { WidgetMap, ComponentMap } from \"./layout/model\";\nimport TabsetIconFactory from \"./layout/TabsetIconFactory\";\nimport { reducerDecorator } from \"./reducer/reducerDecorator\"\nimport { GeppettoAction } from \"../common/actions\";\n\ndeclare var window: any;\n\ninterface GeppettoState{\n  client: ClientState,\n  layout: LayoutState,\n  widgets: WidgetMap\n}\n\nconst initialState: GeppettoState = {\n  client: clientInitialState,\n  layout: layoutInitialState,\n  widgets: {}\n};\n\nconst staticReducers = {\n  client: geppettoClientReducer,\n  layout,\n  widgets\n}\n\n// Use the below for redux debugging with stack trace\n//const storeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace: true, traceLimit: 25}) || redux.compose;\nconst storeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || redux.compose;\n\n\nexport function createStore (\n  reducers: redux.ReducersMapObject,\n  state: any,\n  enhancers: redux.Middleware[],\n  layout: {iconFactory?: TabsetIconFactory, baseLayout?: LayoutState, componentMap: ComponentMap, isMinimizeEnabled?: boolean}={componentMap: {}}): redux.Store<any, GeppettoAction> {\n\n  const layoutManager = initLayoutManager(layout.baseLayout || layoutInitialState, layout.componentMap, layout.iconFactory, layout.isMinimizeEnabled || false);\n  const allMiddlewares = [...enhancers, callbacksMiddleware, layoutManager.middleware];\n\n  const store = redux.createStore(\n    reducerDecorator(redux.combineReducers({...staticReducers, ...reducers})),\n    {...initialState, ...state },\n    storeEnhancers(redux.applyMiddleware(...allMiddlewares))\n  );\n  EventManager.setStore(store);\n\n  return store;\n}\n\nexport default createStore;\n"],"mappings":";;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAA6D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAW7D,IAAMA,YAA2B,GAAG;EAClCC,MAAM,EAAEC,kCAAkB;EAC1BC,MAAM,EAAEC,kCAAkB;EAC1BC,OAAO,EAAE,CAAC;AACZ,CAAC;AAED,IAAMC,cAAc,GAAG;EACrBL,MAAM,EAAEM,0BAAqB;EAC7BJ,MAAM,EAANA,sBAAM;EACNE,OAAO,EAAPA;AACF,CAAC;;AAED;AACA;AACA,IAAMG,cAAc,GAAGC,MAAM,CAACC,oCAAoC,IAAIC,KAAK,CAACC,OAAO;AAG5E,SAASC,WAAW,CACzBC,QAAiC,EACjCC,KAAU,EACVC,SAA6B,EACsJ;EAAA,IAAnLb,MAA4H,uEAAC;IAACc,YAAY,EAAE,CAAC;EAAC,CAAC;EAE/I,IAAMC,aAAa,GAAG,IAAAC,gCAAiB,EAAChB,MAAM,CAACiB,UAAU,IAAIhB,kCAAkB,EAAED,MAAM,CAACc,YAAY,EAAEd,MAAM,CAACkB,WAAW,EAAElB,MAAM,CAACmB,iBAAiB,IAAI,KAAK,CAAC;EAC5J,IAAMC,cAAc,gCAAOP,SAAS,IAAEQ,uCAAmB,EAAEN,aAAa,CAACO,UAAU,EAAC;EAEpF,IAAMC,KAAK,GAAGf,KAAK,CAACE,WAAW,CAC7B,IAAAc,kCAAgB,EAAChB,KAAK,CAACiB,eAAe,iCAAKtB,cAAc,GAAKQ,QAAQ,EAAE,CAAC,kCACrEd,YAAY,GAAKe,KAAK,GAC1BP,cAAc,CAACG,KAAK,CAACkB,eAAe,OAArBlB,KAAK,qBAAoBY,cAAc,EAAC,CAAC,CACzD;EACDO,wBAAY,CAACC,QAAQ,CAACL,KAAK,CAAC;EAE5B,OAAOA,KAAK;AACd;AAAC,eAEcb,WAAW;AAAA"}
{"version":3,"file":"rig-wasd-controls.js","names":["MAX_DELTA","CLAMP_VELOCITY","KEYS","KEYCODE_TO_CODE","_AFRAME$utils","AFRAME","utils","bind","shouldCaptureKeyEvent","isEmptyObject","keys","key","registerComponent","schema","acceleration","adAxis","oneOf","adEnabled","adInverted","easing","enabled","fly","wsAxis","wsEnabled","wsInverted","orientationEl","type","init","wheel","position","velocity","THREE","Vector3","onBlur","onFocus","onKeyDown","onKeyUp","onWheel","onVisibilityChange","attachVisibilityEventListeners","getOrientationElement","tick","time","delta","data","el","updateVelocity","currentPosition","getAttribute","movementVector","getMovementVector","x","y","z","setAttribute","remove","removeKeyEventListeners","removeVisibilityEventListeners","play","attachKeyEventListeners","pause","childCamera","querySelector","adSign","wsSign","Math","abs","KeyA","ArrowLeft","KeyD","ArrowRight","KeyW","ArrowUp","up","KeyS","ArrowDown","down","directionVector","rotationEuler","Euler","rotation","copy","multiplyScalar","xRotation","set","degToRad","applyEuler","window","addEventListener","document","removeEventListener","hidden","event","code","keyCode","indexOf","deltaY"],"sources":["../../../src/vr-canvas/aframe/rig-wasd-controls.js"],"sourcesContent":["const MAX_DELTA = 0.2;\nconst CLAMP_VELOCITY = 0.00001;\nconst KEYS = [\n  'KeyW',\n  'KeyA',\n  'KeyS',\n  'KeyD',\n  'ArrowUp',\n  'ArrowLeft',\n  'ArrowRight',\n  'ArrowDown',\n];\nconst KEYCODE_TO_CODE = {\n  '38': 'ArrowUp',\n  '37': 'ArrowLeft',\n  '40': 'ArrowDown',\n  '39': 'ArrowRight',\n  '87': 'KeyW',\n  '65': 'KeyA',\n  '83': 'KeyS',\n  '68': 'KeyD',\n};\nconst { bind, shouldCaptureKeyEvent } = AFRAME.utils;\n\nfunction isEmptyObject (keys) {\n  let key;\n  for (key in keys) {\n    return false;\n  }\n  return true;\n}\n\nAFRAME.registerComponent('rig-wasd-controls', {\n  schema: {\n    acceleration: { default: 65 },\n    adAxis: { default: 'x', oneOf: ['x', 'y', 'z'] },\n    adEnabled: { default: true },\n    adInverted: { default: false },\n    easing: { default: 20 },\n    enabled: { default: true },\n    fly: { default: false },\n    wsAxis: { default: 'z', oneOf: ['x', 'y', 'z'] },\n    wsEnabled: { default: true },\n    wsInverted: { default: false },\n    orientationEl: { type: 'selector' },\n  },\n  init: function () {\n    this.keys = {};\n    this.wheel = {};\n\n    this.position = {};\n    this.velocity = new THREE.Vector3();\n\n    // Bind methods and add event listeners.\n    this.onBlur = bind(this.onBlur, this);\n    this.onFocus = bind(this.onFocus, this);\n    this.onKeyDown = bind(this.onKeyDown, this);\n    this.onKeyUp = bind(this.onKeyUp, this);\n    this.onWheel = bind(this.onWheel, this);\n    this.onVisibilityChange = bind(this.onVisibilityChange, this);\n    this.attachVisibilityEventListeners();\n    this.getOrientationElement();\n  },\n  tick: function (time, delta) {\n    const { data } = this;\n    const { el } = this;\n    const { position } = this;\n    const { velocity } = this;\n\n    if (\n      !velocity[data.adAxis]\n      && !velocity[data.wsAxis]\n      && isEmptyObject(this.keys)\n      && isEmptyObject(this.wheel)\n    ) {\n      return;\n    }\n\n    // Update velocity.\n    // eslint-disable-next-line no-param-reassign\n    delta /= 1000;\n    this.updateVelocity(delta);\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) {\n      return;\n    }\n\n    // Get movement vector and translate position.\n    const currentPosition = el.getAttribute('position');\n    const movementVector = this.getMovementVector(delta);\n    position.x = currentPosition.x + movementVector.x;\n    position.y = currentPosition.y + movementVector.y;\n    position.z = currentPosition.z + movementVector.z;\n    el.setAttribute('position', position);\n  },\n\n  remove: function () {\n    this.removeKeyEventListeners();\n    this.removeVisibilityEventListeners();\n  },\n\n  play: function () {\n    this.attachKeyEventListeners();\n  },\n\n  pause: function () {\n    this.keys = {};\n    this.removeKeyEventListeners();\n  },\n\n  getOrientationElement () {\n    // If a orientation element was defined explicitly use it\n    if (this.data.orientationEl) {\n      this.orientationEl = this.data.orientationEl;\n      return;\n    }\n\n    // If there is a camera on this element assume its the orientation element\n    if (this.el.getAttribute('camera')) {\n      this.orientationEl = this.el;\n      return;\n    }\n\n    // If we still haven't found a camera, search through this elements children\n    const childCamera = this.el.querySelector('[camera]');\n    if (childCamera) {\n      this.orientationEl = childCamera;\n      return;\n    }\n\n    // No cameras found, just use this element\n    this.orientationEl = this.el;\n  },\n\n  updateVelocity: function (delta) {\n    let adSign;\n    const { data } = this;\n    const { keys } = this;\n    const { velocity } = this;\n    let wsSign;\n\n    const { adAxis, wsAxis, acceleration } = data;\n\n    // If FPS too low, reset velocity.\n    if (delta > MAX_DELTA) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] -= velocity[adAxis] * data.easing * delta;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] -= velocity[wsAxis] * data.easing * delta;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) {\n      velocity[adAxis] = 0;\n    }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) {\n      velocity[wsAxis] = 0;\n    }\n\n    if (!data.enabled) {\n      return;\n    }\n\n    // Update velocity using keys pressed.\n    if (data.adEnabled) {\n      adSign = data.adInverted ? -1 : 1;\n      if (keys.KeyA || keys.ArrowLeft) {\n        velocity[adAxis] -= adSign * acceleration * delta;\n      }\n      if (keys.KeyD || keys.ArrowRight) {\n        velocity[adAxis] += adSign * acceleration * delta;\n      }\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      if (keys.KeyW || keys.ArrowUp || this.wheel.up) {\n        velocity[wsAxis] -= wsSign * acceleration * delta;\n        delete this.wheel.up;\n      }\n      if (keys.KeyS || keys.ArrowDown || this.wheel.down) {\n        velocity[wsAxis] += wsSign * acceleration * delta;\n        delete this.wheel.down;\n      }\n    }\n  },\n  getMovementVector: (function () {\n    const directionVector = new THREE.Vector3(0, 0, 0);\n    const rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n\n    return function (delta) {\n      const rotation = this.orientationEl.getAttribute('rotation'); // this.el.getAttribute('rotation');\n      const { velocity } = this;\n\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n\n      // Absolute.\n      if (!rotation) {\n        return directionVector;\n      }\n\n      const xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(\n        THREE.Math.degToRad(xRotation),\n        THREE.Math.degToRad(rotation.y),\n        0\n      );\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  })(),\n\n  attachVisibilityEventListeners: function () {\n    window.addEventListener('blur', this.onBlur);\n    window.addEventListener('focus', this.onFocus);\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  removeVisibilityEventListeners: function () {\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('focus', this.onFocus);\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  attachKeyEventListeners: function () {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n    window.addEventListener('wheel', this.onWheel);\n  },\n\n  removeKeyEventListeners: function () {\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n    window.removeEventListener('wheel', this.onWheel);\n  },\n\n  onBlur: function () {\n    this.pause();\n  },\n\n  onFocus: function () {\n    this.play();\n  },\n\n  onVisibilityChange: function () {\n    if (document.hidden) {\n      this.onBlur();\n    } else {\n      this.onFocus();\n    }\n  },\n\n  onKeyDown: function (event) {\n    if (!shouldCaptureKeyEvent(event)) {\n      return;\n    }\n    const code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    if (KEYS.indexOf(code) !== -1) {\n      this.keys[code] = true;\n    }\n  },\n\n  onKeyUp: function (event) {\n    const code = event.code || KEYCODE_TO_CODE[event.keyCode];\n    delete this.keys[code];\n  },\n\n  onWheel: function (event) {\n    if (event.deltaY > 0) {\n      this.wheel.down = true;\n    } else if (event.deltaY < 0) {\n      this.wheel.up = true;\n    }\n  },\n});\n"],"mappings":"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","ignoreList":[]}
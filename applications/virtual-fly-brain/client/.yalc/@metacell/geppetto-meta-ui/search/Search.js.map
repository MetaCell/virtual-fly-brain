{"version":3,"file":"Search.js","names":["_react","_interopRequireWildcard","require","React","_SOLRclient","_datasources","_styles","_FilterList","_interopRequireDefault","_core","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","configurable","writable","_toPropertyKey","key","_createClass","protoProps","staticProps","prototype","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","self","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","_toPrimitive","Symbol","toPrimitive","String","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","toString","slice","name","Array","from","test","len","arr2","l","iterator","f","next","done","isArray","style","globalStyle","inputWrapper","searchText","filterIcon","closeIcon","paperResults","paperFilters","singleResult","main","useStyles","makeStyles","root","backgroundColor","icon","borderRadius","width","height","boxShadow","backgroundImage","outline","outlineOffset","background","checkedIcon","display","content","StyledCheckbox","itemState","checked","createElement","cursor","paddingTop","paddingLeft","paddingRight","fontSize","className","onClick","filterHandler","color","Results","_ref","data","mapping","closeHandler","clickHandler","topAnchor","searchStyle","undefined","clone","assign","top","Paper","id","MenuList","map","item","index","MenuItem","Filters","_ref2","filters","setFilters","openFilters","filters_expanded","paperRef","useRef","_useState","useState","open","left","_useState2","state","setState","useEffect","document","addEventListener","handleClickOutside","removeEventListener","event","current","contains","enabled","type","values","singleCheck","resetFilters","ref","heightPosition","pageY","textAlign","filter_name","marginBottom","disableGlobal","innerIndex","marginTop","marginLeft","verticalAlign","Button","fontFamily","borderColor","variant","Search","_Component","_this","DatasourceTypes","CUSTOM","customDatasourceHandler","SOLRClient","getResultsSOLR","initialFilters","searchConfiguration","isOpen","results","resultsHeight","openSearch","escFunction","handleResize","handleResults","requestedAction","stopPropagation","status","console","log","newFilters","applyFilters","_this2","allFiltersDisabled","newResults","filtersList","innerFilter","newFilter","record","recordToBeAdded","toLowerCase","indexOf","j","includes","requestData","window","spotlightString","getResults","sorter","datasourceConfiguration","refs","inputRef","parentNode","offsetHeight","offsetTop","keyCode","containerRef","componentDidUpdate","focus","componentDidMount","componentWillUnmount","componentWillMount","getDatasource","datasource","render","_this3","filteredResults","Grid","container","spacing","xs","sm","md","lg","Input","input","autoComplete","autoFocus","onChange","currentTarget","endAdornment","InputAdornment","position","resultsMapping","Component","_default","exports"],"sources":["../../src/search/Search.tsx"],"sourcesContent":["/**\n * @author  Dario Del Piano (dario@metacell.us)\n */\n\nimport * as React from \"react\";\nimport PropTypes from 'prop-types';\nimport { getResultsSOLR } from \"./datasources/SOLRclient\";\nimport { DatasourceTypes } from './datasources/datasources';\nimport { Component, FC, useState, useRef, useEffect } from \"react\";\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { Button, Grid, Input, InputAdornment, MenuList, MenuItem, Paper } from \"@material-ui/core\";\n\nimport { SearchProps, SearchState, ResultsProps, FiltersProps } from './SearchInterfaces';\n\ndeclare var require: any\n\n// Global used to sort the results from the sorter function declared in the searchConfiguration\ndeclare global {\n  interface Window { spotlightString: string; }\n}\n\nlet style = require('./style/search.less');\n\nlet globalStyle = {\n  inputWrapper: {\n      \"position\": \"absolute\",\n      \"paddingLeft\": \"2.5%\",\n      \"height\": \"100%\",\n      \"width\": \"100%\",\n      \"top\": \"10%\"\n  },\n  searchText: {\n      \"width\": \"100vh\",\n      \"zIndex\": \"1\",\n      \"fontSize\": \"22px\",\n      \"color\": \"black\",\n      \"backgroundColor\": \"white\",\n      \"padding\": \"12px 20px 12px 20px\",\n      \"border\": \"3px solid #11bffe\",\n      \"marginRight\": \"-8px\",\n  },\n  filterIcon: {\n      \"right\": \"25px\",\n      \"bottom\": \"15px\",\n      \"zIndex\": \"5\",\n      \"cursor\": \"pointer\",\n      \"fontSize\": \"25px\",\n      \"position\": \"absolute\",\n      \"color\": \"black\",\n  },\n  closeIcon: {\n      \"position\": \"relative\",\n      \"color\": \"#11bffe\",\n      \"bottom\": \"50px\",\n      \"right\": \"22px\",\n      \"fontWeight\": \"bold\",\n      \"fontSize\": \"20px\",\n      \"cursor\": \"pointer\",\n  },\n  paperResults: {\n      \"left\": \"15%\",\n      \"height\": \"50%\",\n      \"width\": \"70%\",\n      \"position\": \"absolute\",\n      \"textAlign\": \"center\",\n      \"backgroundColor\": \"#333333\",\n      \"margin\": \"10px 10px 10px 10px\",\n      \"padding\": \"12px 20px 12px 20px\",\n      \"overflow\": \"scroll\",\n      \"zIndex\": \"5\",\n  },\n  paperFilters: {\n      \"minHeight\": \"280px\",\n      \"minWidth\": \"240px\",\n      \"position\": \"absolute\",\n      \"backgroundColor\": \"#141313\",\n      \"color\": \"white\",\n      \"overflow\": \"scroll\",\n      \"zIndex\": \"6\",\n      \"border\": \"3px solid #11bffe\",\n      \"fontFamily\": \"Barlow, Khand, sans-serif\",\n      \"fontSize\": \"16px\",\n      \"top\": \"58px\",\n      \"right\": \"0px\",\n      \"userSelect\": \"none\",\n      \"-moz-user-select\": \"none\",\n      \"-khtml-user-select\": \"none\",\n      \"-webkit-user-select\": \"none\",\n      \"-o-user-select\": \"none\",\n\n      \"&::focus\": {\n        \"outline\": \"0 !important\",\n      },\n  },\n  singleResult: {\n      \"color\": \"white\",\n      \"&:hover\": {\n        \"color\": \"#11bffe\",\n        \"background-color\": \"#252323\",\n      },\n  },\n  main: {\n      \"position\": \"absolute\",\n      \"top\": \"0px\",\n      \"left\": \"0px\",\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"padding\": \"0\",\n      \"zIndex\": \"3\",\n      \"backgroundColor\": \"rgba(51, 51, 51, 0.7)\",\n      \"textAlign\": \"center\",\n      \"display\": \"flex\",\n      \"alignItems\": \"center\",\n      \"justifyContent\": \"center\",\n  }\n};\n\n/*\n * Results Functional Component\n * @param data: Array<any>\n * @param closeHandler: Function\n * @param clickHandler: Function\n */\n\nconst useStyles = makeStyles({\n  root: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n  },\n  icon: {\n    borderRadius: 3,\n    width: 16,\n    height: 16,\n    boxShadow: 'inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)',\n    backgroundColor: '#f5f8fa',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))',\n    '$root.Mui-focusVisible &': {\n      outline: '2px auto #11bffe',\n      outlineOffset: 2,\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#ebf1f5',\n    },\n    'input:disabled ~ &': {\n      boxShadow: 'none',\n      background: 'rgba(206,217,224,.5)',\n    },\n  },\n  checkedIcon: {\n    backgroundColor: '#11bffe',\n    backgroundImage: 'linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))',\n    '&:before': {\n      display: 'block',\n      width: 16,\n      height: 16,\n      backgroundImage:\n        \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath\" +\n        \" fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 \" +\n        \"1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\\\")\",\n      content: '\"\"',\n    },\n    'input:hover ~ &': {\n      backgroundColor: '#11bffe',\n    },\n  },\n});\n\nfunction StyledCheckbox(props) {\n  const itemState = props.checked;\n\n  switch (itemState) {\n    case \"disabled\":\n      return (\n        <i\n          style={{\n            cursor: 'pointer',\n            paddingTop: '3px',\n            paddingLeft: '5px',\n            paddingRight: '4px',\n            fontSize: '20px' }}\n          className=\"fa fa-square\"\n          onClick={() => {\n            props.filterHandler(props.filter);\n          }}/>\n      );\n      break;\n    case \"positive\":\n      return (\n        <i\n          style={{\n            color: 'green',\n            fontSize: '20px' ,\n            cursor: 'pointer',\n            paddingTop: '3px',\n            paddingLeft: '5px',\n            paddingRight: '4px', }}\n          className=\"fa fa-plus-square\"\n          onClick={() => {\n            props.filterHandler(props.filter);\n          }}/>\n      );\n      break;\n    case \"negative\":\n      return (\n        <i\n          style={{\n            color: 'red',\n            fontSize: '20px' ,\n            cursor: 'pointer',\n            paddingTop: '3px',\n            paddingLeft: '5px',\n            paddingRight: '4px', }}\n          className=\"fa fa-minus-square\"\n          onClick={() => {\n            props.filterHandler(props.filter);\n          }}/>\n      );\n      break;\n    default:\n      return (\n        <i\n          style={{\n            fontSize: '20px' ,\n            cursor: 'pointer',\n            paddingTop: '3px',\n            paddingLeft: '5px',\n            paddingRight: '4px',  }}\n          className=\"fa fa-square\"\n          onClick={() => {\n            props.filterHandler(props.filter);\n          }}/>\n      );\n      break;\n  }\n}\n\nconst Results: FC<ResultsProps> = ({ data, mapping, closeHandler, clickHandler, topAnchor, searchStyle }) => {\n  // if data are available we display the list of results\n  if (data == undefined || data.length == 0) return null;\n  let clone = Object.assign({}, searchStyle.paperResults);\n  clone.top = topAnchor.toString() + \"px\";\n  return (\n      <Paper style={ searchStyle.paperResults } id=\"paperResults\">\n        <MenuList>\n          {data.map((item, index) => {\n            return ( <MenuItem style={ searchStyle.singleResult }\n              key={index}\n              onClick={() => {\n                clickHandler(item[mapping[\"id\"]]);\n                closeHandler(false);\n              }}>\n              {item[mapping[\"name\"]]}\n            </MenuItem> );\n          })}\n        </MenuList>\n      </Paper>\n  );\n};\n\n/*\n * Filters Functional Component\n * @param filters: Array<any>\n * @param setFilters: Function\n * @param openFilters: Function\n */\n\nconst Filters: FC<FiltersProps> = ({ filters, searchStyle, setFilters, openFilters, filters_expanded }) => {\n  var paperRef = useRef(null);\n  const [ state, setState ] = useState({ open: filters_expanded, top: \"0\", left: \"0\" });\n\n  // hook for the event listener to detect when we click outside the component\n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside, false);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, false);\n    };\n  }, []);\n\n  // function to handle the click outside the filters to close the component\n  const handleClickOutside = event => {\n    if (paperRef.current && !paperRef.current.contains(event.target)) {\n      setState(() => {\n        return { open: false, top: \"0px\", left: \"0px\"}\n      });\n    }\n  };\n\n  const filterHandler = item => {\n    if (item.enabled === undefined) {\n      item.enabled = \"disabled\"\n    } else {\n      switch(item.enabled) {\n        case \"disabled\":\n          item.enabled = \"positive\"\n          break;\n        case \"positive\":\n          item.enabled = \"negative\"\n          break;\n        case \"negative\":\n          item.enabled = \"disabled\"\n          break;\n        default:\n          item.enabled = \"disabled\"\n          break;\n      }\n    }\n    if (item.type === 'array') {\n      item.values.map(singleCheck => {\n        singleCheck.enabled = item.enabled;\n        setFilters(singleCheck);\n      });\n    }\n    setFilters(item);\n    setState(() => { return { open: true, top: state.top, left: state.left} });\n  };\n\n  const resetFilters = () => {\n    filters.map((item, index) => {\n      switch (item.type) {\n        case 'string':\n          item.enabled = \"disabled\";\n          setFilters(item);\n          break;\n        case 'array':\n          item.enabled = \"disabled\";\n          item.values.map(singleCheck => {\n            singleCheck.enabled = \"disabled\";\n            setFilters(singleCheck);\n          });\n          setFilters(item);\n          break;\n        }\n      });\n    setState(() => { return { open: true, top: state.top, left: state.left} });\n  };\n\n  // If filters are not defined we don't visualise anything\n  if (filters == undefined || filters.length == 0) return null;\n\n  // if filters are defined we check if the filter's paper is open and display them\n  if (state.open) {\n    return (\n      <span ref={paperRef}>\n        <FilterListIcon style={ searchStyle.filterIcon } onClick={ (event:any) => {\n            // let heightPosition = (event.currentTarget as HTMLDivElement).offsetTop + 15;\n            let heightPosition = event.pageY + 30;\n            setState(() => { return { open: false, top: heightPosition + \"px\", left: \"0px\" } });\n          }} />\n        <Paper id=\"paperFilters\" style={ searchStyle.paperFilters } >\n          <MenuList>\n            {filters.map((item, index) => {\n              switch (item.type) {\n                case 'string':\n                  return (\n                    <div key={index} style={{ textAlign: \"left\", fontSize: \"16px\", height: \"25px\" }}>\n                      <StyledCheckbox\n                        filter={item}\n                        checked={item.enabled}\n                        filterHandler={filterHandler} />\n                      <span>\n                        {item.filter_name}\n                      </span>\n                    </div>);\n                  break;\n                case 'array':\n                  return (\n                    <div key={index} style={{ textAlign: \"left\", fontSize: \"16px\", height: \"25px\", marginBottom: \"5px\", }}>\n                      { item.disableGlobal === true\n                      ? <span style={{ paddingLeft: \"5px\"}} />\n                      : <StyledCheckbox\n                          filter={item}\n                          checked={item.enabled}\n                          filterHandler={filterHandler} /> }\n                      <span>\n                        {item.filter_name}\n                      </span>\n\n                      {item.values.map((value, innerIndex) => {\n                        return (\n                          <div key={index + \"_\" + innerIndex} style={{ marginTop: \"5px\", marginLeft: \"20px\", height: \"25px\" }}>\n                            <StyledCheckbox\n                              filter={value}\n                              checked={value.enabled}\n                              filterHandler={filterHandler} />\n                            <span style={{verticalAlign: \"middle\"}}>\n                              {value.filter_name}\n                            </span>\n                          </div>);\n                        })\n                      }\n                      <div style={{ paddingTop: \"18px\", paddingLeft: \"10px\" }}>\n                        <Button\n                          style={{\n                            fontSize: \"12px\",\n                            fontFamily: 'Barlow',\n                            borderRadius: '0px',\n                            color: 'white',\n                            borderColor: 'white'\n                          }}\n                          variant=\"outlined\"\n                          onClick={resetFilters}>\n                          Clear Filters\n                        </Button>\n                      </div>\n                    </div>);\n                  break;\n                default:\n                  return (\n                    <div key={index} style={{ fontSize: \"16px\" }} >\n                      \"Error filter \" + {item.key} + \" configuration\"\n                    </div>\n                  );\n                  break;\n              }\n            })}\n          </MenuList>\n        </Paper>\n      </span>\n    );\n  } else {\n    return (\n      <span ref={paperRef}>\n        <FilterListIcon style={ searchStyle.filterIcon } onClick={ (event:any) => {\n          // let heightPosition = (event.currentTarget as HTMLDivElement).offsetTop + 15;\n          let heightPosition = event.pageY + 30;\n          setState(() => { return { open: true, top: heightPosition + \"px\", left: \"0px\" } });\n        }} />\n      </span>\n    );\n  }\n};\n\n/*\n * Search Component\n * @param datasources: string\n * @param searchConfiguration: any\n * @param datasourceConfiguration: any\n * @param clickHandler: Function\n * @param customDatasourceHandler?: Function\n */\n\nclass Search extends Component<SearchProps, SearchState> {\n    private results: Array<any>;\n    private getResults: Function;\n    private resultsHeight: number;\n    private inputRef: any;\n\n    constructor (props: SearchProps) {\n        super(props);\n\n        // Initialise state from props is an antipattern if the source of truth can diverge from the state\n        // in our case that is not an issue since we are using the prop only to inialise the state, then\n        // the application rely on the state and not on the prop itself (this is for the filters)\n        const initialFilters = (props.searchConfiguration.filters !== undefined) ? props.searchConfiguration.filters : [];\n        this.state = {\n          value: \"\",\n          isOpen: false,\n          filters: initialFilters\n        };\n\n        this.results = [];\n        this.resultsHeight = 0;\n\n        this.openSearch = this.openSearch.bind(this);\n        this.setFilters = this.setFilters.bind(this);\n        this.escFunction = this.escFunction.bind(this);\n        this.handleResize = this.handleResize.bind(this);\n        this.handleResults = this.handleResults.bind(this);\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n      };\n\n      // literal object to extract the getter function based on the datasource we pick\n      getDatasource = {\n        [DatasourceTypes.CUSTOM]: this.props.customDatasourceHandler,\n        [DatasourceTypes.SOLRClient]: getResultsSOLR,\n      };\n\n      // handle the component opening / closing\n      openSearch(requestedAction) {\n        if (requestedAction !== undefined) {\n          this.results = [];\n          this.setState({ isOpen: requestedAction, value: \"\" });\n        } else {\n          this.results = [];\n          this.setState({ isOpen: !this.state.isOpen, value: \"\" });\n        }\n        if (event !== undefined && requestedAction) {\n          event.stopPropagation();\n        }\n      }\n\n      // results handler, the name says everything\n      handleResults(status:string, data:any, value:string) {\n        switch(status) {\n            case \"OK\":\n                if (this.state.value !== value) {\n                  if (value === \"\") {\n                    this.results = [];\n                  } else {\n                    this.results = data;\n                  }\n                  this.setState({ value: value });\n                }\n                break;\n            case \"ERROR\":\n                break;\n            default:\n                console.log(\"This is a case not considered\");\n        }\n      };\n\n      // update the filters, handler used to trigger the update from the filter component\n      setFilters(filter) {\n        let newFilters = this.state.filters.map(item => {\n          if (item.key === filter.key) {\n            return filter;\n          } else {\n            return item;\n          }\n        });\n        this.setState({ filters: newFilters });\n      };\n\n      // filter the results when 1 or more than one filter is provided\n      applyFilters() {\n        var allFiltersDisabled:boolean = true;\n        var newResults:Array<any> = [];\n\n        let filters = this.state.filters.map(filter => {\n          switch(filter.type) {\n            case 'string':\n              if (filter.enabled !== undefined && filter.enabled !== 'disabled') {\n                allFiltersDisabled = false;\n                return filter;\n              }\n              break;\n            case 'array':\n              let filtersList = filter.values.filter(innerFilter => {\n                if (innerFilter.enabled !== undefined && innerFilter.enabled !== 'disabled') {\n                  allFiltersDisabled = false;\n                  return true;\n                }\n                return false;\n              });\n              if (filtersList.length > 0) {\n                let newFilter = { ...filter }\n                newFilter.values = filtersList;\n                return newFilter;\n              }\n              break;\n            default:\n              console.log(\"Error filter \" + filter.key + \" configuration\");\n          }\n        }).filter( item => item !== undefined );\n\n        if (allFiltersDisabled) {\n          return this.results;\n        } else if (this.results.length > 0) {\n          newResults = this.results.filter(record => {\n            var recordToBeAdded:boolean = true;\n            for (let i = 0; i < filters.length; i++) {\n              switch(filters[i].type) {\n                case 'string':\n                  if (recordToBeAdded && filters[i].key !== undefined && record[filters[i].key] !== undefined) {\n                    if (filters[i].enabled === \"positive\" && !(record[filters[i].key].toLowerCase().indexOf(this.state.value.toLowerCase()) > -1)) {\n                      recordToBeAdded = false;\n                    }\n                    if (filters[i].enabled === \"negative\" && record[filters[i].key].toLowerCase().indexOf(this.state.value.toLowerCase()) > -1) {\n                      recordToBeAdded = false;\n                    }\n                  }\n                  break;\n                case 'array':\n                  if (record[filters[i].key] !== undefined) {\n                    for (let j = 0; j < filters[i].values.length; j++) {\n                      if (recordToBeAdded && filters[i].values[j].key !== undefined) {\n                        if (filters[i].values[j].enabled === \"positive\" && !(record[filters[i].key].includes(filters[i].values[j].key))) {\n                          recordToBeAdded = false;\n                        }\n                        if (filters[i].values[j].enabled === \"negative\" && record[filters[i].key].includes(filters[i].values[j].key)) {\n                          recordToBeAdded = false;\n                        }\n                      }\n                    }\n                  }\n                  break;\n                default:\n                  recordToBeAdded = false;\n                  console.log(\"Error filter \" + filters[i].key + \" configuration\");\n              }\n            }\n            return recordToBeAdded;\n          });\n          return newResults;\n        } else {\n          return newResults;\n        }\n      }\n\n      // wrapper to call the getter with all the required params for the generic datasource call.\n      requestData(e) {\n        window.spotlightString = e.target.value;\n        this.getResults(e.target.value,\n                        this.handleResults,\n                        this.props.searchConfiguration.sorter,\n                        this.props.datasourceConfiguration);\n      };\n\n      handleResize() {\n        if (this.refs.inputRef !== undefined) {\n          this.resultsHeight = ((this.refs.inputRef as HTMLInputElement).parentNode as HTMLDivElement).offsetHeight + ((this.refs.inputRef as HTMLInputElement).parentNode as HTMLDivElement).offsetTop + 10;\n          // this setState it's actually an hack to re-render when the browser is resized\n          // TODO: the render can be improved to avoid the filter function when this happen\n          this.setState({ value: this.state.value });\n        }\n      }\n\n      escFunction(event){\n        if(event.keyCode === 27) {\n          this.openSearch(false);\n        }\n      }\n\n      handleClickOutside (event) {\n        if (this.state.isOpen\n            && (this.refs.containerRef && !(this.refs.containerRef as HTMLDivElement).contains(event.target))) {\n          this.openSearch(false);\n        }\n      };\n\n      componentDidUpdate() {\n        if (this.inputRef !== undefined && this.inputRef !== null) {\n          this.inputRef.focus();\n        }\n      }\n\n      componentDidMount() {\n        window.addEventListener('resize', this.handleResize);\n        window.addEventListener('keydown', this.escFunction, false);\n        window.addEventListener(\"click\", this.handleClickOutside, false);\n        if (this.inputRef !== undefined && this.inputRef !== null) {\n          this.inputRef.focus();\n        }\n      }\n\n      componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize);\n        window.removeEventListener('keydown', this.escFunction, false);\n        window.removeEventListener(\"click\", this.handleClickOutside, false);\n      }\n\n      // link the function getResults to the datasource getter that we decided in the prop datasource\n      componentWillMount() {\n        this.getResults = this.getDatasource[this.props.datasource]\n      };\n\n      render() {\n        if (!this.state.isOpen) {\n          return null;\n        }\n\n        let searchStyle = (this.props.searchStyle !== undefined) ? this.props.searchStyle : globalStyle;\n        let filteredResults:Array<any> = this.applyFilters();\n        return (\n          <div>\n            <Paper id=\"mainPaper\" style={searchStyle.main}>\n              <div style={searchStyle.inputWrapper} ref=\"containerRef\">\n                <Grid container spacing={3}>\n                  <Grid item xs={12} sm={12} md={12} lg={12}>\n                    <Input style={searchStyle.searchText} type=\"text\"\n                    ref={(input) => { this.inputRef = input; }}\n                    id=\"searchInput\"\n                    autoComplete=\"virtualflybrain\"\n                    autoFocus={true}\n                    onChange={ (e:any) => {\n                      this.resultsHeight = e.currentTarget.offsetTop + 65;\n                      this.requestData(e);\n                    }}\n                    endAdornment={\n                      <InputAdornment position=\"end\">\n                        <Filters\n                          filters_expanded={this.props.searchConfiguration.filters_expanded}\n                          searchStyle={searchStyle}\n                          filters={this.state.filters}\n                          setFilters={this.setFilters} />\n                      </InputAdornment>}\n                    />\n\n                  <span style={searchStyle.closeIcon} id=\"closeIcon\" className=\"fa fa-times\" onClick={ () => {\n                    this.openSearch(false); }}/>\n                  </Grid>\n                  <Grid item xs={12} sm={12} md={12} lg={12}>\n                    <Results\n                      data={filteredResults}\n                      searchStyle={searchStyle}\n                      mapping={this.props.searchConfiguration.resultsMapping}\n                      closeHandler={this.openSearch}\n                      clickHandler={this.props.searchConfiguration.clickHandler}\n                      topAnchor={this.resultsHeight} />\n                  </Grid>\n                </Grid>\n\n              </div>\n            </Paper>\n          </div>\n        );\n      }\n};\n\nexport default Search;\n"],"mappings":"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","ignoreList":[]}
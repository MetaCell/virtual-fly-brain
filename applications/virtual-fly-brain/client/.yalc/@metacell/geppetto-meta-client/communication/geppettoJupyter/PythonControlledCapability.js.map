{"version":3,"file":"PythonControlledCapability.js","names":["define","require","$","React","Utils","module","exports","createPythonControlledComponent","WrappedComponent","Wrapper","props","Component","PythonControlledComponent","state","undefined","model","componentType","getNameFromWrappedComponent","id","_isMounted","handler","syncValueWithPython","execPythonMessage","disconnectFromPython","nextProps","connectToPython","value","setState","createPythonControlledControl","PythonControlledControl","extend","searchText","checked","handleChange","bind","handleUpdateInput","handleUpdateCheckbox","UNRELIABLE_SyncDefaultValueWithPython","timeInterval","attemps","setTimeout","console","warn","prevProps","prevState","onChange","validate","then","response","errorState","errorMsg","newValue","prePythonSyncProcessing","realType","isNaN","parseFloat","JSON","parse","callback","oldValue","forceUpdate","updateMethod","updateTimer","clearTimeout","event","index","targetValue","target","triggerUpdate","updatePythonValue","isInputChecked","wrappedComponentProps","Object","assign","key","modelName","dimensionType","noStyle","includes","dataSource","floatingLabelText","hintText","Array","isArray","stringify","multiple","createPythonControlledControlWithPythonDataFetch","PythonControlledControlWithPythonDataFetch","evalPythonMessage","method","keys","length","pythonData","callPythonMethod","array1","array2","i","l","equals","compareArrays","v","indexOf","concat","nextState","postProcessItems","updates","items","name","displayName","Naked","render"],"sources":["../../../src/communication/geppettoJupyter/PythonControlledCapability.js"],"sourcesContent":["/**\n *\n * Synched capability\n * @module Widgets/Widget\n * @author Adrian Quintana (adrian@metacell.us)\n * @author Matteo Cantarelli (matteo@metacell.us)\n */\ndefine(function (require) {\n\n  var $ = require('jquery');\n  var React = require('react');\n  var Utils = require('./GeppettoJupyterUtils');\n\n  module.exports = {\n    createPythonControlledComponent (WrappedComponent) {\n      if (typeof WrappedComponent !== \"function\") {\n        // Fixes components defined as objects (e.g. Material-ui components)\n        class Wrapper extends React.Component {\n          render () {\n            return <WrappedComponent {...this.props} />;\n          }\n        } \n        WrappedComponent = Wrapper;\n      }\n      \n      class PythonControlledComponent extends WrappedComponent {\n        constructor (props) {\n          super(props);\n          if (this.state == undefined) {\n            this.state = {};\n          }\n          this.state.model = props.model;\n          this.state.componentType = getNameFromWrappedComponent(WrappedComponent);\n          this.id = (this.props.id == undefined) ? this.props.model : this.props.id;\n          \n          this._isMounted = false;\n        }\n\n        setSyncValueWithPythonHandler (handler) {\n          this.syncValueWithPython = handler;\n        }\n\n        connectToPython (componentType, model) {\n          Utils.execPythonMessage('jupyter_geppetto.ComponentSync(componentType=\"' + componentType + '\",model=\"' + model + '\",id=\"' + this.id + '\").connect()');\n        }\n\n        disconnectFromPython () {\n          Utils.execPythonMessage('jupyter_geppetto.remove_component_sync(componentType=\"' + this.state.componentType + '\",model=\"' + this.id + '\")');\n        }\n\n        componentWillUnmount () {\n          this._isMounted = false;\n          this.disconnectFromPython();\n        }\n\n        UNSAFE_componentWillReceiveProps (nextProps) {\n          this.disconnectFromPython();\n          this.id = (nextProps.id == undefined) ? nextProps.model : nextProps.id;\n          \n          this.connectToPython(this.state.componentType, nextProps.model);\n          if (this.state.value != nextProps.value) {\n            this.setState({ value: (nextProps.value === undefined) ? '' : nextProps.value });\n          }\n        }\n\n        componentDidMount () {\n          this._isMounted = true;\n          if (this.props.model != undefined) {\n            this.connectToPython(this.state.componentType, this.props.model);\n          }\n          if (this.props.value != undefined) {\n            this.setState({ value: this.props.value });\n          }\n        }\n\n      }\n\n      return PythonControlledComponent;\n    },\n\n    createPythonControlledControl (WrappedComponent) {\n\n      var PythonControlledComponent = this.createPythonControlledComponent(WrappedComponent);\n      class PythonControlledControl extends PythonControlledComponent {\n\n        constructor (props) {\n          super(props);\n          this.state = $.extend(this.state, {\n            value: '',\n            searchText: '',\n            checked: false\n          });\n\n          // If a handleChange method is passed as a props it will overwrite the handleChange python controlled capability\n          this.handleChange = (this.props.handleChange == undefined) ? this.handleChange.bind(this) : this.props.handleChange.bind(this);\n          this.handleUpdateInput = this.handleUpdateInput.bind(this);\n          this.handleUpdateCheckbox = this.handleUpdateCheckbox.bind(this);\n          \n        }\n\n        componentDidMount () {\n          super.componentDidMount()\n          this.UNRELIABLE_SyncDefaultValueWithPython()\n        }\n\n        /*\n         * since we don't know when a component will be synched with python,\n         * we can't know when to check if this.state.value should be replaced\n         * with this.props.default\n         */\n        UNRELIABLE_SyncDefaultValueWithPython (timeInterval = 100, attemps = 0) {\n          if (attemps < 3) {\n            setTimeout(() => {\n              if (this.props.default && this.state.value === '') {\n                if (this.syncValueWithPython) {\n                  // this function is added by jupyter_geppetto after the component is synched with python\n                  this.syncValueWithPython(this.props.default);\n                } else {\n                  this.UNRELIABLE_SyncDefaultValueWithPython(timeInterval * 2, attemps + 1)\n                }\n              }\n            }, timeInterval)\n          } else {\n            console.warn(`Tried to sync default value for ${this.props.model} and failed after 3 attemps.`)\n          }\n        }\n\n        UNSAFE_componentWillReceiveProps (nextProps) {\n          this.disconnectFromPython();\n          this.id = (nextProps.id == undefined) ? nextProps.model : nextProps.id;\n          this.connectToPython(this.state.componentType, nextProps.model);\n          if ((this.state.searchText != nextProps.searchText) && (nextProps.searchText != undefined)) {\n            this.setState({ searchText: nextProps.searchText });\n          }\n          if ((this.state.checked != nextProps.checked) && (nextProps.checked != undefined)) {\n            this.setState({ checked: nextProps.checked });\n          }\n          if ((this.state.value != nextProps.value) && (nextProps.value != undefined)) {\n            this.setState({ value: nextProps.value });\n          }\n          if ((this.state.model != nextProps.model) && (nextProps.model != undefined)) {\n            this.setState({ model: nextProps.model });\n          }\n        }\n\n        componentDidUpdate (prevProps, prevState) {\n          switch (getNameFromWrappedComponent(WrappedComponent)) {\n          case 'AutoComplete':\n            if (this.state.searchText !== prevState.searchText && this.props.onChange) {\n              this.props.onChange(this.state.searchText);\n            }\n            break;\n          case 'Checkbox':\n            if (this.state.checked !== prevState.checked && this.props.onChange) {\n              this.props.onChange(null, this.state.checked);\n            }\n            break;\n          default:\n            if (this.state.value !== prevState.value && this.props.onChange) {\n              this.props.onChange(null, null, this.state.value);\n            }\n            break;\n          }\n          if (this.props.validate) {\n            this.props.validate(this.state.value)\n              .then(response => {\n                if (this.state.errorState !== response.errorMsg) {\n                  this.setState({ errorState: response.errorMsg });\n                }\n              });\n          }\n\n          if (\n            /*\n             * If the component changes id without unmounting,\n             * then default values will never be synched with python\n             */\n            this.props.model === prevProps.model \n            && this.state.value === '' \n            && this.props.default\n          ) {\n            this.UNRELIABLE_SyncDefaultValueWithPython(1000)\n          }\n        }\n\n        updatePythonValue (newValue) {\n          if (this.props.prePythonSyncProcessing !== undefined) {\n            newValue = this.props.prePythonSyncProcessing(newValue);\n          }\n          // whenever we invoke syncValueWithPython we will propagate the Javascript value of the model to Python\n          if (this.syncValueWithPython) {\n            // this.syncValueWithPython((event.target.type == 'number') ? parseFloat(this.state.value) : this.state.value, this.props.requirement);\n            switch (this.props.realType) {\n            case 'float':\n              if (!isNaN(newValue) && newValue !== '') {\n                newValue = parseFloat(newValue)\n              }\n              break;\n            case 'dict':\n              if (typeof newValue === 'string') {\n                newValue = JSON.parse(newValue)\n              }\n              break;\n            default:\n              break;\n            }\n            // Don't sync if new value is emtpy string\n            if (newValue !== '') {\n              this.syncValueWithPython(newValue);\n            }\n            \n            if (this.props.callback) {\n              this.props.callback(newValue, this.oldValue);\n            }\n            this.oldValue = undefined\n          \n          }\n          this.setState({ value: newValue, searchText: newValue, checked: newValue });\n          this.forceUpdate();\n        }\n\n        triggerUpdate (updateMethod) {\n          // common strategy when triggering processing of a value change, delay it, every time there is a change we reset\n          if (this.updateTimer != undefined) {\n            clearTimeout(this.updateTimer);\n          }\n          this.updateTimer = setTimeout(updateMethod, 1000);\n        }\n        // Default handle (mainly textfields and dropdowns)\n        handleChange (event, index, value) {\n          var targetValue = value;\n          if (event != null && event.target.value != undefined) {\n            targetValue = event.target.value;\n          }\n          if (this.oldValue === undefined) {\n            this.oldValue = this.state.value\n          }\n          \n          this.setState({ value: targetValue });\n\n          if (this.props.validate) {\n            this.props.validate(targetValue)\n              .then(response => {\n                if (response.errorMsg !== this.state.errorMsg) {\n                  this.setState({ errorMsg: response.errorMsg });\n                }\n              });\n          }\n\n          // For textfields value is retrieved from the event. For dropdown value is retrieved from the value\n          this.triggerUpdate(() => this.updatePythonValue(targetValue));\n        }\n\n        // Autocomplete handle\n        handleUpdateInput (value) {\n          this.triggerUpdate(() => this.updatePythonValue(value));\n        }\n\n        // Checkbox\n        handleUpdateCheckbox (event, isInputChecked) {\n          this.updatePythonValue(isInputChecked);\n        }\n\n        render () {\n          const wrappedComponentProps = Object.assign({}, this.props);\n          if (wrappedComponentProps.key == undefined) {\n            wrappedComponentProps.key = wrappedComponentProps.model;\n          }\n          if (wrappedComponentProps.id == undefined) {\n            wrappedComponentProps.id = wrappedComponentProps.model;\n          }\n          delete wrappedComponentProps.model;\n          delete wrappedComponentProps.handleChange;\n\n          delete wrappedComponentProps.modelName;\n          delete wrappedComponentProps.dimensionType;\n          delete wrappedComponentProps.noStyle;\n          delete wrappedComponentProps.validate;\n          delete wrappedComponentProps.prePythonSyncProcessing;\n          delete wrappedComponentProps.callback;\n\n          if (wrappedComponentProps.realType == 'func' || wrappedComponentProps.realType == 'float') {\n            wrappedComponentProps['helperText'] = this.state.errorMsg;\n          }\n          if (!getNameFromWrappedComponent(WrappedComponent).includes('ListComponent')) {\n            delete wrappedComponentProps.realType;\n          }\n\n          switch (getNameFromWrappedComponent(WrappedComponent)) {\n          case 'AutoComplete':\n            wrappedComponentProps['onUpdateInput'] = this.handleUpdateInput;\n            wrappedComponentProps['searchText'] = this.state.searchText;\n            break;\n          case 'Checkbox':\n            wrappedComponentProps['onChange'] = this.handleUpdateCheckbox;\n            wrappedComponentProps['checked'] = this.state.checked;\n            delete wrappedComponentProps.searchText;\n            delete wrappedComponentProps.dataSource;\n            delete wrappedComponentProps.floatingLabelText;\n            delete wrappedComponentProps.hintText;\n            break;\n          default:\n            wrappedComponentProps['onChange'] = this.handleChange;\n            wrappedComponentProps.value = (typeof this.state.value === 'object' && this.state.value !== null && !Array.isArray(this.state.value)) ? JSON.stringify(this.state.value) : this.state.value;\n            // Fix case with multiple values: need to set an empty list in case the value is undefined\n            wrappedComponentProps.value = (wrappedComponentProps.multiple \n              && wrappedComponentProps.value !== undefined \n              && !wrappedComponentProps.value) ? [] : wrappedComponentProps.value;\n            delete wrappedComponentProps.searchText;\n            delete wrappedComponentProps.dataSource;\n            break;\n          }\n\n          return (\n            <WrappedComponent {...wrappedComponentProps} />\n          );\n        }\n\n      }\n\n      return PythonControlledControl;\n    },\n\n    createPythonControlledControlWithPythonDataFetch (WrappedComponent) {\n\n      var PythonControlledComponent = this.createPythonControlledComponent(WrappedComponent);\n      class PythonControlledControlWithPythonDataFetch extends PythonControlledComponent {\n\n        constructor (props) {\n          super(props);\n          this.state = {\n            ...this.state,\n            value: [],\n            pythonData: []\n          }\n          // If a handleChange method is passed as a props it will overwrite the handleChange python controlled capability\n          this.handleChange = (this.props.handleChange == undefined) ? this.handleChange.bind(this) : this.props.handleChange.bind(this);\n          this.callPythonMethod();\n        }\n\n        UNSAFE_componentWillReceiveProps (nextProps) {\n          this.disconnectFromPython();\n          this.id = (nextProps.id == undefined) ? nextProps.model : nextProps.id;\n          \n          this.connectToPython(this.state.componentType, nextProps.model);\n          this.callPythonMethod();\n        }\n\n        /*\n         * TODO: this function appears defined 2 times\n         * I think the last def is picked up, so I am commenting this one\n         * componentDidUpdate (prevProps, prevState) {\n         *   if (this.state.value != prevState.value && this.props.onChange) {\n         *     this.props.onChange(null, null, this.state.value);\n         *   }\n         * }\n         */\n\n        updatePythonValue (newValue) {\n          this.setState({ value: newValue, searchText: newValue, checked: newValue });\n          if (this.syncValueWithPython) {\n            this.syncValueWithPython(newValue);\n          }\n\n          this.forceUpdate();\n        }\n\n\n        // Default handle (mainly textfields and dropdowns)\n        handleChange (event, index, value) {\n          var targetValue = value;\n          if (event != null && event.target.value != undefined) {\n            targetValue = event.target.value;\n          }\n          this.setState({ value: targetValue });\n          this.updatePythonValue(targetValue);\n        }\n\n\n        compareArrays (array1, array2) {\n          // if the other array is a falsy value, return\n          if (!array1 || !array2) {\n            return false;\n          }\n\n          // compare lengths - can save a lot of time \n          if (array1.length != array2.length) {\n            return false;\n          }\n\n          for (var i = 0, l = array1.length; i < l; i++) {\n            // Check if we have nested arrays\n            if (array1[i] instanceof Array && array2[i] instanceof Array) {\n              // recurse into the nested arrays\n              if (!array1[i].equals(array2[i])) {\n                return false;\n              }\n            } else if (array1[i] != array2[i]) {\n              // Warning - two different object instances will never be equal: {x:20} != {x:20}\n              return false;\n            }\n          }\n          return true;\n        }\n\n        callPythonMethod = value => {\n          Utils.evalPythonMessage(this.props.method, []).then(response => {\n            if (this._isMounted) {\n              if (Object.keys(response).length != 0) {\n                this.setState({ pythonData: response });\n              } else {\n                this.setState({ pythonData: [] });\n              }\n            }\n          });\n        }\n\n        componentDidUpdate (prevProps, prevState) {\n          if (!this.compareArrays(this.state.value, prevState.value)) {\n            if ($.isArray(this.state.value)) {\n              for (var v in this.state.value) {\n                if (this.state.pythonData.indexOf(this.state.value[v]) < 0) {\n                  var newValue = [this.state.value[v]];\n                  this.setState({ pythonData: this.state.pythonData.concat(newValue) });\n                }\n              }\n            }\n          }\n        }\n\n        shouldComponentUpdate (nextProps, nextState) {\n          return !this.compareArrays(this.state.pythonData, nextState.pythonData) || !this.compareArrays(this.state.value, nextState.value);\n        }\n\n        render () {\n          const wrappedComponentProps = Object.assign({}, this.props);\n          if (wrappedComponentProps.key == undefined) {\n            wrappedComponentProps.key = wrappedComponentProps.model;\n          }\n          if (wrappedComponentProps.id == undefined) {\n            wrappedComponentProps.id = wrappedComponentProps.model;\n          }\n          wrappedComponentProps.onChange = this.handleChange;\n          wrappedComponentProps.value = wrappedComponentProps.multiple && this.state.value !== undefined && !this.state.value ? [] : this.state.value;\n          delete wrappedComponentProps.model;\n          delete wrappedComponentProps.postProcessItems;\n          delete wrappedComponentProps.validate;\n          delete wrappedComponentProps.prePythonSyncProcessing;\n          delete wrappedComponentProps.updates;\n\n          if (this.props.postProcessItems) {\n            var items = this.props.postProcessItems(this.state.pythonData, wrappedComponentProps.value);\n          }\n          \n          return (\n            <WrappedComponent {...wrappedComponentProps}>\n              {items}\n            </WrappedComponent>\n          );\n        }\n\n      }\n\n      return PythonControlledControlWithPythonDataFetch;\n    },\n  }\n})\nfunction getNameFromWrappedComponent (WrappedComponent) {\n  return WrappedComponent.name || WrappedComponent.displayName || WrappedComponent.Naked.render.name;\n}\n\n"],"mappings":"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"}
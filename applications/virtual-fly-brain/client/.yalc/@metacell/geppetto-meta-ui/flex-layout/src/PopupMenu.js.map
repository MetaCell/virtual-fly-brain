{"version":3,"file":"PopupMenu.js","names":["React","_interopRequireWildcard","require","ReactDOM","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","showPopup","layoutDiv","triggerElement","items","onSelect","classNameMapper","currentDocument","ownerDocument","triggerRect","getBoundingClientRect","layoutRect","elm","createElement","className","left","width","style","right","top","height","bottom","appendChild","onHide","removeChild","unmountComponentAtNode","removeEventListener","onElementMouseUp","onDocMouseUp","event","stopPropagation","addEventListener","render","PopupMenu","props","onItemClick","item","itemElements","map","key","index","onClick","node","_getRenderedName"],"sources":["../../../src/flex-layout/src/PopupMenu.tsx"],"sourcesContent":["import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport TabNode from \"./model/TabNode\";\n\n/** @hidden @internal */\nexport function showPopup(\n    layoutDiv: HTMLDivElement,\n    triggerElement: Element,\n    items: { index: number; node: TabNode }[],\n    onSelect: (item: { index: number; node: TabNode }) => void,\n    classNameMapper: (defaultClassName: string) => string\n) {\n    const currentDocument = triggerElement.ownerDocument;\n    const triggerRect = triggerElement.getBoundingClientRect();\n    const layoutRect = layoutDiv.getBoundingClientRect();\n\n    const elm = currentDocument.createElement(\"div\");\n    elm.className = classNameMapper(\"flexlayout__popup_menu_container\");\n    if (triggerRect.left < layoutRect.left + layoutRect.width / 2) {\n        elm.style.left = triggerRect.left - layoutRect.left + \"px\";\n    } else {\n        elm.style.right = layoutRect.right - triggerRect.right + \"px\";\n    }\n\n    if (triggerRect.top < layoutRect.top + layoutRect.height / 2) {\n        elm.style.top = triggerRect.top - layoutRect.top + \"px\";\n    } else {\n        elm.style.bottom = layoutRect.bottom - triggerRect.bottom + \"px\";\n    }\n    layoutDiv.appendChild(elm);\n\n    const onHide = () => {\n        layoutDiv.removeChild(elm);\n        ReactDOM.unmountComponentAtNode(elm);\n        elm.removeEventListener(\"mouseup\", onElementMouseUp);\n        currentDocument.removeEventListener(\"mouseup\", onDocMouseUp);\n    };\n\n    const onElementMouseUp = (event: Event) => {\n        event.stopPropagation();\n    };\n\n    const onDocMouseUp = (event: Event) => {\n        onHide();\n    };\n\n    elm.addEventListener(\"mouseup\", onElementMouseUp);\n    currentDocument.addEventListener(\"mouseup\", onDocMouseUp);\n\n    ReactDOM.render(<PopupMenu currentDocument={currentDocument} onSelect={onSelect} onHide={onHide} items={items} classNameMapper={classNameMapper} />, elm);\n}\n\n/** @hidden @internal */\ninterface IPopupMenuProps {\n    items: { index: number; node: TabNode }[];\n    currentDocument: Document;\n    onHide: () => void;\n    onSelect: (item: { index: number; node: TabNode }) => void;\n    classNameMapper: (defaultClassName: string) => string;\n}\n\n/** @hidden @internal */\nconst PopupMenu = (props: IPopupMenuProps) => {\n    const { items, onHide, onSelect, classNameMapper } = props;\n\n    const onItemClick = (item: { index: number; node: TabNode }, event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        onSelect(item);\n        onHide();\n        event.stopPropagation();\n    };\n\n    const itemElements = items.map((item) => (\n        <div key={item.index} className={classNameMapper(\"flexlayout__popup_menu_item\")} onClick={(event) => onItemClick(item, event)}>\n            {item.node._getRenderedName()}\n        </div>\n    ));\n\n    return <div className={classNameMapper(\"flexlayout__popup_menu\")}>{itemElements}</div>;\n};\n"],"mappings":"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","ignoreList":[]}
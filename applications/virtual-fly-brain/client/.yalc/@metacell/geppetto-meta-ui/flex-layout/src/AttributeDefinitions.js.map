{"version":3,"file":"AttributeDefinitions.js","names":["_Attribute","_interopRequireDefault","require","obj","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","value","t","_toPrimitive","r","e","toPrimitive","call","String","Number","AttributeDefinitions","attributes","nameToAttribute","addWithAll","name","modelName","defaultValue","alwaysWriteJson","attr","Attribute","push","addInherited","undefined","add","getAttributes","getModelName","conversion","toJson","jsonObj","forEach","fromValue","fromJson","update","setDefaults","toTypescriptInterface","parentAttributes","lines","sorted","sort","a","b","localeCompare","c","type","inherited","defValue","JSON","stringify","required","fixed","comment","join","_default","exports"],"sources":["../../../src/flex-layout/src/AttributeDefinitions.ts"],"sourcesContent":["import Attribute from \"./Attribute\";\n\n/** @hidden @internal */\nclass AttributeDefinitions {\n    attributes: Attribute[];\n    nameToAttribute: Record<string, Attribute>;\n\n    constructor() {\n        this.attributes = [];\n        this.nameToAttribute = {};\n    }\n\n    addWithAll(name: string, modelName: string | undefined, defaultValue: any, alwaysWriteJson?: boolean) {\n        const attr = new Attribute(name, modelName, defaultValue, alwaysWriteJson);\n        this.attributes.push(attr);\n        this.nameToAttribute[name] = attr;\n        return attr;\n    }\n\n    addInherited(name: string, modelName: string) {\n        return this.addWithAll(name, modelName, undefined, false);\n    }\n\n    add(name: string, defaultValue: any, alwaysWriteJson?: boolean) {\n        return this.addWithAll(name, undefined, defaultValue, alwaysWriteJson);\n    }\n\n    getAttributes() {\n        return this.attributes;\n    }\n\n    getModelName(name: string) {\n        const conversion = this.nameToAttribute[name];\n        if (conversion !== undefined) {\n            return conversion.modelName;\n        }\n        return undefined;\n    }\n\n    toJson(jsonObj: any, obj: any) {\n        this.attributes.forEach((attr) => {\n            const fromValue = obj[attr.name];\n            if (attr.alwaysWriteJson || fromValue !== attr.defaultValue) {\n                jsonObj[attr.name] = fromValue;\n            }\n        });\n    }\n\n    fromJson(jsonObj: any, obj: any) {\n        this.attributes.forEach((attr) => {\n            const fromValue = jsonObj[attr.name];\n            if (fromValue === undefined) {\n                obj[attr.name] = attr.defaultValue;\n            } else {\n                obj[attr.name] = fromValue;\n            }\n        });\n    }\n\n    update(jsonObj: any, obj: any) {\n        this.attributes.forEach((attr) => {\n            const fromValue = jsonObj[attr.name];\n            if (fromValue !== undefined) {\n                obj[attr.name] = fromValue;\n            }\n        });\n    }\n\n    setDefaults(obj: any) {\n        this.attributes.forEach((attr) => {\n            obj[attr.name] = attr.defaultValue;\n        });\n    }\n\n    toTypescriptInterface(name: string, parentAttributes: AttributeDefinitions | undefined) {\n        const lines = [];\n        const sorted = this.attributes.sort((a,b)=> a.name.localeCompare(b.name));\n        // const sorted = this.attributes;\n        lines.push(\"export interface I\" + name + \"Attributes {\");\n        for (let i = 0; i < sorted.length; i++) {\n            const c = sorted[i];\n            let type = c.type;\n            let defaultValue = undefined;\n\n            let attr = c;\n            let inherited = undefined;\n            if (attr.defaultValue !== undefined){\n                defaultValue = attr.defaultValue;\n            } else if (attr.modelName !== undefined \n                && parentAttributes !== undefined \n                && parentAttributes.nameToAttribute[attr.modelName] !== undefined) {\n                    inherited = attr.modelName;\n                    attr = parentAttributes.nameToAttribute[attr.modelName];\n                    defaultValue = attr.defaultValue ;\n                    type = attr.type;\n            }\n\n            let defValue = JSON.stringify(defaultValue);\n\n            const required = attr.required || attr.fixed ? \"\": \"?\";\n\n            if (c.fixed) {\n                lines.push(\"\\t\" + c.name + \": \" + defValue +\";\");\n            } else {\n                const comment =  (defaultValue !== undefined ? \"default: \" + defValue : \"\") +\n                    (inherited !== undefined ? \" - inherited from global \" + inherited : \"\");\n\n                lines.push(\"\\t\" + c.name + required + \": \" + type + \";\" + \n                 (comment.length > 0 ? \" // \" + comment: \"\")\n                );\n            }\n        }\n        lines.push(\"}\");\n\n        return lines.join(\"\\n\");\n    }\n}\n\n/** @hidden @internal */\nexport default AttributeDefinitions;\n"],"mappings":"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","ignoreList":[]}
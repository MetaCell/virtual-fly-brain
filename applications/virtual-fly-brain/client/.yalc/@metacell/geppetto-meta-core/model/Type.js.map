{"version":3,"file":"Type.js","names":["ObjectWrapper","require","extend","Variable","Type","options","prototype","constructor","call","visualType","superType","undefined","capabilities","variableReferences","Object","create","getDefaultValue","wrappedObj","defaultValue","getSuperType","length","isAbstract","getVisualType","extendApi","extensionObj","push","capabilityId","hasCapability","i","addVariableReference","v","getVariableReferences","getPath","parent","typeOf","type","match","superTypes","module","exports"],"sources":["../../src/model/Type.js"],"sourcesContent":["\n\n/**\n * Client class use to represent a simple type.\n *\n * @module model/Type\n * @author Giovanni Idili\n * @author Matteo Cantarelli\n */\nconst ObjectWrapper = require('./ObjectWrapper');\nconst extend = require('../common/Utils').extend;\nconst Variable = require('./Variable').default;\n\nfunction Type (options) {\n  ObjectWrapper.prototype.constructor.call(this, options);\n  this.visualType = options.visualType;\n  this.superType = (options.superType != undefined) ? options.superType : [];\n  this.capabilities = [];\n  this.variableReferences = [];\n}\n\nType.prototype = Object.create(ObjectWrapper.prototype);\nType.prototype.constructor = Type;\n\n/**\n * Gets the default value for this type\n *\n * @command Type.getDefaultValue()\n *\n * @returns {Object} - Default value\n *\n */\nType.prototype.getDefaultValue = function () {\n  return this.wrappedObj.defaultValue;\n};\n\n/**\n * Gets the super type for this type\n *\n * @command Type.getSuperType()\n *\n * @returns {List<Type>} - Super type\n *\n */\nType.prototype.getSuperType = function () {\n  var superType = this.superType;\n\n  if (superType != undefined && this.superType.length == 1) {\n    superType = superType[0];\n  }\n\n  return superType;\n};\n\n/**\n * Check if the type is abstract\n *\n * @command Type.isAbstract()\n *\n * @returns {Boolean} - Boolean indicating if the type is abstract\n *\n */\nType.prototype.isAbstract = function () {\n  return this.wrappedObj.abstract;\n};\n\n/**\n * Gets the visual type for this type if any\n *\n * @command Type.getVisualType()\n *\n * @returns {Type} - Super type\n *\n */\nType.prototype.getVisualType = function () {\n  return this.visualType;\n};\n\n\n/**\n * Extends with methods from another object\n *\n * @command Type.extendApi(extensionObj)\n */\nType.prototype.extendApi = function (extensionObj) {\n  extend(this, extensionObj);\n  this.capabilities.push(extensionObj.capabilityId);\n};\n\n/**\n * Checks if the instance has a given capability\n *\n * @command Type.hasCapability(capabilityId)\n *\n * @returns {Boolean}\n */\nType.prototype.hasCapability = function (capabilityId) {\n  var hasCapability = false;\n  var capabilities = this.capabilities;\n\n  for (var i = 0; i < capabilities.length; i++) {\n    if (capabilities[i] === capabilityId) {\n      hasCapability = true;\n    }\n  }\n\n  return hasCapability;\n};\n\n/**\n *\n * @param v\n */\nType.prototype.addVariableReference = function (v) {\n  this.variableReferences.push(v);\n};\n\n/**\n *\n * @returns {Array}\n */\nType.prototype.getVariableReferences = function () {\n  return this.variableReferences;\n};\n\nType.prototype.getPath = function () {\n  if (this.parent != undefined & this.parent instanceof Variable) {\n    // if this is an anonymous type it doesn't have an id, hence we skip it\n    return this.parent.getPath();\n  } else {\n    return ObjectWrapper.prototype.getPath.call(this);\n  }\n};\n\nType.prototype.typeOf = function (type){\n  var match = false;\n\n  if (type.getPath() == this.getPath()){\n    // check if it's the same type\n    match = true;\n  } else {\n    // recurse on parents and figure out if there is a type in the inheritance chain\n    var superTypes = type.superType;\n\n    for (var i = 0; i < superTypes.length; i++) {\n      match = this.typeOf(superTypes[i]);\n      if (match){\n        break;\n      }\n    }\n  }\n\n  return match;\n};\n\n// Compatibility with new imports and old require syntax\nType.default = Type;\nmodule.exports = Type;\n\n"],"mappings":"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"}
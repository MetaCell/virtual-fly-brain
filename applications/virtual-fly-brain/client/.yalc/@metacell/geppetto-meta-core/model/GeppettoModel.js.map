{"version":3,"file":"GeppettoModel.js","names":["GeppettoModel","options","ObjectWrapper","prototype","constructor","call","variables","undefined","libraries","datasources","queries","worlds","currentWorldIdx","wrappedObj","length","Object","create","getVariables","legacy","getCurrentWorld","addToVariables","variablesToAdd","push","apply","setVariables","getAllVariables","concat","getId","Resources","MODEL_PREFIX_CLIENT","getLibraries","getDatasources","getQueries","getChildren","getWorlds","activateWorld","worldOrIndex","findIndex","world","id","console","error"],"sources":["../../src/model/GeppettoModel.js"],"sourcesContent":["\n\n/**\n * Client class use to represent top level Geppetto model.\n *\n * @module model/GeppettoModel\n * @author Giovanni Idili\n */\nimport Resources from '../Resources';\nimport ObjectWrapper from './ObjectWrapper';\n\n\nexport function GeppettoModel (options) {\n  ObjectWrapper.prototype.constructor.call(this, options);\n  this.variables = (options.variables != undefined) ? options.variables : [];\n  this.libraries = (options.libraries != undefined) ? options.libraries : [];\n  this.datasources = (options.datasources != undefined) ? options.datasources : [];\n  this.queries = (options.queries != undefined) ? options.queries : [];\n  this.worlds = options.worlds != undefined ? options.worlds : [];\n  this.currentWorldIdx = this.wrappedObj.worlds && this.wrappedObj.worlds.length ? 0 : -1;\n}\n\nGeppettoModel.prototype = Object.create(ObjectWrapper.prototype);\nGeppettoModel.prototype.constructor = GeppettoModel;\n\n/**\n * Get variables\n *\n * @command GeppettoModel.getVariables()\n *\n * @returns {List<Variable>} - List of Variable objects\n *\n */\nGeppettoModel.prototype.getVariables = function (legacy) {\n  if (this.currentWorldIdx >= 0 && !legacy) {\n    return this.getCurrentWorld().getVariables();\n  }\n  return this.variables;\n};\n\nGeppettoModel.prototype.addToVariables = function (variablesToAdd) {\n  let variables = this.getVariables();\n  variables.push.apply(variables, variablesToAdd);\n};\n\nGeppettoModel.prototype.setVariables = function (variables) {\n  if (this.currentWorldIdx >= 0) {\n    this.getCurrentWorld().setVariables(variables);\n  } else {\n    this.variables = variables;\n  }\n};\n\nGeppettoModel.prototype.getAllVariables = function () {\n  if (this.currentWorldIdx >= 0) {\n    return this.getCurrentWorld().getVariables().concat(this.variables);\n  }\n  return this.variables;\n};\n\n    \n/**\n * Get the id\n *\n * @command GeppettoModel.getId()\n *\n * @returns {String} - The id of the model, a constant\n *\n */\nGeppettoModel.prototype.getId = function () {\n  return Resources.MODEL_PREFIX_CLIENT;\n};\n\n/**\n * Get libraries\n *\n * @command GeppettoModel.getLibraries()\n *\n * @returns {List<Library>} - List of library objects\n *\n */\nGeppettoModel.prototype.getLibraries = function () {\n  return this.libraries;\n};\n\n/**\n * Get datasources\n *\n * @command GeppettoModel.getDatasources()\n *\n * @returns {List<Datasource>} - List of datasource objects\n *\n */\nGeppettoModel.prototype.getDatasources = function () {\n  return this.datasources;\n};\n\n/**\n * Get top level queries\n *\n * @command GeppettoModel.getQueries()\n *\n * @returns {List<Query>} - List of query objects\n *\n */\nGeppettoModel.prototype.getQueries = function () {\n  return this.queries;\n};\n\n/**\n * Get combined list of all children\n *\n * @command GeppettoModel.getChildren()\n *\n * @returns {List<Object>} - List of children\n *\n */\nGeppettoModel.prototype.getChildren = function () {\n  return this.variables.concat(this.libraries, this.datasources, this.queries, this.worlds);\n};\n\n\n/**\n * Get the default selected world\n *\n */\nGeppettoModel.prototype.getCurrentWorld = function () {\n  return this.worlds[this.currentWorldIdx];\n};\n\n/**\n * Get worlds\n *\n */\nGeppettoModel.prototype.getWorlds = function () {\n  return this.worlds;\n};\n\n/**\n * Set the default selected world\n *\n */\nGeppettoModel.prototype.activateWorld = function (worldOrIndex) {\n  if (typeof worldOrIndex == 'number') {\n    this.currentWorldIdx = worldOrIndex;\n  } else if (typeof worldOrIndex == 'string'){\n    this.currentWorldIdx = this.worlds.findIndex(world => world.id == worldOrIndex);\n  }\n  this.currentWorldIdx = this.worlds.findIndex(world => world.id == worldOrIndex.id);\n  if (this.worlds[this.currentWorldIdx] === undefined) {\n    console.error(worldOrIndex, \"world not found in model\");\n    throw \"World not found in model\";\n  }\n};\n\nexport default GeppettoModel;\n"],"mappings":"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"}
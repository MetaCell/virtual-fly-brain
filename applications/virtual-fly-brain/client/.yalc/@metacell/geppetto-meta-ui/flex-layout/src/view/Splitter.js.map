{"version":3,"file":"Splitter.js","names":["React","_interopRequireWildcard","require","_DragDrop","_interopRequireDefault","_Actions","_BorderNode","_Orientation","_Types","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","Splitter","exports","props","layout","node","pBounds","useRef","outlineDiv","undefined","parentNode","getParent","onMouseDown","event","DragDrop","instance","startDrag","onDragStart","onDragMove","onDragEnd","onDragCancel","getCurrentDocument","getRootDiv","current","_getSplitterBounds","rootdiv","createElement","style","position","className","getClassName","CLASSES","FLEXLAYOUT__SPLITTER_DRAG","cursor","getOrientation","Orientation","HORZ","getRect","positionElement","appendChild","wasDragging","removeChild","clientRect","getDomRect","pos","x","clientX","left","y","clientY","top","getBoundPosition","value","offsetTop","offsetLeft","BorderNode","_calculateSplit","doAction","Actions","adjustBorderSplit","getId","splitSpec","adjustSplit","p","bounds","rtn","cm","_styleWithPosition","FLEXLAYOUT__SPLITTER","FLEXLAYOUT__SPLITTER_","getName","FLEXLAYOUT__SPLITTER_BORDER","getModel","getMaximizedTabset","display","onTouchStart"],"sources":["../../../../src/flex-layout/src/view/Splitter.tsx"],"sourcesContent":["import * as React from \"react\";\nimport DragDrop from \"../DragDrop\";\nimport Actions from \"../model/Actions\";\nimport BorderNode from \"../model/BorderNode\";\nimport Node from \"../model/Node\";\nimport RowNode from \"../model/RowNode\";\nimport SplitterNode from \"../model/SplitterNode\";\nimport Orientation from \"../Orientation\";\nimport { CLASSES } from \"../Types\";\nimport { ILayoutCallbacks } from \"./Layout\";\n\n/** @hidden @internal */\nexport interface ISplitterProps {\n    layout: ILayoutCallbacks;\n    node: SplitterNode;\n}\n\n/** @hidden @internal */\nexport const Splitter = (props: ISplitterProps) => {\n    const { layout, node } = props;\n\n    const pBounds = React.useRef<number[]>([]);\n    const outlineDiv = React.useRef<HTMLDivElement | undefined>(undefined);\n    const parentNode = node.getParent() as RowNode | BorderNode;\n\n    const onMouseDown = (event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement>) => {\n        DragDrop.instance.startDrag(event, onDragStart, onDragMove, onDragEnd, onDragCancel, undefined, undefined, layout.getCurrentDocument(), layout.getRootDiv());\n        pBounds.current = parentNode._getSplitterBounds(node, true);\n        const rootdiv = layout.getRootDiv();\n        outlineDiv.current = layout.getCurrentDocument()!.createElement(\"div\");\n        outlineDiv.current.style.position = \"absolute\";\n        outlineDiv.current.className = layout.getClassName(CLASSES.FLEXLAYOUT__SPLITTER_DRAG);\n        outlineDiv.current.style.cursor = node.getOrientation() === Orientation.HORZ ? \"ns-resize\" : \"ew-resize\";\n        node.getRect().positionElement(outlineDiv.current);\n        rootdiv.appendChild(outlineDiv.current);\n    };\n\n    const onDragCancel = (wasDragging: boolean) => {\n        const rootdiv = layout.getRootDiv();\n        rootdiv.removeChild(outlineDiv.current as Element);\n    };\n\n    const onDragStart = () => {\n        return true;\n    };\n\n    const onDragMove = (event: React.MouseEvent<Element, MouseEvent>) => {\n        const clientRect = layout.getDomRect();\n        const pos = {\n            x: event.clientX - clientRect.left,\n            y: event.clientY - clientRect.top,\n        };\n\n        if (outlineDiv) {\n            if (node.getOrientation() === Orientation.HORZ) {\n                outlineDiv.current!.style.top = getBoundPosition(pos.y - 4) + \"px\";\n            } else {\n                outlineDiv.current!.style.left = getBoundPosition(pos.x - 4) + \"px\";\n            }\n        }\n    };\n\n    const onDragEnd = () => {\n        let value = 0;\n        if (outlineDiv) {\n            if (node.getOrientation() === Orientation.HORZ) {\n                value = outlineDiv.current!.offsetTop;\n            } else {\n                value = outlineDiv.current!.offsetLeft;\n            }\n        }\n\n        if (parentNode instanceof BorderNode) {\n            const pos = (parentNode as BorderNode)._calculateSplit(node, value);\n            layout.doAction(Actions.adjustBorderSplit((node.getParent() as Node).getId(), pos));\n        } else {\n            const splitSpec = parentNode._calculateSplit(node, value);\n            if (splitSpec !== undefined) {\n                layout.doAction(Actions.adjustSplit(splitSpec));\n            }\n        }\n\n        const rootdiv = layout.getRootDiv();\n        rootdiv.removeChild(outlineDiv.current as HTMLDivElement);\n    };\n\n    const getBoundPosition = (p: number) => {\n        const bounds = pBounds.current as number[];\n        let rtn = p;\n        if (p < bounds[0]) {\n            rtn = bounds[0];\n        }\n        if (p > bounds[1]) {\n            rtn = bounds[1];\n        }\n\n        return rtn;\n    };\n\n    const cm = layout.getClassName;\n    const style = node._styleWithPosition({\n        cursor: node.getOrientation() === Orientation.HORZ ? \"ns-resize\" : \"ew-resize\",\n    });\n    let className = cm(CLASSES.FLEXLAYOUT__SPLITTER) + \" \" + cm(CLASSES.FLEXLAYOUT__SPLITTER_ + node.getOrientation().getName());\n\n    if (parentNode instanceof BorderNode) {\n        className += \" \" + cm(CLASSES.FLEXLAYOUT__SPLITTER_BORDER);\n    } else {\n        if (node.getModel().getMaximizedTabset() !== undefined) {\n            style.display = \"none\";\n        }\n    }\n\n    return <div style={style} onTouchStart={onMouseDown} onMouseDown={onMouseDown} className={className} />;\n};\n"],"mappings":"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","ignoreList":[]}
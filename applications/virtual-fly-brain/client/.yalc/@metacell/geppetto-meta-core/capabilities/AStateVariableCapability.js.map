{"version":3,"file":"AStateVariableCapability.js","names":["capabilityId","watched","timeSeries","unit","getTimeSeries","undefined","initialValues","getVariable","getWrappedObj","i","length","value","eClass","setTimeSeries","getInitialValue","setUnit","getUnit","extractUnit","isWatched","setWatched","updateServer"],"sources":["../../src/capabilities/AStateVariableCapability.js"],"sourcesContent":["\n\n/**\n * Client class use to augment a model with state variable capabilities\n *\n * @module model/AStateVariableCapability\n * @author Matteo Cantarelli\n */\n\nexport default {\n  capabilityId: 'StateVariableCapability',\n  watched: false,\n  timeSeries: null,\n  unit: null,\n\n  /**\n   * Get value of quantity\n   *\n   * @command Variable.getTimeSeries()\n   * @returns {String} Value of quantity\n   */\n  getTimeSeries: function () {\n    if (!this.timeSeries) {\n      var timeSeries = undefined;\n      var initialValues = this.getVariable().getWrappedObj().initialValues;\n\n      if (initialValues != undefined) {\n        for (var i = 0; i < initialValues.length; i++) {\n          if (initialValues[i].value.eClass === 'TimeSeries') {\n            timeSeries = initialValues[i].value.value\n          }\n        }\n      }\n\n      return timeSeries;\n    }\n    return this.timeSeries;\n  },\n\n\n  /**\n   * Set the time series for the state variable\n   *\n   * @command Variable.setTimeSeries()\n   * @returns {Object} The state variable\n   */\n  setTimeSeries: function (timeSeries) {\n    this.timeSeries = timeSeries;\n    return this;\n  },\n\n  /**\n   * Get the initial value for the state variable\n   *\n   * @command Variable.getInitialValue()\n   * @returns {Object} The initial value of the state variable\n   */\n  getInitialValue: function () {\n\n    return this.getVariable().getWrappedObj().initialValues;\n  },\n\n  /**\n   * Set unit value\n   *\n   * @param unit\n   */\n  setUnit: function (unit) {\n    this.unit = unit;\n  },\n\n  /**\n   * Get the type of tree this is\n   *\n   * @command Variable.getUnit()\n   * @returns {String} Unit for quantity\n   */\n  getUnit: function () {\n    return (this.unit == null) ? this.extractUnit() : this.unit;\n  },\n\n  extractUnit: function () {\n    var unit = undefined;\n    var initialValues = this.getVariable().getWrappedObj().initialValues;\n\n    for (var i = 0; i < initialValues.length; i++) {\n      if (initialValues[i].value.eClass === 'PhysicalQuantity' || initialValues[i].value.eClass === 'TimeSeries') {\n        unit = initialValues[i].value.unit.unit\n      }\n    }\n    return unit;\n  },\n\n  /**\n   * Get watched\n   *\n   * @command Variable.getWatched()\n   * @returns {boolean} true if this variable is being watched\n   */\n  isWatched: function () {\n    // NOTE: this.watched is a flag added by this API / Capability\n    return this.watched;\n  },\n\n  /**\n   * Set watched\n   *\n   * @command Variable.setWatched()\n   * @param {Boolean} watched - Object with options attributes to initialize node\n   */\n  setWatched: function (isWatched, updateServer) {\n    if (updateServer == undefined) {\n      updateServer = true;\n    }\n    this.watched = isWatched;\n    return this;\n  }\n}\n\n"],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AALA,eAOe;EACbA,YAAY,EAAE,yBAAyB;EACvCC,OAAO,EAAE,KAAK;EACdC,UAAU,EAAE,IAAI;EAChBC,IAAI,EAAE,IAAI;EAEV;AACF;AACA;AACA;AACA;AACA;EACEC,aAAa,EAAE,yBAAY;IACzB,IAAI,CAAC,IAAI,CAACF,UAAU,EAAE;MACpB,IAAIA,UAAU,GAAGG,SAAS;MAC1B,IAAIC,aAAa,GAAG,IAAI,CAACC,WAAW,EAAE,CAACC,aAAa,EAAE,CAACF,aAAa;MAEpE,IAAIA,aAAa,IAAID,SAAS,EAAE;QAC9B,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,aAAa,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;UAC7C,IAAIH,aAAa,CAACG,CAAC,CAAC,CAACE,KAAK,CAACC,MAAM,KAAK,YAAY,EAAE;YAClDV,UAAU,GAAGI,aAAa,CAACG,CAAC,CAAC,CAACE,KAAK,CAACA,KAAK;UAC3C;QACF;MACF;MAEA,OAAOT,UAAU;IACnB;IACA,OAAO,IAAI,CAACA,UAAU;EACxB,CAAC;EAGD;AACF;AACA;AACA;AACA;AACA;EACEW,aAAa,EAAE,uBAAUX,UAAU,EAAE;IACnC,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC5B,OAAO,IAAI;EACb,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEY,eAAe,EAAE,2BAAY;IAE3B,OAAO,IAAI,CAACP,WAAW,EAAE,CAACC,aAAa,EAAE,CAACF,aAAa;EACzD,CAAC;EAED;AACF;AACA;AACA;AACA;EACES,OAAO,EAAE,iBAAUZ,IAAI,EAAE;IACvB,IAAI,CAACA,IAAI,GAAGA,IAAI;EAClB,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEa,OAAO,EAAE,mBAAY;IACnB,OAAQ,IAAI,CAACb,IAAI,IAAI,IAAI,GAAI,IAAI,CAACc,WAAW,EAAE,GAAG,IAAI,CAACd,IAAI;EAC7D,CAAC;EAEDc,WAAW,EAAE,uBAAY;IACvB,IAAId,IAAI,GAAGE,SAAS;IACpB,IAAIC,aAAa,GAAG,IAAI,CAACC,WAAW,EAAE,CAACC,aAAa,EAAE,CAACF,aAAa;IAEpE,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,aAAa,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;MAC7C,IAAIH,aAAa,CAACG,CAAC,CAAC,CAACE,KAAK,CAACC,MAAM,KAAK,kBAAkB,IAAIN,aAAa,CAACG,CAAC,CAAC,CAACE,KAAK,CAACC,MAAM,KAAK,YAAY,EAAE;QAC1GT,IAAI,GAAGG,aAAa,CAACG,CAAC,CAAC,CAACE,KAAK,CAACR,IAAI,CAACA,IAAI;MACzC;IACF;IACA,OAAOA,IAAI;EACb,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEe,SAAS,EAAE,qBAAY;IACrB;IACA,OAAO,IAAI,CAACjB,OAAO;EACrB,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;EACEkB,UAAU,EAAE,oBAAUD,SAAS,EAAEE,YAAY,EAAE;IAC7C,IAAIA,YAAY,IAAIf,SAAS,EAAE;MAC7Be,YAAY,GAAG,IAAI;IACrB;IACA,IAAI,CAACnB,OAAO,GAAGiB,SAAS;IACxB,OAAO,IAAI;EACb;AACF,CAAC;AAAA"}
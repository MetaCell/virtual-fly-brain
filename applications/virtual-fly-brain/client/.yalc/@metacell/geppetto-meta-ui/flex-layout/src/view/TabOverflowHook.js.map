{"version":3,"file":"TabOverflowHook.js","names":["React","_interopRequireWildcard","require","_Rect","_interopRequireDefault","_TabSetNode","_Orientation","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","prototype","toString","slice","constructor","name","Array","from","test","len","length","arr2","l","Symbol","iterator","f","next","done","push","value","isArray","useTabOverflow","exports","node","orientation","toolbarRef","stickyButtonsRef","firstRender","useRef","tabsTruncated","lastRect","Rect","selfRef","_React$useState","useState","_React$useState2","position","setPosition","userControlledLeft","_React$useState3","_React$useState4","hiddenTabs","setHiddenTabs","useLayoutEffect","current","getSelectedNode","getRect","width","height","updateVisibleTabs","useEffect","instance","addEventListener","onWheel","removeEventListener","event","preventDefault","getNear","rect","Orientation","HORZ","x","y","getFar","getRight","getBottom","getSize","tabMargin","nodeRect","TabSetNode","getTabHeaderRect","lastChild","getChildren","stickyButtonsSize","getBoundingClientRect","enabled","isEnableTabStrip","endPos","getTabRect","shiftPos","selectedTab","selectedRect","selectedStart","selectedEnd","extraSpace","Math","max","newPosition","min","diff","hidden","child","index","onMouseWheel","delta","abs","deltaX","deltaY","deltaMode","stopPropagation"],"sources":["../../../../src/flex-layout/src/view/TabOverflowHook.tsx"],"sourcesContent":["import * as React from \"react\";\nimport TabNode from \"../model/TabNode\";\nimport Rect from \"../Rect\";\nimport TabSetNode from \"../model/TabSetNode\";\nimport BorderNode from \"../model/BorderNode\";\nimport Orientation from \"../Orientation\";\n\n/** @hidden @internal */\nexport const useTabOverflow = (\n    node: TabSetNode | BorderNode, \n    orientation: Orientation, \n    toolbarRef: React.MutableRefObject<HTMLDivElement | null>, \n    stickyButtonsRef: React.MutableRefObject<HTMLDivElement | null>\n    ) => {\n    const firstRender = React.useRef<boolean>(true);\n    const tabsTruncated = React.useRef<boolean>(false);\n    const lastRect = React.useRef<Rect>(new Rect(0, 0, 0, 0));\n    const selfRef = React.useRef<HTMLDivElement | null>(null);\n\n    const [position, setPosition] = React.useState<number>(0);\n    const userControlledLeft = React.useRef<boolean>(false);\n    const [hiddenTabs, setHiddenTabs] = React.useState<{ node: TabNode; index: number }[]>([]);\n\n    // if selected node or tabset/border rectangle change then unset usercontrolled (so selected tab will be kept in view)\n    React.useLayoutEffect(() => {\n        userControlledLeft.current = false;\n    }, [node.getSelectedNode(), node.getRect().width, node.getRect().height]);\n\n    React.useLayoutEffect(() => {\n        updateVisibleTabs();\n    });\n\n    React.useEffect(() => {\n        const instance = selfRef.current!;\n        instance .addEventListener('wheel', onWheel);\n        return () => {\n            instance.removeEventListener('wheel', onWheel);\n        }\n    }, []);\n\n    // needed to prevent default mouse wheel over tabset/border (cannot do with react event?)\n    const onWheel = (event: Event) => {\n        event.preventDefault();\n    };\n\n    const getNear = (rect: Rect) => {\n        if (orientation === Orientation.HORZ) {\n            return rect.x;\n        } else {\n            return rect.y;\n        }\n    };\n\n    const getFar = (rect: Rect) => {\n        if (orientation === Orientation.HORZ) {\n            return rect.getRight();\n        } else {\n            return rect.getBottom();\n        }\n    };\n\n    const getSize = (rect: DOMRect | Rect) => {\n        if (orientation === Orientation.HORZ) {\n            return rect.width;\n        } else {\n            return rect.height;\n        }\n    };\n\n    const updateVisibleTabs = () => {\n        const tabMargin = 2;\n        if (firstRender.current === true ) {\n            tabsTruncated.current = false;\n        }\n        const nodeRect = node instanceof TabSetNode ? node.getRect() : (node as BorderNode).getTabHeaderRect()!;\n        let lastChild = node.getChildren()[node.getChildren().length - 1] as TabNode;\n        const stickyButtonsSize = stickyButtonsRef.current === null ? 0 : getSize(stickyButtonsRef.current!.getBoundingClientRect());\n\n        if (\n            firstRender.current === true ||\n            nodeRect.width !== lastRect.current.width || // incase rect changed between first render and second\n            nodeRect.height !== lastRect.current.height\n        ) {\n            lastRect.current = nodeRect;\n            const enabled = node instanceof TabSetNode ? node.isEnableTabStrip() === true : true;\n            let endPos = getFar(nodeRect) - stickyButtonsSize;\n            if (toolbarRef.current !== null) {\n                endPos -= getSize(toolbarRef.current.getBoundingClientRect());\n            } \n            if (enabled && node.getChildren().length > 0) {\n                if (hiddenTabs.length === 0 && position === 0 && getFar(lastChild.getTabRect()!) + tabMargin < endPos) {\n                    return; // nothing to do all tabs are shown in available space\n                }\n\n                endPos -= hiddenTabs.length > 0 ? (orientation === Orientation.HORZ ? 10 : 0) : 45; // will need hidden tabs\n\n                let shiftPos = 0;\n\n                const selectedTab = node.getSelectedNode() as TabNode;\n                if (selectedTab && !userControlledLeft.current) {\n                    const selectedRect = selectedTab.getTabRect()!;\n                    const selectedStart = getNear(selectedRect) - tabMargin;\n                    const selectedEnd = getFar(selectedRect) + tabMargin;\n\n                    // when selected tab is larger than available space then align left\n                    if (getSize(selectedRect) + 2 * tabMargin >= endPos - getNear(nodeRect) ) {\n                        shiftPos = getNear(nodeRect) - selectedStart;\n                    } else {\n                        if (selectedEnd > endPos || selectedStart < getNear(nodeRect)) {\n                            if (selectedStart < getNear(nodeRect)) {\n                                shiftPos = getNear(nodeRect) - selectedStart;\n                            }\n                            // use second if statement to prevent tab moving back then forwards if not enough space for single tab\n                            if (selectedEnd + shiftPos > endPos) {\n                                shiftPos = endPos - selectedEnd;\n                            }\n                        }\n                    }\n                }\n\n                const extraSpace = Math.max(0, endPos - (getFar(lastChild.getTabRect()!) + tabMargin + shiftPos));\n                const newPosition = Math.min(0, position + shiftPos + extraSpace);\n\n                // find hidden tabs\n                const diff = newPosition - position;\n                const hidden: { node: TabNode; index: number }[] = [];\n                for (let i = 0; i < node.getChildren().length; i++) {\n                    const child = node.getChildren()[i] as TabNode;\n                    if (getNear(child.getTabRect()!) + diff < getNear(nodeRect!) || getFar(child.getTabRect()!) + diff > endPos) {\n                        hidden.push({ node: child, index: i });\n                    }\n                }\n\n                if (hidden.length > 0) {\n                    tabsTruncated.current = true;\n                }\n\n                firstRender.current = false; // need to do a second render\n                setHiddenTabs(hidden);\n                setPosition(newPosition);\n            }\n        } else {\n            firstRender.current = true;\n        }\n    };\n\n    const onMouseWheel = (event: React.WheelEvent<HTMLDivElement>) => {\n        let delta = 0;\n        if (Math.abs(event.deltaX) > Math.abs(event.deltaY)) {\n            delta = -event.deltaX;\n        } else {\n            delta = -event.deltaY;\n        }\n        if (event.deltaMode === 1) {\n            // DOM_DELTA_LINE\t0x01\tThe delta values are specified in lines.\n            delta *= 40;\n        }\n        setPosition(position + delta);\n        userControlledLeft.current = true;\n        event.stopPropagation();\n    };\n\n    return { selfRef, position, userControlledLeft, hiddenTabs, onMouseWheel, tabsTruncated: tabsTruncated.current };\n};\n"],"mappings":"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","ignoreList":[]}
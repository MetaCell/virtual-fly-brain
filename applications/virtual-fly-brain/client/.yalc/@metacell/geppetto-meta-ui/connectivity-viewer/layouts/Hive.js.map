{"version":3,"file":"Hive.js","names":["d3","require","Hive","exports","calculateNodeDegrees","_classCallCheck","_createClass","key","value","draw","context","hiveLink","innerRadius","outerRadius","angle","scalePoint","domain","range","dataset","nodeTypes","length","Math","PI","quali_angle","scaleBand","radius","scaleLinear","linkTypeScale","scaleOrdinal","schemeCategory10","linkTypes","nodeTypeScale","nodeColormap","schemeCategory20","nodes","links","forEach","li","target","push","source","type","svg","append","attr","width","height","selectAll","data","enter","d","degrees","style","degree","node","text","id","radians","getLegends","getName","hasTooltip","hasToggle","hasSelect"],"sources":["../../../src/connectivity-viewer/layouts/Hive.js"],"sourcesContent":["\n\n// import * as d3 from \"d3\";\nconst d3 = require(\"d3\");\n\nexport class Hive {\n  constructor (calculateNodeDegrees) {\n    this.calculateNodeDegrees = calculateNodeDegrees\n  }\n\n  draw (context) {\n    if (this.calculateNodeDegrees !== null) {\n      context.calculateNodeDegrees(this.calculateNodeDegrees)\n    }\n    const hiveLink = require(\"d3-plugins-dist/dist/mbostock/hive/cjs\")[\"default\"]();\n\n    const innerRadius = 20;\n    const outerRadius = 180;\n\n    const angle = d3.scalePoint().domain(d3.range(context.dataset.nodeTypes.length + 1)).range([0, 2 * Math.PI]);\n    const quali_angle = d3.scaleBand().domain(context.dataset.nodeTypes).range([0, 2 * Math.PI]);\n    const radius = d3.scaleLinear().range([innerRadius, outerRadius]);\n    const linkTypeScale = d3.scaleOrdinal(d3.schemeCategory10).domain(context.dataset.linkTypes);\n    const nodeTypeScale = context.nodeColormap.range ? context.nodeColormap : d3.scaleOrdinal(d3.schemeCategory20);\n\n    const nodes = context.dataset.nodes,\n      links = [];\n    context.dataset.links.forEach(function (li) {\n      if (typeof li.target !== \"undefined\") {\n        links.push({ source: nodes[li.source], target: nodes[li.target], type: li.type });\n      }\n    });\n\n    const svg = context.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + context.width / 2 + \",\" + context.height / 2 + \")\");\n\n    svg.selectAll(\".axis\")\n      .data(d3.range(context.dataset.nodeTypes.length))\n      .enter().append(\"line\")\n      .attr(\"class\", \"axis\")\n      .attr(\"transform\", function (d) {\n        return \"rotate(\" + degrees(angle(d)) + \")\";\n      })\n      .attr(\"x1\", radius.range()[0])\n      .attr(\"x2\", radius.range()[1])\n      .style('stroke', \"#000\").style('stroke-width', '1.5px');\n\n    svg.selectAll(\".link\")\n      .data(links)\n      .enter().append(\"path\")\n      .attr(\"class\", \"link\")\n      .attr(\"d\", hiveLink\n        .angle(function (d) {\n          return quali_angle(d.type);\n        })\n        .radius(function (d) {\n          return radius(d.degree);\n        }))\n      .style(\"stroke\", function (d) {\n        return linkTypeScale(d.type);\n      }).style('fill', \"none\").style('stroke-width', '1.5px').style('stroke-opacity', 0.3);\n\n    const node = svg.selectAll(\".node\")\n      .data(nodes)\n      .enter().append(\"circle\")\n      .attr(\"class\", \"node\")\n      .attr(\"transform\", function (d) {\n        return \"rotate(\" + degrees(quali_angle(d.type)) + \")\";\n      })\n      .attr(\"cx\", function (d) {\n        return radius(d.degree);\n      })\n      .attr(\"r\", 5)\n      .style(\"fill\", function (d) {\n        return nodeTypeScale(d.type);\n      });\n\n    node.append(\"title\")\n      .text(function (d) {\n        return d.id;\n      });\n\n    function degrees (radians) {\n      return radians / Math.PI * 180 - 90;\n    }\n  }\n\n  getLegends (context){\n    return [];\n  }\n\n  getName (){\n    return \"Hive\"\n  }\n\n  hasTooltip (){\n    return false\n  }\n\n  hasToggle (){\n    return false\n  }\n\n  hasSelect (){\n    return false\n  }\n}"],"mappings":"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","ignoreList":[]}
{"version":3,"file":"extended-laser-controls.js","names":["_Events","require","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","emitEvent","event","raycaster","intersectedEls","emit","emitEventSelected","model","detail","cEvent","CustomEvent","toModel","_iterator","children","_step","child","selected","dispatchEvent","AFRAME","registerComponent","schema","id","type","init","el","components","data","camera","document","getElementById","concat","addEventListener","BRING_CLOSER","MOVE_PLAYER","evt","hand","STOP_PLAYER"],"sources":["../../../src/vr-canvas/aframe/extended-laser-controls.js"],"sourcesContent":["import { BRING_CLOSER, MOVE_PLAYER, STOP_PLAYER } from '../Events';\n\nfunction emitEvent (event, raycaster) {\n  if (raycaster.intersectedEls.length > 0) {\n    raycaster.intersectedEls[0].emit(event);\n  }\n}\n\nfunction emitEventSelected (event, model, detail) {\n  const cEvent = new CustomEvent(event, { detail: detail });\n  let toModel = true;\n  for (const child of model.children) {\n    if (child.selected) {\n      child.dispatchEvent(cEvent);\n      toModel = false;\n    }\n  }\n  if (toModel) {\n    model.dispatchEvent(cEvent);\n  }\n}\n\nAFRAME.registerComponent('extended-laser-controls', {\n  schema: { id: { type: 'string' }, },\n  init: function () {\n    const { el } = this;\n    const { raycaster } = this.el.components;\n    const { id } = this.data;\n\n    const camera = document.getElementById(`${id}_camera`);\n    const model = document.getElementById(`${id}_model`);\n\n    el.addEventListener('gripdown', () => {\n      emitEventSelected('gripdown', model, el.id);\n    });\n\n    el.addEventListener('gripup', () => {\n      emitEventSelected('gripup', model, el.id);\n    });\n\n    el.addEventListener('triggerdown', () => {\n      emitEvent('triggerdown', raycaster);\n    });\n\n    el.addEventListener('triggerup', () => {\n      emitEvent('triggerup', raycaster);\n    });\n\n    el.addEventListener(BRING_CLOSER, () => {\n      // TODO: Make it Only works for 1 selected object\n      emitEventSelected(BRING_CLOSER, model, null);\n    });\n\n    el.addEventListener(MOVE_PLAYER, evt => {\n      const event = new CustomEvent(MOVE_PLAYER, { detail: { hand: el.id, data: evt.detail }, });\n      camera.dispatchEvent(event);\n    });\n\n    el.addEventListener(STOP_PLAYER, () => {\n      const event = new CustomEvent(STOP_PLAYER);\n      camera.dispatchEvent(event);\n    });\n  },\n});\n"],"mappings":"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","ignoreList":[]}
{"version":3,"file":"SelectionUtils.js","names":["_util","require","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","key","value","_toPropertyKey","configurable","writable","i","_toPrimitive","toPrimitive","call","TypeError","String","Number","SELECTION_COLOR","g","b","a","mapToCanvasData","data","map","item","color","selected","instancePath","visibility","applySelection","selectedInstances","smap","Map","newData","get","dmap","undefined"],"sources":["../../../src/3d-canvas/utils/SelectionUtils.js"],"sourcesContent":["import { hexToRGBNormalized } from \"@metacell/geppetto-meta-ui/3d-canvas/threeDEngine/util\";\n\nconst SELECTION_COLOR = { r: 0.8, g: 0.8, b: 0, a: 1 };\n\n\nexport function mapToCanvasData (data){\n  return data.map(item => (\n    {\n      color: item.selected ? SELECTION_COLOR : item.color,\n      instancePath: item.instancePath,\n      visibility: item.visibility ? item.visibility : true\n    }\n  ))\n}\n\nexport function applySelection (data, selectedInstances) {\n  const smap = new Map(selectedInstances.map(i => [i, true]))\n  const newData = data.map(item => {\n    if (smap.get(item.instancePath)){\n      return {\n        ...item,\n        selected: !item.selected\n      }\n    }\n    return { ...item }\n  })\n  const dmap = new Map(newData.map(i => [i.instancePath, true]))\n\n  smap.forEach((value, key) => {\n    if (!dmap.get(key)){\n      newData.push({\n        instancePath: key,\n        color: undefined,\n        selected: true\n      })\n    }\n  })\n  return newData\n}"],"mappings":"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","ignoreList":[]}
{"version":3,"file":"Value.js","names":["ObjectWrapper","require","extend","Value","options","pointerValue","capabilities","getObject","wrappedObj","rawValue","eClass","JSON","parse","json","getObjectForMetadata","value","key","obj","stringValueMap","console","error","module","exports"],"sources":["../../src/model/Value.js"],"sourcesContent":["const ObjectWrapper = require('./ObjectWrapper');\nconst extend = require('../common/Utils').extend;\n/**\n * Client class use to represent a variable.\n *\n * @module model/Value\n */\nclass Value extends ObjectWrapper{\n\n\n  constructor (options) {\n    super(options);\n    this.pointerValue = options.pointerValue;\n    this.capabilities = [];\n    extend(this, this.getObject(this.wrappedObj));\n  }\n\n  getObject (rawValue) {\n    switch (rawValue.eClass) {\n    case 'JSON':\n      return JSON.parse(rawValue.json);\n    case 'Metadata':\n    case 'Composite':\n      return this.getObjectForMetadata(rawValue.value);\n    case 'StringToValueMap':\n      return { [rawValue.key]:this.getObject(rawValue.value) }\n    case 'TypeToValueMap':\n      return { 'value': this.getObject(rawValue.value) }\n    default:{\n      let obj = { ...rawValue };\n\n      if (obj.value && obj.value.eClass) {\n        extend(obj, this.getObject(obj.value));\n      }\n      delete obj.eClass;\n      return obj;\n    }\n\n    }\n\n    // TODO handle other value types\n  }\n\n\n  getObjectForMetadata (rawValue) {\n    let obj = {}\n    for (let stringValueMap of rawValue) {\n      if (!stringValueMap.value) {\n        console.error('Malformed object value', stringValueMap);\n        continue;\n      }\n      obj[stringValueMap.key] = this.getObject(stringValueMap.value);\n    }\n    return obj;\n  }\n\n}\n\n// Compatibility with new imports and old require syntax\nValue.default = Value;\nmodule.exports = Value;\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAMA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,IAAMC,MAAM,GAAGD,OAAO,CAAC,iBAAiB,CAAC,CAACC,MAAM;AAChD;AACA;AACA;AACA;AACA;AAJA,IAKMC,KAAK;EAAA;EAAA;EAGT,eAAaC,OAAO,EAAE;IAAA;IAAA;IACpB,0BAAMA,OAAO;IACb,MAAKC,YAAY,GAAGD,OAAO,CAACC,YAAY;IACxC,MAAKC,YAAY,GAAG,EAAE;IACtBJ,MAAM,gCAAO,MAAKK,SAAS,CAAC,MAAKC,UAAU,CAAC,CAAC;IAAC;EAChD;EAAC;IAAA;IAAA,OAED,mBAAWC,QAAQ,EAAE;MACnB,QAAQA,QAAQ,CAACC,MAAM;QACvB,KAAK,MAAM;UACT,OAAOC,IAAI,CAACC,KAAK,CAACH,QAAQ,CAACI,IAAI,CAAC;QAClC,KAAK,UAAU;QACf,KAAK,WAAW;UACd,OAAO,IAAI,CAACC,oBAAoB,CAACL,QAAQ,CAACM,KAAK,CAAC;QAClD,KAAK,kBAAkB;UACrB,2BAAUN,QAAQ,CAACO,GAAG,EAAE,IAAI,CAACT,SAAS,CAACE,QAAQ,CAACM,KAAK,CAAC;QACxD,KAAK,gBAAgB;UACnB,OAAO;YAAE,OAAO,EAAE,IAAI,CAACR,SAAS,CAACE,QAAQ,CAACM,KAAK;UAAE,CAAC;QACpD;UAAQ;YACN,IAAIE,GAAG,qBAAQR,QAAQ,CAAE;YAEzB,IAAIQ,GAAG,CAACF,KAAK,IAAIE,GAAG,CAACF,KAAK,CAACL,MAAM,EAAE;cACjCR,MAAM,CAACe,GAAG,EAAE,IAAI,CAACV,SAAS,CAACU,GAAG,CAACF,KAAK,CAAC,CAAC;YACxC;YACA,OAAOE,GAAG,CAACP,MAAM;YACjB,OAAOO,GAAG;UACZ;MAAC;;MAID;IACF;EAAC;IAAA;IAAA,OAGD,8BAAsBR,QAAQ,EAAE;MAC9B,IAAIQ,GAAG,GAAG,CAAC,CAAC;MAAA,2CACeR,QAAQ;QAAA;MAAA;QAAnC,oDAAqC;UAAA,IAA5BS,cAAc;UACrB,IAAI,CAACA,cAAc,CAACH,KAAK,EAAE;YACzBI,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,cAAc,CAAC;YACvD;UACF;UACAD,GAAG,CAACC,cAAc,CAACF,GAAG,CAAC,GAAG,IAAI,CAACT,SAAS,CAACW,cAAc,CAACH,KAAK,CAAC;QAChE;MAAC;QAAA;MAAA;QAAA;MAAA;MACD,OAAOE,GAAG;IACZ;EAAC;EAAA;AAAA,EA/CiBjB,aAAa,GAmDjC;AACAG,KAAK,WAAQ,GAAGA,KAAK;AACrBkB,MAAM,CAACC,OAAO,GAAGnB,KAAK"}
{"version":3,"file":"Tab.js","names":["_react","_interopRequireWildcard","require","React","_Actions","_interopRequireDefault","_TabSetNode","_Types","_","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","prototype","toString","slice","constructor","name","Array","from","test","len","length","arr2","l","Symbol","iterator","f","next","done","push","value","isArray","Tab","exports","props","layout","selected","node","factory","_React$useState","useState","isEnableRenderOnDemand","_React$useState2","renderComponent","setRenderComponent","useLayoutEffect","onMouseDown","parent","getParent","getType","TabSetNode","TYPE","isActive","doAction","Actions","setActiveTabset","getId","cm","getClassName","parentNode","style","_styleWithPosition","display","getModel","getMaximizedTabset","undefined","isMaximized","child","className","CLASSES","FLEXLAYOUT__TAB","BorderNode","FLEXLAYOUT__TAB_BORDER","FLEXLAYOUT__TAB_BORDER_","getLocation","getName","createElement","onTouchStart","Fragment"],"sources":["../../../../src/flex-layout/src/view/Tab.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Fragment } from \"react\";\nimport Actions from \"../model/Actions\";\nimport TabNode from \"../model/TabNode\";\nimport TabSetNode from \"../model/TabSetNode\";\nimport { CLASSES } from \"../Types\";\nimport { ILayoutCallbacks } from \"./Layout\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\nimport { I18nLabel } from \"../I18nLabel\";\nimport { BorderNode } from \"..\";\n\n/** @hidden @internal */\nexport interface ITabProps {\n    layout: ILayoutCallbacks;\n    selected: boolean;\n    node: TabNode;\n    factory: (node: TabNode) => React.ReactNode;\n}\n\n/** @hidden @internal */\nexport const Tab = (props: ITabProps) => {\n    const { layout, selected, node, factory } = props;\n    const [renderComponent, setRenderComponent] = React.useState<boolean>(!props.node.isEnableRenderOnDemand() || props.selected);\n\n    React.useLayoutEffect(() => {\n        if (!renderComponent && selected) {\n            // load on demand\n            // console.log(\"load on demand: \" + node.getName());\n            setRenderComponent(true);\n        }\n    });\n\n    const onMouseDown = () => {\n        const parent = node.getParent() as TabSetNode;\n        if (parent.getType() === TabSetNode.TYPE) {\n            if (!parent.isActive()) {\n                layout.doAction(Actions.setActiveTabset(parent.getId()));\n            }\n        }\n    };\n\n    const cm = layout.getClassName;\n\n    const parentNode = node.getParent() as TabSetNode | BorderNode;\n    const style: Record<string, any> = node._styleWithPosition({\n        display: selected ? \"block\" : \"none\",\n    });\n\n    if (parentNode instanceof TabSetNode) {\n        if (node.getModel().getMaximizedTabset() !== undefined && !parentNode.isMaximized()) {\n            style.display = \"none\";\n        }\n    }\n\n    let child;\n    if (renderComponent) {\n        child = factory(node);\n    }\n\n    let className = cm(CLASSES.FLEXLAYOUT__TAB);\n    if (parentNode instanceof BorderNode) {\n        className += \" \" + cm(CLASSES.FLEXLAYOUT__TAB_BORDER);\n        className += \" \" + cm(CLASSES.FLEXLAYOUT__TAB_BORDER_ + parentNode.getLocation().getName());\n    }\n\n    return (\n        <div className={className} onMouseDown={onMouseDown} onTouchStart={onMouseDown} style={style}>\n            {/* <ErrorBoundary message={props.layout.i18nName(I18nLabel.Error_rendering_component)}> */}\n                <Fragment>{child}</Fragment>\n            {/* </ErrorBoundary> */}\n        </div>\n    );\n};\n"],"mappings":"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","ignoreList":[]}
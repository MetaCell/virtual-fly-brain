{"version":3,"file":"thumbstick-controls.js","names":["_Events","require","MAX_DELTA","CLAMP_VELOCITY","isEmptyObject","obj","_","bind","AFRAME","utils","registerComponent","schema","acceleration","adAxis","oneOf","adEnabled","adInverted","easing","fly","id","type","wsAxis","wsEnabled","wsInverted","init","thumbstick","position","velocity","THREE","Vector3","onBlur","onFocus","onThumbstickMovement","onThumbstickStop","onVisibilityChange","attachVisibilityEventListeners","getOrientationElement","tick","time","delta","data","el","updateVelocity","currentPosition","getAttribute","movementVector","getMovementVector","x","y","z","setAttribute","remove","removeThumbstickEventListeners","removeVisibilityEventListeners","play","attachThumbstickEventListeners","pause","orientationEl","childCamera","querySelector","adSign","wsSign","Math","abs","left","right","up","down","directionVector","rotationEuler","Euler","rotation","copy","multiplyScalar","xRotation","set","degToRad","applyEuler","window","addEventListener","document","removeEventListener","MOVE_PLAYER","STOP_PLAYER","hidden","event","_event$detail","detail","hand","concat"],"sources":["../../../src/vr-canvas/aframe/thumbstick-controls.js"],"sourcesContent":["import { MOVE_PLAYER, STOP_PLAYER } from '../Events';\n\nconst MAX_DELTA = 0.2;\nconst CLAMP_VELOCITY = 0.00001;\n\nfunction isEmptyObject (obj) {\n  for (const _ in obj) {\n    return false;\n  }\n  return true;\n}\n\nconst { bind } = AFRAME.utils;\n\nAFRAME.registerComponent('thumbstick-controls', {\n  schema: {\n    acceleration: { default: 65 },\n    adAxis: { default: 'x', oneOf: ['x', 'y', 'z'] },\n    adEnabled: { default: true },\n    adInverted: { default: false },\n    easing: { default: 20 },\n    fly: { default: true },\n    id: { type: 'string' },\n    wsAxis: { default: 'z', oneOf: ['x', 'y', 'z'] },\n    wsEnabled: { default: true },\n    wsInverted: { default: false },\n  },\n  init: function () {\n    this.thumbstick = {};\n\n    this.position = {};\n    this.velocity = new THREE.Vector3();\n\n    // Bind methods and add event listeners.\n    this.onBlur = bind(this.onBlur, this);\n    this.onFocus = bind(this.onFocus, this);\n    this.onThumbstickMovement = bind(this.onThumbstickMovement, this);\n    this.onThumbstickStop = bind(this.onThumbstickStop, this);\n    this.onVisibilityChange = bind(this.onVisibilityChange, this);\n    this.attachVisibilityEventListeners();\n    this.getOrientationElement();\n  },\n  tick: function (time, delta) {\n    const { data } = this;\n    const { el } = this;\n    const { position } = this;\n    const { velocity } = this;\n\n    if (\n      !velocity[data.adAxis]\n      && !velocity[data.wsAxis]\n      && isEmptyObject(this.thumbstick)\n    ) {\n      return;\n    }\n\n    // Update velocity.\n    // eslint-disable-next-line no-param-reassign\n    delta /= 1000;\n    this.updateVelocity(delta);\n\n    if (!velocity[data.adAxis] && !velocity[data.wsAxis]) {\n      return;\n    }\n\n    // Get movement vector and translate position.\n    const currentPosition = el.getAttribute('position');\n    const movementVector = this.getMovementVector(delta);\n    position.x = currentPosition.x + movementVector.x;\n    position.y = currentPosition.y + movementVector.y;\n    position.z = currentPosition.z + movementVector.z;\n    el.setAttribute('position', position);\n  },\n\n  remove: function () {\n    this.removeThumbstickEventListeners();\n    this.removeVisibilityEventListeners();\n  },\n\n  play: function () {\n    this.attachThumbstickEventListeners();\n  },\n\n  pause: function () {\n    this.thumbstick = {};\n    this.removeThumbstickEventListeners();\n  },\n\n  getOrientationElement () {\n    // If a orientation element was defined explicitly use it\n    if (this.data.orientationEl) {\n      this.orientationEl = this.data.orientationEl;\n      return;\n    }\n\n    // If there is a camera on this element assume its the orientation element\n    if (this.el.getAttribute('camera')) {\n      this.orientationEl = this.el;\n      return;\n    }\n\n    // If we still haven't found a camera, search through this elements children\n    const childCamera = this.el.querySelector('[camera]');\n    if (childCamera) {\n      this.orientationEl = childCamera;\n      return;\n    }\n\n    // No cameras found, just use this element\n    this.orientationEl = this.el;\n  },\n\n  updateVelocity: function (delta) {\n    let adSign;\n    const { data } = this;\n    const { thumbstick } = this;\n    const { velocity } = this;\n    let wsSign;\n\n    const { adAxis, wsAxis, acceleration } = data;\n\n    // If FPS too low, reset velocity.\n    if (delta > MAX_DELTA) {\n      velocity[adAxis] = 0;\n      velocity[wsAxis] = 0;\n      return;\n    }\n\n    // Decay velocity.\n    if (velocity[adAxis] !== 0) {\n      velocity[adAxis] -= velocity[adAxis] * data.easing * delta;\n    }\n    if (velocity[wsAxis] !== 0) {\n      velocity[wsAxis] -= velocity[wsAxis] * data.easing * delta;\n    }\n\n    // Clamp velocity easing.\n    if (Math.abs(velocity[adAxis]) < CLAMP_VELOCITY) {\n      velocity[adAxis] = 0;\n    }\n    if (Math.abs(velocity[wsAxis]) < CLAMP_VELOCITY) {\n      velocity[wsAxis] = 0;\n    }\n\n    // Update velocity using thumbstick pressed.\n    if (data.adEnabled) {\n      adSign = data.adInverted ? -1 : 1;\n      if (thumbstick.left) {\n        velocity[adAxis]\n          -= adSign * acceleration * delta * Math.abs(thumbstick.left);\n      }\n      if (thumbstick.right) {\n        velocity[adAxis]\n          += adSign * acceleration * delta * Math.abs(thumbstick.right);\n      }\n    }\n    if (data.wsEnabled) {\n      wsSign = data.wsInverted ? -1 : 1;\n      if (thumbstick.up) {\n        velocity[wsAxis]\n          -= wsSign * acceleration * delta * Math.abs(thumbstick.up);\n      }\n      if (thumbstick.down) {\n        velocity[wsAxis]\n          += wsSign * acceleration * delta * Math.abs(thumbstick.down);\n      }\n    }\n  },\n  getMovementVector: (function () {\n    const directionVector = new THREE.Vector3(0, 0, 0);\n    const rotationEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n\n    return function (delta) {\n      const rotation = this.orientationEl.getAttribute('rotation'); // this.el.getAttribute('rotation');\n      const { velocity } = this;\n\n      directionVector.copy(velocity);\n      directionVector.multiplyScalar(delta);\n\n      // Absolute.\n      if (!rotation) {\n        return directionVector;\n      }\n\n      const xRotation = this.data.fly ? rotation.x : 0;\n\n      // Transform direction relative to heading.\n      rotationEuler.set(\n        THREE.Math.degToRad(xRotation),\n        THREE.Math.degToRad(rotation.y),\n        0\n      );\n      directionVector.applyEuler(rotationEuler);\n      return directionVector;\n    };\n  })(),\n\n  attachVisibilityEventListeners: function () {\n    window.addEventListener('blur', this.onBlur);\n    window.addEventListener('focus', this.onFocus);\n    document.addEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  removeVisibilityEventListeners: function () {\n    window.removeEventListener('blur', this.onBlur);\n    window.removeEventListener('focus', this.onFocus);\n    document.removeEventListener('visibilitychange', this.onVisibilityChange);\n  },\n\n  attachThumbstickEventListeners: function () {\n    const { el } = this;\n    el.addEventListener(MOVE_PLAYER, this.onThumbstickMovement);\n    el.addEventListener(STOP_PLAYER, this.onThumbstickStop);\n  },\n\n  removeThumbstickEventListeners: function () {\n    const { el } = this;\n\n    el.removeEventListener(MOVE_PLAYER, this.onThumbstickMovement);\n    el.removeEventListener(STOP_PLAYER, this.onThumbstickStop);\n  },\n\n  onBlur: function () {\n    this.pause();\n  },\n\n  onFocus: function () {\n    this.play();\n  },\n\n  onVisibilityChange: function () {\n    if (document.hidden) {\n      this.onBlur();\n    } else {\n      this.onFocus();\n    }\n  },\n\n  onThumbstickMovement: function (event) {\n    const { id } = this.data;\n    const { hand, data } = event.detail;\n    if (hand === `${id}_rightHand`) {\n      if (data.x < 0) {\n        this.thumbstick.left = data.x;\n      } else if (data.x > 0) {\n        this.thumbstick.right = data.x;\n      }\n      if (data.y < 0) {\n        this.thumbstick.up = data.y;\n      } else if (data.y > 0) {\n        this.thumbstick.down = data.y;\n      }\n    }\n  },\n  onThumbstickStop: function () {\n    this.thumbstick = {};\n  },\n});\n"],"mappings":";;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAMC,SAAS,GAAG,GAAG;AACrB,IAAMC,cAAc,GAAG,OAAO;AAE9B,SAASC,aAAaA,CAAEC,GAAG,EAAE;EAC3B,KAAK,IAAMC,CAAC,IAAID,GAAG,EAAE;IACnB,OAAO,KAAK;EACd;EACA,OAAO,IAAI;AACb;AAEA,IAAQE,IAAI,GAAKC,MAAM,CAACC,KAAK,CAArBF,IAAI;AAEZC,MAAM,CAACE,iBAAiB,CAAC,qBAAqB,EAAE;EAC9CC,MAAM,EAAE;IACNC,YAAY,EAAE;MAAE,WAAS;IAAG,CAAC;IAC7BC,MAAM,EAAE;MAAE,WAAS,GAAG;MAAEC,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG;IAAE,CAAC;IAChDC,SAAS,EAAE;MAAE,WAAS;IAAK,CAAC;IAC5BC,UAAU,EAAE;MAAE,WAAS;IAAM,CAAC;IAC9BC,MAAM,EAAE;MAAE,WAAS;IAAG,CAAC;IACvBC,GAAG,EAAE;MAAE,WAAS;IAAK,CAAC;IACtBC,EAAE,EAAE;MAAEC,IAAI,EAAE;IAAS,CAAC;IACtBC,MAAM,EAAE;MAAE,WAAS,GAAG;MAAEP,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG;IAAE,CAAC;IAChDQ,SAAS,EAAE;MAAE,WAAS;IAAK,CAAC;IAC5BC,UAAU,EAAE;MAAE,WAAS;IAAM;EAC/B,CAAC;EACDC,IAAI,EAAE,SAAAA,KAAA,EAAY;IAChB,IAAI,CAACC,UAAU,GAAG,CAAC,CAAC;IAEpB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAACC,QAAQ,GAAG,IAAIC,KAAK,CAACC,OAAO,CAAC,CAAC;;IAEnC;IACA,IAAI,CAACC,MAAM,GAAGvB,IAAI,CAAC,IAAI,CAACuB,MAAM,EAAE,IAAI,CAAC;IACrC,IAAI,CAACC,OAAO,GAAGxB,IAAI,CAAC,IAAI,CAACwB,OAAO,EAAE,IAAI,CAAC;IACvC,IAAI,CAACC,oBAAoB,GAAGzB,IAAI,CAAC,IAAI,CAACyB,oBAAoB,EAAE,IAAI,CAAC;IACjE,IAAI,CAACC,gBAAgB,GAAG1B,IAAI,CAAC,IAAI,CAAC0B,gBAAgB,EAAE,IAAI,CAAC;IACzD,IAAI,CAACC,kBAAkB,GAAG3B,IAAI,CAAC,IAAI,CAAC2B,kBAAkB,EAAE,IAAI,CAAC;IAC7D,IAAI,CAACC,8BAA8B,CAAC,CAAC;IACrC,IAAI,CAACC,qBAAqB,CAAC,CAAC;EAC9B,CAAC;EACDC,IAAI,EAAE,SAAAA,KAAUC,IAAI,EAAEC,KAAK,EAAE;IAC3B,IAAQC,IAAI,GAAK,IAAI,CAAbA,IAAI;IACZ,IAAQC,EAAE,GAAK,IAAI,CAAXA,EAAE;IACV,IAAQf,QAAQ,GAAK,IAAI,CAAjBA,QAAQ;IAChB,IAAQC,QAAQ,GAAK,IAAI,CAAjBA,QAAQ;IAEhB,IACE,CAACA,QAAQ,CAACa,IAAI,CAAC3B,MAAM,CAAC,IACnB,CAACc,QAAQ,CAACa,IAAI,CAACnB,MAAM,CAAC,IACtBjB,aAAa,CAAC,IAAI,CAACqB,UAAU,CAAC,EACjC;MACA;IACF;;IAEA;IACA;IACAc,KAAK,IAAI,IAAI;IACb,IAAI,CAACG,cAAc,CAACH,KAAK,CAAC;IAE1B,IAAI,CAACZ,QAAQ,CAACa,IAAI,CAAC3B,MAAM,CAAC,IAAI,CAACc,QAAQ,CAACa,IAAI,CAACnB,MAAM,CAAC,EAAE;MACpD;IACF;;IAEA;IACA,IAAMsB,eAAe,GAAGF,EAAE,CAACG,YAAY,CAAC,UAAU,CAAC;IACnD,IAAMC,cAAc,GAAG,IAAI,CAACC,iBAAiB,CAACP,KAAK,CAAC;IACpDb,QAAQ,CAACqB,CAAC,GAAGJ,eAAe,CAACI,CAAC,GAAGF,cAAc,CAACE,CAAC;IACjDrB,QAAQ,CAACsB,CAAC,GAAGL,eAAe,CAACK,CAAC,GAAGH,cAAc,CAACG,CAAC;IACjDtB,QAAQ,CAACuB,CAAC,GAAGN,eAAe,CAACM,CAAC,GAAGJ,cAAc,CAACI,CAAC;IACjDR,EAAE,CAACS,YAAY,CAAC,UAAU,EAAExB,QAAQ,CAAC;EACvC,CAAC;EAEDyB,MAAM,EAAE,SAAAA,OAAA,EAAY;IAClB,IAAI,CAACC,8BAA8B,CAAC,CAAC;IACrC,IAAI,CAACC,8BAA8B,CAAC,CAAC;EACvC,CAAC;EAEDC,IAAI,EAAE,SAAAA,KAAA,EAAY;IAChB,IAAI,CAACC,8BAA8B,CAAC,CAAC;EACvC,CAAC;EAEDC,KAAK,EAAE,SAAAA,MAAA,EAAY;IACjB,IAAI,CAAC/B,UAAU,GAAG,CAAC,CAAC;IACpB,IAAI,CAAC2B,8BAA8B,CAAC,CAAC;EACvC,CAAC;EAEDhB,qBAAqB,WAAAA,sBAAA,EAAI;IACvB;IACA,IAAI,IAAI,CAACI,IAAI,CAACiB,aAAa,EAAE;MAC3B,IAAI,CAACA,aAAa,GAAG,IAAI,CAACjB,IAAI,CAACiB,aAAa;MAC5C;IACF;;IAEA;IACA,IAAI,IAAI,CAAChB,EAAE,CAACG,YAAY,CAAC,QAAQ,CAAC,EAAE;MAClC,IAAI,CAACa,aAAa,GAAG,IAAI,CAAChB,EAAE;MAC5B;IACF;;IAEA;IACA,IAAMiB,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACkB,aAAa,CAAC,UAAU,CAAC;IACrD,IAAID,WAAW,EAAE;MACf,IAAI,CAACD,aAAa,GAAGC,WAAW;MAChC;IACF;;IAEA;IACA,IAAI,CAACD,aAAa,GAAG,IAAI,CAAChB,EAAE;EAC9B,CAAC;EAEDC,cAAc,EAAE,SAAAA,eAAUH,KAAK,EAAE;IAC/B,IAAIqB,MAAM;IACV,IAAQpB,IAAI,GAAK,IAAI,CAAbA,IAAI;IACZ,IAAQf,UAAU,GAAK,IAAI,CAAnBA,UAAU;IAClB,IAAQE,QAAQ,GAAK,IAAI,CAAjBA,QAAQ;IAChB,IAAIkC,MAAM;IAEV,IAAQhD,MAAM,GAA2B2B,IAAI,CAArC3B,MAAM;MAAEQ,MAAM,GAAmBmB,IAAI,CAA7BnB,MAAM;MAAET,YAAY,GAAK4B,IAAI,CAArB5B,YAAY;;IAEpC;IACA,IAAI2B,KAAK,GAAGrC,SAAS,EAAE;MACrByB,QAAQ,CAACd,MAAM,CAAC,GAAG,CAAC;MACpBc,QAAQ,CAACN,MAAM,CAAC,GAAG,CAAC;MACpB;IACF;;IAEA;IACA,IAAIM,QAAQ,CAACd,MAAM,CAAC,KAAK,CAAC,EAAE;MAC1Bc,QAAQ,CAACd,MAAM,CAAC,IAAIc,QAAQ,CAACd,MAAM,CAAC,GAAG2B,IAAI,CAACvB,MAAM,GAAGsB,KAAK;IAC5D;IACA,IAAIZ,QAAQ,CAACN,MAAM,CAAC,KAAK,CAAC,EAAE;MAC1BM,QAAQ,CAACN,MAAM,CAAC,IAAIM,QAAQ,CAACN,MAAM,CAAC,GAAGmB,IAAI,CAACvB,MAAM,GAAGsB,KAAK;IAC5D;;IAEA;IACA,IAAIuB,IAAI,CAACC,GAAG,CAACpC,QAAQ,CAACd,MAAM,CAAC,CAAC,GAAGV,cAAc,EAAE;MAC/CwB,QAAQ,CAACd,MAAM,CAAC,GAAG,CAAC;IACtB;IACA,IAAIiD,IAAI,CAACC,GAAG,CAACpC,QAAQ,CAACN,MAAM,CAAC,CAAC,GAAGlB,cAAc,EAAE;MAC/CwB,QAAQ,CAACN,MAAM,CAAC,GAAG,CAAC;IACtB;;IAEA;IACA,IAAImB,IAAI,CAACzB,SAAS,EAAE;MAClB6C,MAAM,GAAGpB,IAAI,CAACxB,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC;MACjC,IAAIS,UAAU,CAACuC,IAAI,EAAE;QACnBrC,QAAQ,CAACd,MAAM,CAAC,IACX+C,MAAM,GAAGhD,YAAY,GAAG2B,KAAK,GAAGuB,IAAI,CAACC,GAAG,CAACtC,UAAU,CAACuC,IAAI,CAAC;MAChE;MACA,IAAIvC,UAAU,CAACwC,KAAK,EAAE;QACpBtC,QAAQ,CAACd,MAAM,CAAC,IACX+C,MAAM,GAAGhD,YAAY,GAAG2B,KAAK,GAAGuB,IAAI,CAACC,GAAG,CAACtC,UAAU,CAACwC,KAAK,CAAC;MACjE;IACF;IACA,IAAIzB,IAAI,CAAClB,SAAS,EAAE;MAClBuC,MAAM,GAAGrB,IAAI,CAACjB,UAAU,GAAG,CAAC,CAAC,GAAG,CAAC;MACjC,IAAIE,UAAU,CAACyC,EAAE,EAAE;QACjBvC,QAAQ,CAACN,MAAM,CAAC,IACXwC,MAAM,GAAGjD,YAAY,GAAG2B,KAAK,GAAGuB,IAAI,CAACC,GAAG,CAACtC,UAAU,CAACyC,EAAE,CAAC;MAC9D;MACA,IAAIzC,UAAU,CAAC0C,IAAI,EAAE;QACnBxC,QAAQ,CAACN,MAAM,CAAC,IACXwC,MAAM,GAAGjD,YAAY,GAAG2B,KAAK,GAAGuB,IAAI,CAACC,GAAG,CAACtC,UAAU,CAAC0C,IAAI,CAAC;MAChE;IACF;EACF,CAAC;EACDrB,iBAAiB,EAAG,YAAY;IAC9B,IAAMsB,eAAe,GAAG,IAAIxC,KAAK,CAACC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClD,IAAMwC,aAAa,GAAG,IAAIzC,KAAK,CAAC0C,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC;IAErD,OAAO,UAAU/B,KAAK,EAAE;MACtB,IAAMgC,QAAQ,GAAG,IAAI,CAACd,aAAa,CAACb,YAAY,CAAC,UAAU,CAAC,CAAC,CAAC;MAC9D,IAAQjB,QAAQ,GAAK,IAAI,CAAjBA,QAAQ;MAEhByC,eAAe,CAACI,IAAI,CAAC7C,QAAQ,CAAC;MAC9ByC,eAAe,CAACK,cAAc,CAAClC,KAAK,CAAC;;MAErC;MACA,IAAI,CAACgC,QAAQ,EAAE;QACb,OAAOH,eAAe;MACxB;MAEA,IAAMM,SAAS,GAAG,IAAI,CAAClC,IAAI,CAACtB,GAAG,GAAGqD,QAAQ,CAACxB,CAAC,GAAG,CAAC;;MAEhD;MACAsB,aAAa,CAACM,GAAG,CACf/C,KAAK,CAACkC,IAAI,CAACc,QAAQ,CAACF,SAAS,CAAC,EAC9B9C,KAAK,CAACkC,IAAI,CAACc,QAAQ,CAACL,QAAQ,CAACvB,CAAC,CAAC,EAC/B,CACF,CAAC;MACDoB,eAAe,CAACS,UAAU,CAACR,aAAa,CAAC;MACzC,OAAOD,eAAe;IACxB,CAAC;EACH,CAAC,CAAE,CAAC;EAEJjC,8BAA8B,EAAE,SAAAA,+BAAA,EAAY;IAC1C2C,MAAM,CAACC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACjD,MAAM,CAAC;IAC5CgD,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAChD,OAAO,CAAC;IAC9CiD,QAAQ,CAACD,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC7C,kBAAkB,CAAC;EACxE,CAAC;EAEDmB,8BAA8B,EAAE,SAAAA,+BAAA,EAAY;IAC1CyB,MAAM,CAACG,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAACnD,MAAM,CAAC;IAC/CgD,MAAM,CAACG,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAClD,OAAO,CAAC;IACjDiD,QAAQ,CAACC,mBAAmB,CAAC,kBAAkB,EAAE,IAAI,CAAC/C,kBAAkB,CAAC;EAC3E,CAAC;EAEDqB,8BAA8B,EAAE,SAAAA,+BAAA,EAAY;IAC1C,IAAQd,EAAE,GAAK,IAAI,CAAXA,EAAE;IACVA,EAAE,CAACsC,gBAAgB,CAACG,mBAAW,EAAE,IAAI,CAAClD,oBAAoB,CAAC;IAC3DS,EAAE,CAACsC,gBAAgB,CAACI,mBAAW,EAAE,IAAI,CAAClD,gBAAgB,CAAC;EACzD,CAAC;EAEDmB,8BAA8B,EAAE,SAAAA,+BAAA,EAAY;IAC1C,IAAQX,EAAE,GAAK,IAAI,CAAXA,EAAE;IAEVA,EAAE,CAACwC,mBAAmB,CAACC,mBAAW,EAAE,IAAI,CAAClD,oBAAoB,CAAC;IAC9DS,EAAE,CAACwC,mBAAmB,CAACE,mBAAW,EAAE,IAAI,CAAClD,gBAAgB,CAAC;EAC5D,CAAC;EAEDH,MAAM,EAAE,SAAAA,OAAA,EAAY;IAClB,IAAI,CAAC0B,KAAK,CAAC,CAAC;EACd,CAAC;EAEDzB,OAAO,EAAE,SAAAA,QAAA,EAAY;IACnB,IAAI,CAACuB,IAAI,CAAC,CAAC;EACb,CAAC;EAEDpB,kBAAkB,EAAE,SAAAA,mBAAA,EAAY;IAC9B,IAAI8C,QAAQ,CAACI,MAAM,EAAE;MACnB,IAAI,CAACtD,MAAM,CAAC,CAAC;IACf,CAAC,MAAM;MACL,IAAI,CAACC,OAAO,CAAC,CAAC;IAChB;EACF,CAAC;EAEDC,oBAAoB,EAAE,SAAAA,qBAAUqD,KAAK,EAAE;IACrC,IAAQlE,EAAE,GAAK,IAAI,CAACqB,IAAI,CAAhBrB,EAAE;IACV,IAAAmE,aAAA,GAAuBD,KAAK,CAACE,MAAM;MAA3BC,IAAI,GAAAF,aAAA,CAAJE,IAAI;MAAEhD,IAAI,GAAA8C,aAAA,CAAJ9C,IAAI;IAClB,IAAIgD,IAAI,QAAAC,MAAA,CAAQtE,EAAE,eAAY,EAAE;MAC9B,IAAIqB,IAAI,CAACO,CAAC,GAAG,CAAC,EAAE;QACd,IAAI,CAACtB,UAAU,CAACuC,IAAI,GAAGxB,IAAI,CAACO,CAAC;MAC/B,CAAC,MAAM,IAAIP,IAAI,CAACO,CAAC,GAAG,CAAC,EAAE;QACrB,IAAI,CAACtB,UAAU,CAACwC,KAAK,GAAGzB,IAAI,CAACO,CAAC;MAChC;MACA,IAAIP,IAAI,CAACQ,CAAC,GAAG,CAAC,EAAE;QACd,IAAI,CAACvB,UAAU,CAACyC,EAAE,GAAG1B,IAAI,CAACQ,CAAC;MAC7B,CAAC,MAAM,IAAIR,IAAI,CAACQ,CAAC,GAAG,CAAC,EAAE;QACrB,IAAI,CAACvB,UAAU,CAAC0C,IAAI,GAAG3B,IAAI,CAACQ,CAAC;MAC/B;IACF;EACF,CAAC;EACDf,gBAAgB,EAAE,SAAAA,iBAAA,EAAY;IAC5B,IAAI,CAACR,UAAU,GAAG,CAAC,CAAC;EACtB;AACF,CAAC,CAAC","ignoreList":[]}
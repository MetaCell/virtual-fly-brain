{"version":3,"file":"DicomViewerUtils.js","names":["THREE","_interopRequireWildcard","require","_ami","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","HelpersStack","stackHelperFactory","CamerasOrthographic","orthographicCameraFactory","ControlsTrackball","trackballControlFactory","ControlsOrthographic","trackballOrthoControlFactory","HelpersLocalizer","localizerHelperFactory","dicomViewerUtils","windowResize2D","rendererObj","newWidth","domElement","clientWidth","newHeight","clientHeight","camera","canvas","width","height","fitBox","renderer","setSize","stackHelper","slice","canvasWidth","canvasHeight","localizerHelper","windowResize3D","aspect","updateProjectionMatrix","dispose","stack","_rawData","length","_frame","_mesh","remove","geometry","initHelpersStack","bbox","visible","borderColor","sliceColor","worldbb","worldBoundingBox","lpsDims","Vector3","box","center","worldCenter","clone","halfDimensions","x","y","z","directions","xCosine","yCosine","zCosine","orientation","sliceOrientation","update","stackOrientation","index","Math","floor","orientationMaxIndex","scene","add","initHelpersLocalizer","referencePlane","localizers","plane","color","localizerScene","Scene","updateLocalizer","refObj","targetLocalizersHelpers","refHelper","cartesianEquation","j","targetPlane","initRenderer2D","parentContainer","getElementsByClassName","domClass","innerHTML","WebGLRenderer","antialias","autoClear","localClippingEnabled","setClearColor","setPixelRatio","window","devicePixelRatio","id","targetID","appendChild","controls","staticMoving","noRotate","noPan","initRenderer3D","renderObj","PerspectiveCamera","position","rotateSpeed","zoomSpeed","panSpeed","dynamicDampingFactor","minDistance","maxDistance","light","DirectionalLight","copy","_default","exports"],"sources":["../../src/dicom-viewer/DicomViewerUtils.js"],"sourcesContent":["import * as THREE from 'three';\nimport {\n  stackHelperFactory,\n  orthographicCameraFactory,\n  trackballControlFactory,\n  trackballOrthoControlFactory,\n  localizerHelperFactory,\n} from 'ami.js';\n\nconst HelpersStack = stackHelperFactory(THREE);\nconst CamerasOrthographic = orthographicCameraFactory(THREE);\nconst ControlsTrackball = trackballControlFactory(THREE);\nconst ControlsOrthographic = trackballOrthoControlFactory(THREE);\nconst HelpersLocalizer = localizerHelperFactory(THREE);\n\nconst dicomViewerUtils = {\n  windowResize2D: function (rendererObj) {\n    const newWidth = rendererObj.domElement.clientWidth;\n    const newHeight = rendererObj.domElement.clientHeight;\n    rendererObj.camera.canvas = {\n      width: newWidth,\n      height: newHeight,\n    };\n    rendererObj.camera.fitBox(2, 1);\n    rendererObj.renderer.setSize(newWidth, newHeight);\n\n    /*\n     * update info to draw borders properly\n     * TODO: Remove once we are sure to remove the dotted line doesn't have any side effect\n     * rendererObj.stackHelper.slice.canvasWidth = newWidth;\n     * rendererObj.stackHelper.slice.canvasHeight = newHeight;\n     */\n    rendererObj.stackHelper.slice.canvasWidth = -1;\n    rendererObj.stackHelper.slice.canvasHeight = -1;\n    rendererObj.localizerHelper.canvasWidth = newWidth;\n    rendererObj.localizerHelper.canvasHeight = newHeight;\n  },\n\n  windowResize3D: function (rendererObj) {\n    const newWidth = rendererObj.domElement.clientWidth;\n    const newHeight = rendererObj.domElement.clientHeight;\n    rendererObj.camera.aspect = newWidth / newHeight;\n    rendererObj.camera.updateProjectionMatrix();\n    rendererObj.renderer.setSize(newWidth, newHeight);\n  },\n\n  dispose: function (rendererObj) {\n    if (rendererObj.stackHelper) {\n      rendererObj.stackHelper.dispose();\n      if (rendererObj.stackHelper.stack) {\n        rendererObj.stackHelper.stack._rawData.length = 0;\n        rendererObj.stackHelper.stack._frame.length = 0;\n        rendererObj.stackHelper.stack = null;\n      }\n    }\n    if (rendererObj.localizerHelper) {\n      if (rendererObj.localizerHelper._mesh) {\n        rendererObj.localizerHelper.remove(rendererObj.localizerHelper._mesh);\n        rendererObj.localizerHelper._mesh.geometry.dispose();\n        rendererObj.localizerHelper._mesh.geometry = null;\n        rendererObj.localizerHelper._mesh = null;\n      }\n    }\n  },\n\n  initHelpersStack: function (rendererObj, stack) {\n    if (rendererObj.stackHelper) {\n      rendererObj.stackHelper.dispose();\n      if (rendererObj.stackHelper.stack) {\n        rendererObj.stackHelper.stack._rawData.length = 0;\n        rendererObj.stackHelper.stack._frame.length = 0;\n        rendererObj.stackHelper.stack = null;\n      }\n    }\n    rendererObj.stackHelper = new HelpersStack(stack);\n    rendererObj.stackHelper.bbox.visible = false;\n    rendererObj.stackHelper.borderColor = rendererObj.sliceColor;\n\n    /*\n     * TODO: Remove once we are sure to remove the dotted line doesn't have any side effect\n     * rendererObj.stackHelper.slice.canvasWidth = rendererObj.domElement.clientWidth;\n     * rendererObj.stackHelper.slice.canvasHeight = rendererObj.domElement.clientHeight;\n     */\n    rendererObj.stackHelper.slice.canvasWidth = -1;\n    rendererObj.stackHelper.slice.canvasHeight = -1;\n\n    // set camera\n    let worldbb = stack.worldBoundingBox();\n    let lpsDims = new THREE.Vector3(\n      (worldbb[1] - worldbb[0]) / 2,\n      (worldbb[3] - worldbb[2]) / 2,\n      (worldbb[5] - worldbb[4]) / 2\n    );\n\n    let box = {\n      center: stack.worldCenter().clone(),\n      halfDimensions: new THREE.Vector3(\n        lpsDims.x + 5,\n        lpsDims.y + 5,\n        lpsDims.z + 5\n      ),\n    };\n\n    // init and zoom\n    let canvas = {\n      width: rendererObj.domElement.clientWidth,\n      height: rendererObj.domElement.clientHeight,\n    };\n\n    rendererObj.camera.directions = [\n      stack.xCosine,\n      stack.yCosine,\n      stack.zCosine,\n    ];\n    rendererObj.camera.box = box;\n    rendererObj.camera.canvas = canvas;\n    rendererObj.camera.orientation = rendererObj.sliceOrientation;\n    rendererObj.camera.update();\n    rendererObj.camera.fitBox(2, 1);\n\n    rendererObj.stackHelper.orientation = rendererObj.camera.stackOrientation;\n    rendererObj.stackHelper.index = Math.floor(\n      rendererObj.stackHelper.orientationMaxIndex / 2\n    );\n    rendererObj.scene.add(rendererObj.stackHelper);\n  },\n\n  initHelpersLocalizer: function (\n    rendererObj,\n    stack,\n    referencePlane,\n    localizers\n  ) {\n    if (rendererObj.localizerHelper) {\n      if (rendererObj.localizerHelper._mesh) {\n        rendererObj.localizerHelper.remove(rendererObj.localizerHelper._mesh);\n        rendererObj.localizerHelper._mesh.geometry.dispose();\n        rendererObj.localizerHelper._mesh.geometry = null;\n        rendererObj.localizerHelper._mesh = null;\n      }\n    }\n    rendererObj.localizerHelper = new HelpersLocalizer(\n      stack,\n      rendererObj.stackHelper.slice.geometry,\n      referencePlane\n    );\n\n    for (let i = 0; i < localizers.length; i++) {\n      rendererObj.localizerHelper['plane' + (i + 1)] = localizers[i].plane;\n      rendererObj.localizerHelper['color' + (i + 1)] = localizers[i].color;\n    }\n\n    rendererObj.localizerHelper.canvasWidth\n      = rendererObj.domElement.clientWidth;\n    rendererObj.localizerHelper.canvasHeight\n      = rendererObj.domElement.clientHeight;\n\n    rendererObj.localizerScene = new THREE.Scene();\n    rendererObj.localizerScene.add(rendererObj.localizerHelper);\n  },\n\n  updateLocalizer: function (refObj, targetLocalizersHelpers) {\n    let refHelper = refObj.stackHelper;\n    let localizerHelper = refObj.localizerHelper;\n    let plane = refHelper.slice.cartesianEquation();\n    localizerHelper.referencePlane = plane;\n\n    // bit of a hack... works fine for this application\n    for (let i = 0; i < targetLocalizersHelpers.length; i++) {\n      for (let j = 0; j < 4; j++) {\n        let targetPlane = targetLocalizersHelpers[i]['plane' + (j + 1)];\n        if (\n          targetPlane\n          && plane.x === targetPlane.x\n          && plane.y === targetPlane.y\n          && plane.z === targetPlane.z\n        ) {\n          targetLocalizersHelpers[i]['plane' + (j + 1)] = plane;\n        }\n      }\n    }\n\n    // update the geometry will create a new mesh\n    localizerHelper.geometry = refHelper.slice.geometry;\n  },\n\n  initRenderer2D: function (rendererObj, parentContainer) {\n    // renderer\n    rendererObj.domElement = parentContainer.getElementsByClassName(\n      rendererObj.domClass\n    )[0];\n    rendererObj.domElement.innerHTML = '';\n    rendererObj.renderer = new THREE.WebGLRenderer({ antialias: true });\n    rendererObj.renderer.autoClear = false;\n    rendererObj.renderer.localClippingEnabled = true;\n    rendererObj.renderer.setSize(\n      rendererObj.domElement.clientWidth,\n      rendererObj.domElement.clientHeight\n    );\n    rendererObj.renderer.setClearColor(0x121212, 1);\n    rendererObj.renderer.setPixelRatio(window.devicePixelRatio);\n    rendererObj.renderer.domElement.id = rendererObj.targetID;\n    rendererObj.domElement.appendChild(rendererObj.renderer.domElement);\n\n    // camera\n    rendererObj.camera = new CamerasOrthographic(\n      rendererObj.domElement.clientWidth / -2,\n      rendererObj.domElement.clientWidth / 2,\n      rendererObj.domElement.clientHeight / 2,\n      rendererObj.domElement.clientHeight / -2,\n      1,\n      1000\n    );\n\n    // controls\n    rendererObj.controls = new ControlsOrthographic(\n      rendererObj.camera,\n      rendererObj.domElement\n    );\n    rendererObj.controls.staticMoving = true;\n    rendererObj.controls.noRotate = true;\n    rendererObj.controls.noPan = true;\n    rendererObj.camera.controls = rendererObj.controls;\n\n    // scene\n    rendererObj.scene = new THREE.Scene();\n  },\n\n  initRenderer3D: function (renderObj, parentContainer) {\n    // renderer\n    renderObj.domElement = parentContainer.getElementsByClassName(\n      renderObj.domClass\n    )[0];\n    renderObj.domElement.innerHTML = '';\n\n    renderObj.renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderObj.renderer.setSize(\n      renderObj.domElement.clientWidth,\n      renderObj.domElement.clientHeight\n    );\n    renderObj.renderer.setClearColor(renderObj.color, 1);\n    renderObj.renderer.domElement.id = renderObj.targetID;\n    renderObj.domElement.appendChild(renderObj.renderer.domElement);\n\n    // camera\n    renderObj.camera = new THREE.PerspectiveCamera(\n      45,\n      renderObj.domElement.clientWidth / renderObj.domElement.clientHeight,\n      0.1,\n      100000\n    );\n    renderObj.camera.position.x = 250;\n    renderObj.camera.position.y = 250;\n    renderObj.camera.position.z = 250;\n\n    // controls\n    renderObj.controls = new ControlsTrackball(\n      renderObj.camera,\n      renderObj.domElement\n    );\n    renderObj.controls.rotateSpeed = 5.5;\n    renderObj.controls.zoomSpeed = 0.6;\n    renderObj.controls.panSpeed = 0.8;\n    renderObj.controls.staticMoving = true;\n    renderObj.controls.dynamicDampingFactor = 0.3;\n    renderObj.controls.minDistance = 80;\n    renderObj.controls.maxDistance = 500;\n\n    // scene\n    renderObj.scene = new THREE.Scene();\n\n    // light\n    renderObj.light = new THREE.DirectionalLight(0xffffff, 1);\n    renderObj.light.position.copy(renderObj.camera.position);\n    renderObj.scene.add(renderObj.light);\n  },\n};\nexport default dicomViewerUtils;\n"],"mappings":"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","ignoreList":[]}
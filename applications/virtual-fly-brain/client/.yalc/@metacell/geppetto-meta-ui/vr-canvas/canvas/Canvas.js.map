{"version":3,"file":"Canvas.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_Resources","_MeshFactory","_LaserControls","_Events","_particle","_util","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ownKeys","keys","getOwnPropertySymbols","o","filter","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","key","value","_toPropertyKey","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","_createClass","protoProps","staticProps","prototype","_toPrimitive","Symbol","toPrimitive","String","Number","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","self","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","_inherits","subClass","superClass","create","_setPrototypeOf","p","_createForOfIteratorHelper","allowArrayLike","it","iterator","Array","isArray","_unsupportedIterableToArray","F","s","done","_e","f","normalCompletion","didErr","err","step","next","_e2","minLen","_arrayLikeToArray","toString","slice","name","from","test","arr","len","arr2","HOVER_COLOR","g","b","SELECTED_COLOR","SHORTCUTS","BRING_CLOSER","getProxyInstance","color","getId","startsWith","instancePath","updateInstancesMap","geppettoInstance","instancesMap","hasVisualValue","getInstancePath","hasVisualType","getType","getMetaType","Resources","ARRAY_TYPE_NODE","getVisualType","INSTANCE_NODE","children","getChildren","ARRAY_INSTANCE_NODE","console","error","getInstancesMap","instances","Map","_iterator","_step","Canvas","_Component","_this","state","loadedTextures","time","isReady","canvasRef","React","createRef","sceneRef","handleLoadedTextures","handleHover","handleHoverLeave","handleClick","handleKeyboardPress","threeMeshes","selectedMeshes","hoveredMeshes","initTextures","callback","_this2","textureLoader","THREE","TextureLoader","load","particle","texture","particleTexture","componentDidMount","_this$props","id","threshold","scene","document","getElementById","concat","meshFactory","MeshFactory","object3D","current","addEventListener","setEntityMeshes","shouldComponentUpdate","nextProps","start","componentDidUpdate","_this3","_this$state","setParticleTexture","then","_","getMeshes","setState","_this4","canvasEntity","sceneMeshes","keysThreeMeshes","visible","element","Error","_iterator2","_step2","meshKey","entity","mesh","setObject3D","evt","includes","detail","getObject3D","undefined","material","setRGB","keyCode","COLLAPSE_MENU","isMenuVisible","toModel","cEvent","CustomEvent","_i3","_Object$keys","selected","el","dispatchEvent","modelID","model","preventDefault","meshCopy","defaultColor","render","_this5","_this$props2","sceneBackground","position","rotation","embedded","sceneID","cameraID","createElement","ref","background","shadow","light","alt","src","crossOrigin","mixin","slice9","text","cursor","width","height","scale","interactable","map","Component","defaultProps","colorMap","handleModelChange","propTypes","PropTypes","arrayOf","object","isRequired","string","number","func","_default","exports"],"sources":["../../../src/vr-canvas/canvas/Canvas.js"],"sourcesContent":["/* eslint-disable no-template-curly-in-string */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Resources from '@metacell/geppetto-meta-core/Resources';\nimport MeshFactory from '@metacell/geppetto-meta-ui/3d-canvas/threeDEngine/MeshFactory';\nimport 'aframe';\nimport 'aframe-slice9-component';\nimport LaserControls from '../LaserControls';\nimport '../aframe/interactable';\nimport '../aframe/thumbstick-controls';\nimport '../aframe/rig-wasd-controls';\nimport { BRING_CLOSER, } from '../Events';\nimport particle from \"@metacell/geppetto-meta-ui/3d-canvas/textures/particle.png\";\nimport { hasVisualType, hasVisualValue } from \"../../3d-canvas/threeDEngine/util\";\n\nconst HOVER_COLOR = { r: 0.67, g: 0.84, b: 0.9 };\nconst SELECTED_COLOR = { r: 1, g: 1, b: 0 };\nconst SHORTCUTS = { BRING_CLOSER: 99, };\n\nfunction getProxyInstance (i) {\n  const color = i.getId().startsWith('baskets') ? { r: 0, g:0, b: 1, a:1 } : { r: 1, g:0, b: 0, a:1 }\n  return { instancePath: i.getId(), color: color }\n}\n\nfunction updateInstancesMap (geppettoInstance, instancesMap) {\n  try {\n    if (hasVisualValue(geppettoInstance)) {\n      instancesMap.set(geppettoInstance.getInstancePath(), getProxyInstance(geppettoInstance));\n    } else if (hasVisualType(geppettoInstance)) {\n      if (\n        geppettoInstance.getType().getMetaType() !== Resources.ARRAY_TYPE_NODE\n          && geppettoInstance.getVisualType()\n      ) {\n        instancesMap.set(geppettoInstance.getInstancePath(), getProxyInstance(geppettoInstance));\n      }\n      if (geppettoInstance.getMetaType() === Resources.INSTANCE_NODE) {\n        const children = geppettoInstance.getChildren();\n        for (let i = 0; i < children.length; i++) {\n          updateInstancesMap(children[i], instancesMap);\n        }\n      } else if (\n        geppettoInstance.getMetaType() === Resources.ARRAY_INSTANCE_NODE\n      ) {\n        for (let i = 0; i < geppettoInstance.length; i++) {\n          updateInstancesMap(geppettoInstance[i], instancesMap);\n        }\n      }\n    }\n  } catch (e) {\n    console.error(e)\n  }\n}\n\nfunction getInstancesMap (instances) {\n  const instancesMap = new Map()\n  for (const instance of instances){\n    updateInstancesMap(instance, instancesMap)\n  }\n  return instancesMap\n}\n\nclass Canvas extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      loadedTextures: false,\n      time: 0,\n      isReady: false\n    };\n    this.canvasRef = React.createRef();\n    this.sceneRef = React.createRef();\n    this.handleLoadedTextures = this.handleLoadedTextures.bind(this);\n    this.handleHover = this.handleHover.bind(this);\n    this.handleHoverLeave = this.handleHoverLeave.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleKeyboardPress = this.handleKeyboardPress.bind(this);\n    this.threeMeshes = {};\n    this.selectedMeshes = {};\n    this.hoveredMeshes = {};\n    this.initTextures(this.handleLoadedTextures);\n  }\n\n  initTextures (callback) {\n    const textureLoader = new THREE.TextureLoader();\n    textureLoader.load(particle, texture => {\n      this.particleTexture = texture;\n      callback();\n    });\n  }\n\n  componentDidMount () {\n    const { id, threshold } = this.props;\n    const scene = document.getElementById(`${id}_scene`);\n    this.meshFactory = new MeshFactory(\n      scene.object3D,\n      threshold,\n      true,\n      300,\n      1,\n      null,\n      THREE    \n    );\n\n    this.sceneRef.current.addEventListener('mesh_hover', this.handleHover);\n    this.sceneRef.current.addEventListener(\n      'mesh_hover_leave',\n      this.handleHoverLeave\n    );\n    this.sceneRef.current.addEventListener('mesh_click', this.handleClick);\n    document.addEventListener('keypress', this.handleKeyboardPress);\n    \n    this.setEntityMeshes();\n  }\n\n  shouldComponentUpdate (nextProps) {\n    const { instances } = this.props;\n    if (instances !== nextProps.instances) {\n      this.meshFactory.start(getInstancesMap(nextProps.instances));\n    }\n    return true;\n  }\n\n  componentDidUpdate () {\n    const { instances } = this.props;\n    const { loadedTextures, isReady } = this.state;\n    if (!isReady) {\n      if (loadedTextures) {\n        this.meshFactory.setParticleTexture(this.particleTexture);\n        this.meshFactory.start(getInstancesMap(instances)).then(_ => {\n          this.threeMeshes = this.meshFactory.getMeshes();\n          this.setState({ isReady: true })\n        })\n      }\n    }\n    this.setEntityMeshes();\n\n  }\n\n  setEntityMeshes () {\n    const canvasEntity = this.canvasRef.current;\n    const sceneMeshes = [];\n    const keysThreeMeshes = Object.keys(this.threeMeshes).filter(\n      key => this.threeMeshes[key].visible\n    );\n    for (let i = 0; i < canvasEntity.children.length; i++) {\n      const element = canvasEntity.children[i];\n      if (element.id.startsWith('a-entity')) {\n        sceneMeshes.push(element);\n      }\n    }\n    if (sceneMeshes.length !== keysThreeMeshes.length) {\n      throw new Error(\n        'Meshes do not match. Possible illegal use of a-entity as id.'\n      );\n    }\n    let i = 0;\n    for (const meshKey of keysThreeMeshes) {\n      const entity = sceneMeshes[i];\n      const mesh = this.threeMeshes[meshKey];\n      entity.setObject3D('mesh', mesh);\n      i++;\n    }\n  }\n\n  handleLoadedTextures () {\n    this.setState({ loadedTextures: true });\n  }\n\n  handleHover (evt) {\n    const { handleHover } = this.props;\n    if (Object.keys(this.hoveredMeshes).includes(evt.detail.id)) {\n      return;\n    }\n    if (\n      evt.detail.getObject3D('mesh') !== undefined\n      && evt.detail.getObject3D('mesh').material\n    ) {\n      this.hoveredMeshes[evt.detail.id] = { ...evt.detail.getObject3D('mesh').material.color, };\n      evt.detail\n        .getObject3D('mesh')\n        .material.color.setRGB(HOVER_COLOR.r, HOVER_COLOR.g, HOVER_COLOR.b);\n      handleHover(evt, false);\n    }\n  }\n\n  handleHoverLeave (evt) {\n    const { handleHoverLeave } = this.props;\n    if (Object.keys(this.hoveredMeshes).includes(evt.detail.id)) {\n      const color = this.hoveredMeshes[evt.detail.id];\n      evt.detail\n        .getObject3D('mesh')\n        .material.color.setRGB(color.r, color.g, color.b);\n\n      delete this.hoveredMeshes[evt.detail.id];\n    }\n    handleHoverLeave(evt, false);\n  }\n\n  handleKeyboardPress (evt) {\n    // eslint-disable-next-line eqeqeq\n    if (evt.keyCode === SHORTCUTS.COLLAPSE_MENU) {\n      const { isMenuVisible } = this.state;\n      this.setState({ isMenuVisible: !isMenuVisible });\n    } else if (evt.keyCode === SHORTCUTS.BRING_CLOSER) {\n      let toModel = true;\n      const cEvent = new CustomEvent(BRING_CLOSER, { detail: null });\n      // TODO: Only works for 1 selected object atm\n      if (Object.keys(this.selectedMeshes).length === 1) {\n        for (const selected of Object.keys(this.selectedMeshes)) {\n          const el = document.getElementById(selected);\n          el.dispatchEvent(cEvent);\n          toModel = false;\n        }\n        if (toModel) {\n          const { id } = this.props;\n          const modelID = `${id}_model`;\n          const model = document.getElementById(modelID);\n          model.dispatchEvent(cEvent);\n        }\n      }\n    }\n  }\n\n  handleClick (evt) {\n    const { handleClick } = this.props;\n    const preventDefault = handleClick(evt);\n    if (!preventDefault && evt.detail.getObject3D('mesh') !== undefined) {\n      if (Object.keys(this.selectedMeshes).includes(evt.detail.id)) {\n        // eslint-disable-next-line no-param-reassign\n        evt.detail.selected = false;\n        const color = this.selectedMeshes[evt.detail.id];\n        if (\n          (color.r != undefined)\n          & (color.g != undefined)\n          & (color.b != undefined)\n        ) {\n          evt.detail\n            .getObject3D('mesh')\n            .material.color.setRGB(color.r, color.g, color.b);\n        } else {\n          evt.detail.getObject3D('mesh').material.color.set(color);\n        }\n        delete this.selectedMeshes[evt.detail.id];\n        this.hoveredMeshes = { ...evt.detail.getObject3D('mesh').material.color, };\n      } else {\n        // eslint-disable-next-line no-param-reassign\n        evt.detail.selected = true;\n        const meshCopy = evt.detail.getObject3D('mesh').material.defaultColor;\n        this.selectedMeshes[evt.detail.id] = meshCopy;\n\n        evt.detail\n          .getObject3D('mesh')\n          .material.color.setRGB(\n            SELECTED_COLOR.r,\n            SELECTED_COLOR.g,\n            SELECTED_COLOR.b\n          );\n\n        this.hoveredMeshes = { ...evt.detail.getObject3D('mesh').material.color, };\n      }\n    }\n  }\n\n  render () {\n    const {\n      sceneBackground,\n      id,\n      position,\n      rotation,\n      embedded,\n    } = this.props;\n\n    const sceneID = `${id}_scene`;\n    const cameraID = `${id}_camera`;\n    const modelID = `${id}_model`;\n\n    return (\n      <a-scene\n        id={sceneID}\n        ref={this.sceneRef}\n        background={sceneBackground}\n        loading-screen=\"dotsColor: orange; backgroundColor: black\"\n        class=\"scene\"\n        shadow=\"enabled: false; autoUpdate: false\"\n        light=\"defaultLightsEnabled: false\"\n        embedded={embedded}\n      >\n        <a-assets>\n          <img\n            id=\"sliceImg\"\n            alt=\"slice_image\"\n            src=\"https://cdn.glitch.com/0ddef241-2c1a-4bc2-8d47-58192c718908%2Fslice.png?1557308835598\"\n            crossOrigin=\"true\"\n          />\n\n          <a-mixin\n            id=\"buttonBackground\"\n            mixin=\"slice\"\n            slice9=\"width: 1.3; height: 0.3; color: #030303\"\n          />\n          <a-mixin\n            id=\"buttonText\"\n            mixin=\"font\"\n            text=\"align: center; width: 2.5; zOffset: 0.01; color: #333\"\n          />\n\n          <a-mixin\n            id=\"button\"\n            mixin=\"buttonBackground buttonText\"\n            class=\"collidable\"\n          />\n\n          <a-mixin\n            id=\"slice\"\n            slice9=\"color: #050505; transparent: true; opacity: 0.9; src: #sliceImg; left: 50; right: 52; top: 50; bottom: 52; padding: 0.15\"\n          />\n        </a-assets>\n\n        <a-entity\n          id={cameraID}\n          position=\"0 5 0\"\n          thumbstick-controls={`id: ${id}; acceleration:200`}\n          rig-wasd-controls=\"fly:true; acceleration:200\"\n        >\n          <a-camera cursor=\"rayOrigin: mouse\" wasd-controls=\"enabled:false\" />\n          <LaserControls id={id} />\n        </a-entity>\n\n        <a-plane\n          position=\"0 0 -4\"\n          rotation=\"-90 0 0\"\n          width=\"100\"\n          height=\"100\"\n          color=\"#7BC8A4\"\n        />\n        <a-entity\n          ref={this.canvasRef}\n          position={position}\n          rotation={rotation}\n          scale=\"0.1, 0.1 0.1\"\n          id={modelID}\n          interactable={`id: ${id}`}\n        >\n          {Object.keys(this.threeMeshes)\n            .filter(key => this.threeMeshes[key].visible)\n            .map(key => (\n              <a-entity\n                class=\"collidable\"\n                key={`a-entity${key}_${id}`}\n                id={`a-entity${key}_${id}`}\n                interactable={`id: ${id}`}\n              />\n            ))}\n        </a-entity>\n      </a-scene>\n    );\n  }\n}\n\nCanvas.defaultProps = {\n  threshold: 1000,\n  colorMap: {},\n  position: '-20 -20 -80',\n  rotation: '0 0 0',\n  sceneBackground: 'color: #ECECEC',\n  handleHover: () => false,\n  handleClick: () => false,\n  handleHoverLeave: () => {},\n  handleModelChange: () => {},\n};\n\nCanvas.propTypes = {\n  /**\n   * Instances\n   */\n  instances: PropTypes.arrayOf(PropTypes.object).isRequired,\n  /**\n   * Model used in canvas\n   */\n  model: PropTypes.object.isRequired,\n  /**\n   * Id of this canvas\n   */\n  id: PropTypes.string.isRequired,\n  /**\n   * Threshold\n   */\n  threshold: PropTypes.number,\n  /**\n   *  Color map\n   */\n  colorMap: PropTypes.object,\n  /**\n   * Three values to describe position along x, y, and z axis. Format example => \"-20 -20 -80\"\n   */\n  position: PropTypes.string,\n  /**\n   * Three values to describe rotation. Format example => \"0 0 0\"\n   */\n  rotation: PropTypes.string,\n  /**\n   * Color applied to the scene's background. Format example => \"color: #ECECEC\"\n   */\n  sceneBackground: PropTypes.string,\n  /**\n   * Function to callback on hover\n   */\n  handleHover: PropTypes.func,\n  /**\n   * Function to callback on click\n   */\n  handleClick: PropTypes.func,\n  /**\n   * Function to callback on hover leave\n   */\n  handleHoverLeave: PropTypes.func,\n  /**\n   * Function to callback when model changes\n   */\n  handleModelChange: PropTypes.func,\n};\n\nexport default Canvas;\n"],"mappings":"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","ignoreList":[]}
{"version":3,"file":"DragDrop.js","names":["_Rect","_interopRequireDefault","require","_DragDrop","obj","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","value","t","_toPrimitive","r","e","toPrimitive","call","String","Number","canUseDOM","window","document","createElement","DragDrop","_glass","style","zIndex","backgroundColor","outline","_onMouseMove","bind","_onMouseUp","_onKeyPress","_onDragCancel","_onDragEnter","_onDragLeave","resizeGlass","_lastClick","_clickX","_clickY","addGlass","fCancel","_glassShowing","_this$_document$defau","_document","_rootElement","body","defaultView","addEventListener","appendChild","tabIndex","focus","passive","_fDragCancel","_manualGlassManagement","glassRect","Rect","fromElement","positionElement","hideGlass","_defaultView","removeChild","removeEventListener","undefined","startDrag","event","fDragStart","fDragMove","fDragEnd","fDragCancel","fClick","fDblClick","currentDocument","rootElement","_lastEvent","type","startsWith","timeStamp","posEvent","_getLocationEvent","_dragging","console","warn","_startX","clientX","_startY","clientY","matchMedia","matches","cursor","getComputedStyle","_stopPropagation","_preventDefault","_fDragStart","_fDragMove","_fDragEnd","_fClick","_fDblClick","_active","_dragDepth","isDragging","isActive","toString","rtn","keyCode","touches","_getLocationEventEnd","changedTouches","stopPropagation","preventDefault","cancelable","Math","abs","clickTime","Date","getTime","_default","exports"],"sources":["../../../src/flex-layout/src/DragDrop.ts"],"sourcesContent":["import * as React from \"react\";\nimport Rect from \"./Rect\";\n\n/** @hidden @internal */\nconst canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n\nclass DragDrop {\n    static instance = new DragDrop();\n\n    /** @hidden @internal */\n    private _fDblClick: ((event: Event) => void) | undefined;\n    /** @hidden @internal */\n    private _fClick: ((event: Event) => void) | undefined;\n    /** @hidden @internal */\n    private _fDragEnd: ((event: Event) => void) | undefined;\n    /** @hidden @internal */\n    private _fDragMove: ((event: React.MouseEvent<Element>) => void) | undefined;\n    /** @hidden @internal */\n    private _fDragStart: ((pos: { clientX: number; clientY: number }) => boolean) | undefined;\n    /** @hidden @internal */\n    private _fDragCancel: ((wasDragging: boolean) => void) | undefined;\n\n    /** @hidden @internal */\n    private _glass: HTMLDivElement | undefined;\n    /** @hidden @internal */\n    private _manualGlassManagement: boolean = false;\n    /** @hidden @internal */\n    private _lastClick: number;\n    /** @hidden @internal */\n    private _clickX: number;\n    /** @hidden @internal */\n    private _clickY: number;\n    /** @hidden @internal */\n    private _startX: number = 0;\n    /** @hidden @internal */\n    private _startY: number = 0;\n    /** @hidden @internal */\n    private _dragDepth: number = 0;\n    /** @hidden @internal */\n    private _glassShowing: boolean = false;\n    /** @hidden @internal */\n    private _dragging: boolean = false;\n    /** @hidden @internal */\n    private _active: boolean = false; // drag and drop is in progress, can be used on ios to prevent body scrolling (see demo)\n    /** @hidden @internal */\n    private _document?: HTMLDocument;\n    /** @hidden @internal */\n    private _rootElement?: HTMLElement | undefined;\n    /** @hidden @internal */\n    private _lastEvent?: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element> | undefined;\n\n    /** @hidden @internal */\n    private constructor() {\n        if (canUseDOM) {\n            // check for serverside rendering\n            this._glass = document.createElement(\"div\");\n            this._glass.style.zIndex = \"998\";\n            this._glass.style.backgroundColor = \"transparent\";\n            this._glass.style.outline = \"none\";\n        }\n\n        this._onMouseMove = this._onMouseMove.bind(this);\n        this._onMouseUp = this._onMouseUp.bind(this);\n        this._onKeyPress = this._onKeyPress.bind(this);\n        this._onDragCancel = this._onDragCancel.bind(this);\n        this._onDragEnter = this._onDragEnter.bind(this);\n        this._onDragLeave = this._onDragLeave.bind(this);\n        this.resizeGlass = this.resizeGlass.bind(this);\n\n        this._lastClick = 0;\n        this._clickX = 0;\n        this._clickY = 0;\n    }\n\n    // if you add the glass pane then you should remove it\n    addGlass(fCancel: ((wasDragging: boolean) => void) | undefined) {\n        if (!this._glassShowing) {\n            if (!this._document) {\n                this._document = window.document;\n            }\n            if (!this._rootElement) {\n                this._rootElement = this._document.body;\n            }\n            this.resizeGlass();\n            this._document.defaultView?.addEventListener('resize', this.resizeGlass);\n            this._document.body.appendChild(this._glass!);\n            this._glass!.tabIndex = -1;\n            this._glass!.focus();\n            this._glass!.addEventListener(\"keydown\", this._onKeyPress);\n            this._glass!.addEventListener(\"dragenter\", this._onDragEnter, { passive: false });\n            this._glass!.addEventListener(\"dragover\", this._onMouseMove, { passive: false });\n            this._glass!.addEventListener(\"dragleave\", this._onDragLeave, { passive: false });\n            this._glassShowing = true;\n            this._fDragCancel = fCancel;\n            this._manualGlassManagement = false;\n        } else {\n            // second call to addGlass (via dragstart)\n            this._manualGlassManagement = true;\n        }\n    }\n\n    resizeGlass() {\n        const glassRect = Rect.fromElement(this._rootElement!);\n        glassRect.positionElement(this._glass!, \"fixed\");\n    }\n\n    hideGlass() {\n        if (this._glassShowing) {\n            this._document!.body.removeChild(this._glass!);\n            this._document!.defaultView?.removeEventListener('resize', this.resizeGlass);\n            this._glassShowing = false;\n            this._document = undefined;\n            this._rootElement = undefined;\n        }\n    }\n\n    startDrag(\n        event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element> | undefined,\n        fDragStart: ((pos: { clientX: number; clientY: number }) => boolean) | undefined,\n        fDragMove: ((event: React.MouseEvent<Element>) => void) | undefined,\n        fDragEnd: ((event: Event) => void) | undefined,\n        fDragCancel?: ((wasDragging: boolean) => void) | undefined,\n        fClick?: ((event: Event) => void) | undefined,\n        fDblClick?: ((event: Event) => void) | undefined,\n        currentDocument?: Document,\n        rootElement?: HTMLDivElement\n    ) {\n        // prevent 'duplicate' action (mouse event for same action as previous touch event (a fix for ios))\n        if (event && this._lastEvent && this._lastEvent.type.startsWith(\"touch\") && event.type.startsWith(\"mouse\") && event.timeStamp - this._lastEvent.timeStamp < 500) {\n            return;\n        }\n\n        this._lastEvent = event;\n\n        if (currentDocument) {\n            this._document = currentDocument;\n        } else {\n            this._document = window.document;\n        }\n        if (rootElement) {\n            this._rootElement = rootElement;\n        } else {\n            this._rootElement = this._document.body;\n        }\n\n        const posEvent = this._getLocationEvent(event);\n        this.addGlass(fDragCancel);\n\n        if (this._dragging) {\n            console.warn(\"this._dragging true on startDrag should never happen\");\n        }\n\n        if (event) {\n            this._startX = posEvent.clientX;\n            this._startY = posEvent.clientY;\n            if (!window.matchMedia || window.matchMedia(\"(pointer: fine)\").matches) {\n                this._glass!.style.cursor = getComputedStyle(event.target as Element).cursor;\n            }\n            this._stopPropagation(event);\n            this._preventDefault(event);\n        } else {\n            this._startX = 0;\n            this._startY = 0;\n            this._glass!.style.cursor = \"default\";\n        }\n\n        this._dragging = false;\n        this._fDragStart = fDragStart;\n        this._fDragMove = fDragMove;\n        this._fDragEnd = fDragEnd;\n        this._fDragCancel = fDragCancel;\n        this._fClick = fClick;\n        this._fDblClick = fDblClick;\n\n        this._active = true;\n\n        if (event?.type === 'dragenter') {\n            this._dragDepth = 1;\n            this._rootElement.addEventListener(\"dragenter\", this._onDragEnter, { passive: false });\n            this._rootElement.addEventListener(\"dragover\", this._onMouseMove, { passive: false });\n            this._rootElement.addEventListener(\"dragleave\", this._onDragLeave, { passive: false });\n            this._document.addEventListener(\"dragend\", this._onDragCancel, { passive: false });\n            this._document.addEventListener(\"drop\", this._onMouseUp, { passive: false });\n        } else {\n            this._document.addEventListener(\"mouseup\", this._onMouseUp, { passive: false });\n            this._document.addEventListener(\"mousemove\", this._onMouseMove, { passive: false });\n            this._document.addEventListener(\"touchend\", this._onMouseUp, { passive: false });\n            this._document.addEventListener(\"touchmove\", this._onMouseMove, { passive: false });\n        }\n    }\n\n    isDragging() {\n        return this._dragging;\n    }\n\n    isActive() {\n        return this._active;\n    }\n\n    toString() {\n        const rtn = \"(DragDrop: \" + \"startX=\" + this._startX + \", startY=\" + this._startY + \", dragging=\" + this._dragging + \")\";\n\n        return rtn;\n    }\n\n    /** @hidden @internal */\n    private _onKeyPress(event: KeyboardEvent) {\n        if (event.keyCode === 27) {\n            // esc\n            this._onDragCancel();\n        }\n    }\n\n    /** @hidden @internal */\n    private _onDragCancel() {\n        this._rootElement!.removeEventListener(\"dragenter\", this._onDragEnter);\n        this._rootElement!.removeEventListener(\"dragover\", this._onMouseMove);\n        this._rootElement!.removeEventListener(\"dragleave\", this._onDragLeave);\n        this._document!.removeEventListener(\"dragend\", this._onDragCancel);\n        this._document!.removeEventListener(\"drop\", this._onMouseUp);\n        this._document!.removeEventListener(\"mousemove\", this._onMouseMove);\n        this._document!.removeEventListener(\"mouseup\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchend\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchmove\", this._onMouseMove);\n        this.hideGlass();\n        if (this._fDragCancel !== undefined) {\n            this._fDragCancel(this._dragging);\n        }\n        this._dragging = false;\n        this._active = false;\n    }\n\n    /** @hidden @internal */\n    private _getLocationEvent(event: any) {\n        let posEvent: any = event;\n        if (event && event.touches) {\n            posEvent = event.touches[0];\n        }\n        return posEvent;\n    }\n\n    /** @hidden @internal */\n    private _getLocationEventEnd(event: any) {\n        let posEvent: any = event;\n        if (event.changedTouches) {\n            posEvent = event.changedTouches[0];\n        }\n        return posEvent;\n    }\n\n    /** @hidden @internal */\n    private _stopPropagation(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n    }\n\n    /** @hidden @internal */\n    private _preventDefault(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        if (event.preventDefault && event.cancelable) {\n            event.preventDefault();\n        }\n        return event;\n    }\n\n    /** @hidden @internal */\n    private _onMouseMove(event: Event | React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent<HTMLDivElement> | React.DragEvent<Element>) {\n        this._lastEvent = event;\n\n        const posEvent = this._getLocationEvent(event);\n        this._stopPropagation(event);\n        this._preventDefault(event);\n\n        if (!this._dragging && (Math.abs(this._startX - posEvent.clientX) > 5 || Math.abs(this._startY - posEvent.clientY) > 5)) {\n            this._dragging = true;\n            if (this._fDragStart) {\n                this._glass!.style.cursor = \"move\";\n                this._dragging = this._fDragStart({ clientX: this._startX, clientY: this._startY });\n            }\n        }\n\n        if (this._dragging) {\n            if (this._fDragMove) {\n                this._fDragMove(posEvent);\n            }\n        }\n        return false;\n    }\n\n    /** @hidden @internal */\n    private _onMouseUp(event: Event) {\n        this._lastEvent = event;\n\n        const posEvent = this._getLocationEventEnd(event);\n\n        this._stopPropagation(event);\n        this._preventDefault(event);\n\n        this._active = false;\n\n        this._rootElement!.removeEventListener(\"dragenter\", this._onDragEnter);\n        this._rootElement!.removeEventListener(\"dragover\", this._onMouseMove);\n        this._rootElement!.removeEventListener(\"dragleave\", this._onDragLeave);\n        this._document!.removeEventListener(\"dragend\", this._onDragCancel);\n        this._document!.removeEventListener(\"drop\", this._onMouseUp);\n        this._document!.removeEventListener(\"mousemove\", this._onMouseMove);\n        this._document!.removeEventListener(\"mouseup\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchend\", this._onMouseUp);\n        this._document!.removeEventListener(\"touchmove\", this._onMouseMove);\n\n        if (!this._manualGlassManagement) {\n            this.hideGlass();\n        }\n\n        if (this._dragging) {\n            this._dragging = false;\n            if (this._fDragEnd) {\n                this._fDragEnd(event);\n            }\n            // dump(\"set dragging = false\\n\");\n        } else {\n            if (this._fDragCancel) {\n                this._fDragCancel(this._dragging);\n            }\n            if (Math.abs(this._startX - posEvent.clientX) <= 5 && Math.abs(this._startY - posEvent.clientY) <= 5) {\n                const clickTime = new Date().getTime();\n                // check for double click\n                if (Math.abs(this._clickX - posEvent.clientX) <= 5 && Math.abs(this._clickY - posEvent.clientY) <= 5) {\n                    if (clickTime - this._lastClick < 500) {\n                        if (this._fDblClick) {\n                            this._fDblClick(event);\n                        }\n                    }\n                }\n\n                if (this._fClick) {\n                    this._fClick(event);\n                }\n                this._lastClick = clickTime;\n                this._clickX = posEvent.clientX;\n                this._clickY = posEvent.clientY;\n            }\n        }\n        return false;\n    }\n\n    /** @hidden @internal */\n    private _onDragEnter(event: DragEvent) {\n        this._preventDefault(event);\n        this._stopPropagation(event);\n        this._dragDepth++;\n        return false;\n    }\n\n    /** @hidden @internal */\n    private _onDragLeave(event: DragEvent) {\n        this._preventDefault(event);\n        this._stopPropagation(event);\n        this._dragDepth--;\n        if (this._dragDepth <= 0) {\n            this._onDragCancel();\n        }\n        return false;\n    }\n}\n\nexport default DragDrop;\n"],"mappings":"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","ignoreList":[]}
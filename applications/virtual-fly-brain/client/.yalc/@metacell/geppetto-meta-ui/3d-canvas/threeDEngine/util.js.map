{"version":3,"file":"util.js","names":["hasVisualType","instance","getVisualType","undefined","getChildren","some","i","hasVisualValue","e","hexToRGBNormalized","hex","rgb","replace","m","r","g","b","substring","match","map","x","parseInt","a","componentToHex","c","toString","length","rgbToHex","sortInstances","proxyInstances","sortedInstances","sort","instancePath","hasDifferentProxyInstances","data","prevData","JSON","stringify","hasDifferentThreeDObjects","threeDObjects","prevThreeDObjects","threeDObjectsUUIDs","Set","obj","uuid","prevThreeDObjectsUUIDs","eqSet","as","bs","size","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","has","err","f"],"sources":["../../../src/3d-canvas/threeDEngine/util.js"],"sourcesContent":["export function hasVisualType (instance){\n  return instance.getVisualType() !== undefined || instance.getChildren().some(i => hasVisualType(i))\n}\n\nexport function hasVisualValue (instance) {\n  try {\n    return instance.hasVisualValue()\n  } catch (e) {\n    return false\n  }\n}\n\nexport function hexToRGBNormalized (hex){\n  const rgb = hex.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\n    ,(m, r, g, b) => '#' + r + r + g + g + b + b)\n    .substring(1).match(/.{2}/g)\n    .map(x => parseInt(x, 16) / 255)\n  return { r: rgb[0], g: rgb[1], b: rgb[2], a: 1 }\n}\n\nfunction componentToHex (c) {\n  var hex = c.toString(16);\n  return hex.length == 1 ? '0' + hex : hex;\n}\n\nexport function rgbToHex (r, g, b) {\n  return '0X' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nexport function sortInstances (proxyInstances) {\n  let sortedInstances = [];\n  sortedInstances = proxyInstances.sort((a, b) => {\n    if (a.instancePath < b.instancePath) {\n      return -1;\n    }\n    if (a.instancePath > b.instancePath) {\n      return 1;\n    }\n    return 0;\n  });\n  return sortedInstances;\n}\n\nexport function hasDifferentProxyInstances (data, prevData){\n  data = sortInstances(data)\n  prevData = sortInstances(prevData)\n  // FIXME: attribute order matters in the check below but it probably shouldn't:\n  return JSON.stringify(data) !== JSON.stringify(prevData)\n}\n\nexport function hasDifferentThreeDObjects (threeDObjects, prevThreeDObjects){\n  const threeDObjectsUUIDs = new Set(threeDObjects.map(obj => obj.uuid))\n  const prevThreeDObjectsUUIDs = new Set(prevThreeDObjects.map(obj => obj.uuid))\n  return !eqSet(threeDObjectsUUIDs, prevThreeDObjectsUUIDs)\n}\n\n\nfunction eqSet (as, bs) {\n  if (as.size !== bs.size) {\n    return false;\n  }\n  for (const a of as) {\n    if (!bs.has(a)) {\n      return false;\n    }\n  }\n  return true;\n}"],"mappings":"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","ignoreList":[]}
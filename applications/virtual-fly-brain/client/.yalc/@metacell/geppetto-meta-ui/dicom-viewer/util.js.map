{"version":3,"file":"util.js","names":["_jszip","_interopRequireDefault","require","_fileSaver","obj","__esModule","createZipFromRemoteFiles","files","zipName","Array","urlToPromise","url","Promise","resolve","reject","oReq","XMLHttpRequest","open","responseType","onload","oEvent","arrayBuffer","response","Uint8Array","send","zip","JSZip","$","each","i","filePath","file","split","pop","binary","generateAsync","type","then","blob","FileSaver","saveAs"],"sources":["../../src/dicom-viewer/util.js"],"sourcesContent":["\nimport JSZip from \"jszip\";\nimport FileSaver from \"file-saver\";\n\n\nexport function createZipFromRemoteFiles(files, zipName) {\n    if (!(files instanceof Array)){\n      files = [files];\n    }\n\n    // Convert url to promise, returning uint8 array\n    function urlToPromise (url) {\n      return new Promise(function (resolve, reject) {\n        var oReq = new XMLHttpRequest();\n        oReq.open(\"GET\", url, true);\n        oReq.responseType = \"arraybuffer\";\n\n        oReq.onload = function (oEvent) {\n          var arrayBuffer = oReq.response;\n          resolve(new Uint8Array(arrayBuffer));\n        };\n\n        oReq.send();\n      });\n    }\n\n    // Add an entry to zip per file\n    var zip = new JSZip();\n    $.each(files, function (i, filePath) {\n      zip.file(filePath.split('/').pop(), urlToPromise(filePath), { binary: true });\n    });\n\n    // Send File\n    zip.generateAsync({ type: \"blob\" })\n      .then(function (blob) {\n        FileSaver.saveAs(blob, zipName);\n      });\n  }"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAmC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAG5B,SAASE,wBAAwBA,CAACC,KAAK,EAAEC,OAAO,EAAE;EACrD,IAAI,EAAED,KAAK,YAAYE,KAAK,CAAC,EAAC;IAC5BF,KAAK,GAAG,CAACA,KAAK,CAAC;EACjB;;EAEA;EACA,SAASG,YAAYA,CAAEC,GAAG,EAAE;IAC1B,OAAO,IAAIC,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;MAC5C,IAAIC,IAAI,GAAG,IAAIC,cAAc,CAAC,CAAC;MAC/BD,IAAI,CAACE,IAAI,CAAC,KAAK,EAAEN,GAAG,EAAE,IAAI,CAAC;MAC3BI,IAAI,CAACG,YAAY,GAAG,aAAa;MAEjCH,IAAI,CAACI,MAAM,GAAG,UAAUC,MAAM,EAAE;QAC9B,IAAIC,WAAW,GAAGN,IAAI,CAACO,QAAQ;QAC/BT,OAAO,CAAC,IAAIU,UAAU,CAACF,WAAW,CAAC,CAAC;MACtC,CAAC;MAEDN,IAAI,CAACS,IAAI,CAAC,CAAC;IACb,CAAC,CAAC;EACJ;;EAEA;EACA,IAAIC,GAAG,GAAG,IAAIC,iBAAK,CAAC,CAAC;EACrBC,CAAC,CAACC,IAAI,CAACrB,KAAK,EAAE,UAAUsB,CAAC,EAAEC,QAAQ,EAAE;IACnCL,GAAG,CAACM,IAAI,CAACD,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,EAAEvB,YAAY,CAACoB,QAAQ,CAAC,EAAE;MAAEI,MAAM,EAAE;IAAK,CAAC,CAAC;EAC/E,CAAC,CAAC;;EAEF;EACAT,GAAG,CAACU,aAAa,CAAC;IAAEC,IAAI,EAAE;EAAO,CAAC,CAAC,CAChCC,IAAI,CAAC,UAAUC,IAAI,EAAE;IACpBC,qBAAS,CAACC,MAAM,CAACF,IAAI,EAAE9B,OAAO,CAAC;EACjC,CAAC,CAAC;AACN","ignoreList":[]}
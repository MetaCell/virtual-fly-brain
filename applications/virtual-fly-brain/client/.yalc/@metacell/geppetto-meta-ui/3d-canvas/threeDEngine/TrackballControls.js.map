{"version":3,"file":"TrackballControls.js","names":["_three","require","_readOnlyError","name","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","Constructor","protoProps","staticProps","prototype","t","_toPrimitive","_typeof","r","e","Symbol","toPrimitive","call","String","Number","_classCallCheck","instance","_callSuper","o","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","self","_assertThisInitialized","ReferenceError","Boolean","valueOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","_changeEvent","type","_startEvent","_endEvent","defaultRotationalSpeed","TrackballControls","exports","_EventDispatcher","object","domElement","handler","config","_this","undefined","console","warn","document","error","scope","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","style","touchAction","enabled","screen","left","top","width","height","rotationSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","logDecimalPlaces","cameraByConsoleLock","cameraChanged","rotationRadius","mouseButtons","LEFT","MOUSE","MIDDLE","DOLLY","RIGHT","Vector3","EPS","lastPosition","lastZoom","_state","_prevState","_keyState","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","_lastAxis","_zoomStart","Vector2","_zoomEnd","_panStart","_pointers","_pointerPositions","_panEnd","_moveCurr","target0","clone","position0","position","up0","up","zoom0","zoom","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","unsetCameraByConsoleLock","setCameraByConsole","toArray","u","rotation","l","x","y","z","rx","ry","rz","radius","eyeLength","allSteady","lastUp","nu","np","threshold","steady","Math","abs","setRotationalSpeed","s","setZoomSpeed","setPanSpeed","resetRotationalSpeed","rotateCamera","axis","quaternion","Quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","copy","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","sqrt","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","dispatchEvent","setPosition","setRotation","base","applyEuler","Euler","reset","incrementRotationEnd","valX","valY","valZ","nanToZero","isNaN","incrementPanEnd","incrementZoomEnd","val","onPointerDown","event","setPointerCapture","pointerId","addEventListener","onPointerMove","onPointerUp","addPointer","pointerType","onTouchStart","onMouseDown","onTouchMove","onMouseMove","onTouchEnd","onMouseUp","removePointer","releasePointerCapture","removeEventListener","onPointerCancel","keydown","code","keyup","button","state","onMouseWheel","preventDefault","deltaMode","deltaY","trackPointer","dx","dy","getSecondPointerPosition","contextmenu","push","splice","pointer","updateOnResize","dispose","passive","EventDispatcher"],"sources":["../../../src/3d-canvas/threeDEngine/TrackballControls.js"],"sourcesContent":["import {\n  EventDispatcher,\n  MOUSE,\n  Quaternion,\n  Vector2,\n  Vector3,\n  Euler\n} from 'three';\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst defaultRotationalSpeed = 1.0 ;\n\nclass TrackballControls extends EventDispatcher {\n\n  // @metacell change\n  constructor (object, domElement, handler, config) {\n    // end of @metacell changes\n\n    super();\n\n    if (domElement === undefined) {\n      console.warn('TrackballControls: The second parameter \"domElement\" is now mandatory.');\n    }\n    if (domElement === document) {\n      console.error('TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n    }\n\n    const scope = this;\n    const STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n    this.object = object;\n    this.domElement = domElement;\n    this.domElement.style.touchAction = 'none'; // disable touch scroll\n\n    // API\n\n    this.enabled = true;\n\n    this.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n    // @metacell change\n    let { rotationSpeed, zoomSpeed, panSpeed } = config\n    this.rotationSpeed = rotationSpeed ? rotationSpeed : 0.5;\n    this.zoomSpeed = zoomSpeed ? zoomSpeed : 1.2;\n    this.panSpeed = panSpeed ? panSpeed : 0.3;\n    // end of @metacell changes\n\n    this.noRotate = false;\n    this.noZoom = false;\n    this.noPan = false;\n\n    this.staticMoving = true;\n    this.dynamicDampingFactor = 0.2;\n\n    this.minDistance = 0;\n    this.maxDistance = Infinity;\n\n    this.keys = ['KeyA' /* A*/, 'KeyS' /* S*/, 'KeyD' /* D*/];\n\n    // @metacell changes\n    this.logDecimalPlaces = 3;\n    this.cameraByConsoleLock = true;\n    this.cameraChanged = false;\n    this.handler = handler;\n    this.rotationRadius = null;\n    // end of @metacell changes\n\n    this.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n    // internals\n\n    this.target = new Vector3();\n\n    const EPS = 0.0001;\n\n    const lastPosition = new Vector3();\n    let lastZoom = 1;\n\n    let _state = STATE.NONE,\n      // @metacell changes\n      _prevState = STATE.NONE,\n      // end of @metacell changes\n      _keyState = STATE.NONE,\n\n      _touchZoomDistanceStart = 0,\n      _touchZoomDistanceEnd = 0,\n\n      _lastAngle = 0;\n\n    const _eye = new Vector3(),\n      // @metacell changes\n      _movePrev = new Vector3(),\n      // end of @metacell changes\n      _lastAxis = new Vector3(),\n\n      _zoomStart = new Vector2(),\n      _zoomEnd = new Vector2(),\n\n      _panStart = new Vector2(),\n\n      _pointers = [],\n      _pointerPositions = {};\n\n    let _panEnd = new Vector2(),\n      // @metacell changes\n      _moveCurr = new Vector3()\n      // end of @metacell changes\n\n    // for reset\n\n    this.target0 = this.target.clone();\n    this.position0 = this.object.position.clone();\n    this.up0 = this.object.up.clone();\n    this.zoom0 = this.object.zoom;\n\n    // methods\n\n    this.handleResize = function () {\n\n      const box = scope.domElement.getBoundingClientRect();\n      // adjustments come from similar code in the jquery offset() function\n      const d = scope.domElement.ownerDocument.documentElement;\n      scope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      scope.screen.top = box.top + window.pageYOffset - d.clientTop;\n      scope.screen.width = box.width;\n      scope.screen.height = box.height;\n\n    };\n\n    const getMouseOnScreen = (function () {\n\n      const vector = new Vector2();\n\n      return function getMouseOnScreen (pageX, pageY) {\n\n        vector.set(\n          (pageX - scope.screen.left) / scope.screen.width,\n          (pageY - scope.screen.top) / scope.screen.height\n        );\n\n        return vector;\n\n      };\n\n    }());\n\n    const getMouseOnCircle = (function () {\n\n      const vector = new Vector2();\n\n      return function getMouseOnCircle (pageX, pageY) {\n\n        vector.set(\n          ((pageX - scope.screen.width * 0.5 - scope.screen.left) / (scope.screen.width * 0.5)),\n          ((scope.screen.height + 2 * (scope.screen.top - pageY)) / scope.screen.width) // screen.width intentional\n        );\n\n        return vector;\n\n      };\n\n    }());\n\n    // @metacell changes\n\n    this.unsetCameraByConsoleLock = function () {\n      scope.cameraByConsoleLock = false;\n    };\n\n\n    this.setCameraByConsole = function () {\n\n      var p = scope.object.position.toArray();\n      var u = scope.object.rotation.toArray();\n      var l = _eye.length();\n\n      this.handler({\n        position: { x: p[0], y: p[1], z: p[2] },\n        rotation: { rx: u[0], ry: u[1], rz: u[2], radius: this.rotationRadius },\n        eyeLength: l,\n      });\n\n      scope.cameraByConsoleLock = true;\n      scope.cameraChanged = false;\n    };\n\n    this.allSteady = function () {\n      var u = scope.lastUp;\n      var p = scope.lastPosition;\n      var nu = scope.object.up.toArray();\n      var np = scope.object.position.toArray();\n\n      var threshold = 1 / (10 * scope.logDecimalPlaces);\n\n      var steady\n        = Math.abs(u[0] + u[1] + u[2] - (nu[0] + nu[1] + nu[2])) < threshold\n        && Math.abs(p[0] + p[1] + p[2] - (np[0] + np[1] + np[2])) < threshold;\n\n      /*\n       * Console logging is unlocked, this means\n       * we had an input event\n       */\n      if (!scope.cameraByConsoleLock) {\n        /*\n         * If the camera moved, set cameraChanged\n         * if not, keep it\n         */\n        if (!steady) {\n          scope.cameraChanged = true;\n        }\n      }\n\n      return steady;\n    };\n\n    // end of metacell changes\n\n    this.setRotationalSpeed = function (s) {\n      if (s){\n        scope.rotationSpeed = s ;\n      }\n    };\n    this.setZoomSpeed = function (s) {\n      if (s){\n        scope.zoomSpeed = s ;\n      }\n    };\n    this.setPanSpeed = function (s) {\n      if (s){\n        scope.panSpeed = s ;\n      }\n    };\n\n    this.resetRotationalSpeed = function () {\n      scope.rotationSpeed = defaultRotationalSpeed ;\n    };\n\n    this.rotateCamera = (function () {\n      // @metacell changes\n      let axis = new Vector3(),\n      // end of @metacell changes\n        quaternion = new Quaternion(),\n        eyeDirection = new Vector3(),\n        objectUpDirection = new Vector3(),\n        objectSidewaysDirection = new Vector3(),\n        moveDirection = new Vector3();\n\n      return function rotateCamera () {\n\n        // @metacell changes\n        if (_moveCurr.z != undefined && _moveCurr.z != 0){\n          moveDirection.set( 0, 0, _moveCurr.z - _movePrev.z);\n        } else {\n          moveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n        }\n        // end of @metacell changes\n        let angle = moveDirection.length();\n\n        if (angle) {\n\n          _eye.copy(scope.object.position).sub(scope.target);\n\n          eyeDirection.copy(_eye).normalize();\n          objectUpDirection.copy(scope.object.up).normalize();\n          objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n\n          objectUpDirection.setLength(_moveCurr.y - _movePrev.y);\n          objectSidewaysDirection.setLength(_moveCurr.x - _movePrev.x);\n\n          moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n\n          // @metacell changes\n          if (_moveCurr.z != undefined && _moveCurr.z != 0){\n            if (_moveCurr.z - _movePrev.z >= 0){\n              axis = new Vector3(0,0,1);\n            } else {\n              axis = new Vector3(0,0,-1);\n            }\n          } else {\n            axis.crossVectors( moveDirection, _eye ).normalize();\n          }\n          // end of @metacell changes\n\n          angle *= scope.rotationSpeed;\n          quaternion.setFromAxisAngle(axis, angle);\n\n          _eye.applyQuaternion(quaternion);\n          scope.object.up.applyQuaternion(quaternion);\n\n          _lastAxis.copy(axis);\n          _lastAngle = angle;\n\n        } else if (!scope.staticMoving && _lastAngle) {\n\n          _lastAngle *= Math.sqrt(1.0 - scope.dynamicDampingFactor);\n          _eye.copy(scope.object.position).sub(scope.target);\n          quaternion.setFromAxisAngle(_lastAxis, _lastAngle);\n          _eye.applyQuaternion(quaternion);\n          scope.object.up.applyQuaternion(quaternion);\n\n        }\n\n        _movePrev.copy(_moveCurr);\n\n      };\n\n    }());\n\n\n    this.zoomCamera = function () {\n\n      let factor;\n\n      if (_state === STATE.TOUCH_ZOOM_PAN) {\n\n        factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n        _touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n        if (scope.object.isPerspectiveCamera) {\n\n          _eye.multiplyScalar(factor);\n\n        } else if (scope.object.isOrthographicCamera) {\n\n          scope.object.zoom *= factor;\n          scope.object.updateProjectionMatrix();\n\n        } else {\n\n          console.warn('TrackballControls: Unsupported camera type');\n\n        }\n\n      } else {\n        factor = 1.0 + (_zoomEnd.y - _zoomStart.y) * scope.zoomSpeed;\n\n        if (factor !== 1.0 && factor > 0.0) {\n\n          if (scope.object.isPerspectiveCamera) {\n\n            _eye.multiplyScalar(factor);\n\n          } else if (scope.object.isOrthographicCamera) {\n\n            scope.object.zoom /= factor;\n            scope.object.updateProjectionMatrix();\n\n          } else {\n\n            console.warn('TrackballControls: Unsupported camera type');\n\n          }\n\n        }\n\n        if (scope.staticMoving) {\n\n          _zoomStart.copy(_zoomEnd);\n\n        } else {\n\n          _zoomStart.y += (_zoomEnd.y - _zoomStart.y) * this.dynamicDampingFactor;\n\n        }\n\n      }\n\n    };\n\n    this.panCamera = (function () {\n\n      const mouseChange = new Vector2(),\n        objectUp = new Vector3(),\n        pan = new Vector3();\n\n      return function panCamera () {\n\n        mouseChange.copy(_panEnd).sub(_panStart);\n\n        if (mouseChange.lengthSq()) {\n\n          if (scope.object.isOrthographicCamera) {\n\n            const scale_x = (scope.object.right - scope.object.left) / scope.object.zoom / scope.domElement.clientWidth;\n            const scale_y = (scope.object.top - scope.object.bottom) / scope.object.zoom / scope.domElement.clientWidth;\n\n            mouseChange.x *= scale_x;\n            mouseChange.y *= scale_y;\n\n          }\n\n          mouseChange.multiplyScalar(_eye.length() * scope.panSpeed);\n\n          pan.copy(_eye).cross(scope.object.up).setLength(mouseChange.x);\n          pan.add(objectUp.copy(scope.object.up).setLength(mouseChange.y));\n\n          scope.object.position.add(pan);\n          scope.target.add(pan);\n\n          if (scope.staticMoving) {\n\n            _panStart.copy(_panEnd);\n\n          } else {\n\n            _panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(scope.dynamicDampingFactor));\n\n          }\n\n        }\n\n      };\n\n    }());\n\n    this.checkDistances = function () {\n\n      if (!scope.noZoom || !scope.noPan) {\n\n        if (_eye.lengthSq() > scope.maxDistance * scope.maxDistance) {\n\n          scope.object.position.addVectors(scope.target, _eye.setLength(scope.maxDistance));\n          _zoomStart.copy(_zoomEnd);\n\n        }\n\n        if (_eye.lengthSq() < scope.minDistance * scope.minDistance) {\n\n          scope.object.position.addVectors(scope.target, _eye.setLength(scope.minDistance));\n          _zoomStart.copy(_zoomEnd);\n\n        }\n\n      }\n\n    };\n\n    this.update = function () {\n\n      // @metacell changes\n      scope.lastUp = scope.object.up.toArray();\n      scope.lastPosition = scope.object.position.toArray();\n      // end of @metacell changes\n\n\n      _eye.subVectors(scope.object.position, scope.target);\n\n      if (!scope.noRotate) {\n\n        scope.rotateCamera();\n\n      }\n\n      if (!scope.noZoom) {\n\n        scope.zoomCamera();\n\n      }\n\n      if (!scope.noPan) {\n\n        scope.panCamera();\n\n      }\n\n      scope.object.position.addVectors(scope.target, _eye);\n\n      if (scope.object.isPerspectiveCamera) {\n\n        scope.checkDistances();\n\n        scope.object.lookAt(scope.target);\n\n        // @metacell changes\n        if (lastPosition.distanceToSquared(scope.object.position) > EPS\n          || scope.lastUp.z !== scope.object.up.z) {\n        // end of @metacell changes\n\n          lastPosition.copy(scope.object.position);\n          scope.dispatchEvent(_changeEvent);\n        }\n\n      } else if (scope.object.isOrthographicCamera) {\n\n        scope.object.lookAt(scope.target);\n\n        if (lastPosition.distanceToSquared(scope.object.position) > EPS || lastZoom !== scope.object.zoom) {\n\n          scope.dispatchEvent(_changeEvent);\n\n          lastPosition.copy(scope.object.position);\n          lastZoom = scope.object.zoom;\n\n        }\n\n      } else {\n\n        console.warn('TrackballControls: Unsupported camera type');\n\n      }\n      // Has the camera stopped moving? (&& has the camera started moving)\n      if (scope.allSteady() && scope.cameraChanged) {\n        // Log the camera's position\n        scope.setCameraByConsole();\n      }\n\n    };\n\n\n    // @metacell changes\n    this.setPosition = function (x, y, z) {\n      scope.object.position.set(x, y, z);\n\n      var u = scope.object.rotation.toArray();\n      var l = _eye.length();\n\n      scope.setRotation(u[0], u[1], u[2], l);\n    };\n\n    this.setRotation = function (x, y, z, radius) {\n      _state = STATE.NONE;\n      _prevState = STATE.NONE;\n\n      this.rotationRadius = radius;\n      var base = new Vector3(0, 0, -1);\n      base.applyEuler(new Euler(x, y, z));\n      base.multiplyScalar(radius);\n\n      scope.target.addVectors(scope.object.position, base);\n      scope.object.up.copy(scope.up0);\n      scope.object.up.applyEuler(new Euler(x, y, z));\n\n      _eye.subVectors(scope.object.position, scope.target);\n\n      scope.object.lookAt(scope.target);\n\n      scope.dispatchEvent(_changeEvent);\n      scope.update();\n    };\n    // end of @metacell changes\n\n    this.reset = function () {\n\n      _state = STATE.NONE;\n      _keyState = STATE.NONE;\n\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.up.copy(scope.up0);\n      scope.object.zoom = scope.zoom0;\n\n      scope.object.updateProjectionMatrix();\n\n      _eye.subVectors(scope.object.position, scope.target);\n\n      scope.object.lookAt(scope.target);\n\n      scope.dispatchEvent(_changeEvent);\n\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n      lastPosition.copy(scope.object.position);\n      lastZoom = scope.object.zoom;\n\n      // @metacell changes\n      scope.cameraChanged = true;\n      scope.unsetCameraByConsoleLock();\n      // end of @metacell changes\n\n\n    };\n\n    // @metacell changes\n\n    this.incrementRotationEnd = function (valX, valY, valZ) {\n      if (valZ == 0) {\n        if (_movePrev.x === 0 && _movePrev.y === 0) {\n          // _movePrev = new Vector3(0.1, 0.1, 0.1);\n          _movePrev = new Vector2(0.1, 0.1);\n        }\n      }\n      const z = !_movePrev.z ? 0 : _movePrev.z;\n      _moveCurr = new Vector3(\n        _movePrev.x + valX,\n        _movePrev.y + valY,\n        z + valZ\n      );\n      nanToZero(_moveCurr);\n\n      _prevState = _state;\n      _state = STATE.ROTATE;\n      scope.noRotate = false;\n\n      scope.unsetCameraByConsoleLock();\n      scope.update();\n    };\n\n    function nanToZero (vector) {\n      if (isNaN(vector.x)) {\n        vector.x = 0;\n      }\n      if (isNaN(vector.y)) {\n        vector.y = 0;\n      }\n      if (isNaN(vector.z)) {\n        vector.z = 0;\n      }\n    }\n\n    this.incrementPanEnd = function (valX, valY) {\n      _panEnd = new Vector2(_panStart.x + valX, _panStart.y + valY);\n      _prevState = _state;\n      _state = STATE.PAN;\n      scope.noPan = false;\n\n      scope.unsetCameraByConsoleLock();\n      scope.update();\n    };\n\n    this.incrementZoomEnd = function (val) {\n      _zoomEnd.y = _zoomStart.y + val;\n      _prevState = _state;\n      _state = STATE.ZOOM;\n      scope.noZoom = false;\n\n      scope.unsetCameraByConsoleLock();\n      scope.update();\n    };\n\n    // end of @metacell changes\n\n    // listeners\n\n    function onPointerDown (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      if (_pointers.length === 0) {\n\n        scope.domElement.setPointerCapture(event.pointerId);\n\n        scope.domElement.addEventListener('pointermove', onPointerMove);\n        scope.domElement.addEventListener('pointerup', onPointerUp);\n\n      }\n\n      //\n\n      addPointer(event);\n\n      if (event.pointerType === 'touch') {\n\n        onTouchStart(event);\n\n      } else {\n\n        onMouseDown(event);\n\n      }\n\n    }\n\n    function onPointerMove (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      if (event.pointerType === 'touch') {\n\n        onTouchMove(event);\n\n      } else {\n\n        onMouseMove(event);\n\n      }\n\n    }\n\n    function onPointerUp (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      if (event.pointerType === 'touch') {\n\n        onTouchEnd(event);\n\n      } else {\n\n        onMouseUp();\n\n      }\n\n      //\n\n      removePointer(event);\n\n      if (_pointers.length === 0) {\n\n        scope.domElement.releasePointerCapture(event.pointerId);\n\n        scope.domElement.removeEventListener('pointermove', onPointerMove);\n        scope.domElement.removeEventListener('pointerup', onPointerUp);\n\n      }\n\n\n    }\n\n    function onPointerCancel (event) {\n\n      removePointer(event);\n\n    }\n\n    function keydown (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      window.removeEventListener('keydown', keydown);\n\n      if (_keyState !== STATE.NONE) {\n\n        return;\n\n      } else if (event.code === scope.keys[STATE.ROTATE] && !scope.noRotate) {\n\n        _keyState = STATE.ROTATE;\n\n      } else if (event.code === scope.keys[STATE.ZOOM] && !scope.noZoom) {\n\n        _keyState = STATE.ZOOM;\n\n      } else if (event.code === scope.keys[STATE.PAN] && !scope.noPan) {\n\n        _keyState = STATE.PAN;\n\n      }\n\n    }\n\n    function keyup () {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      _keyState = STATE.NONE;\n\n      window.addEventListener('keydown', keydown);\n\n    }\n\n    function onMouseDown (event) {\n\n      if (_state === STATE.NONE) {\n\n        switch (event.button) {\n\n        case scope.mouseButtons.LEFT:\n          _state = STATE.ROTATE;\n          break;\n\n        case scope.mouseButtons.MIDDLE:\n          _state = STATE.ZOOM;\n          break;\n\n        case scope.mouseButtons.RIGHT:\n          _state = STATE.PAN;\n          break;\n\n        default:\n          _state = STATE.NONE;\n\n        }\n\n      }\n\n      const state = (_keyState !== STATE.NONE) ? _keyState : _state;\n\n      if (state === STATE.ROTATE && !scope.noRotate) {\n\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n        _movePrev.copy(_moveCurr);\n\n      } else if (state === STATE.ZOOM && !scope.noZoom) {\n\n        _zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n        _zoomEnd.copy(_zoomStart);\n\n      } else if (state === STATE.PAN && !scope.noPan) {\n\n        _panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n        _panEnd.copy(_panStart);\n\n      }\n\n      scope.dispatchEvent(_startEvent);\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n    }\n\n    function onMouseMove (event) {\n\n      const state = (_keyState !== STATE.NONE) ? _keyState : _state;\n\n      if (state === STATE.ROTATE && !scope.noRotate) {\n\n        _movePrev.copy(_moveCurr);\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n\n      } else if (state === STATE.ZOOM && !scope.noZoom) {\n\n        _zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      } else if (state === STATE.PAN && !scope.noPan) {\n\n        _panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n\n      }\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n    }\n\n    function onMouseUp () {\n\n      _state = STATE.NONE;\n\n      scope.dispatchEvent(_endEvent);\n\n      // @metacell changes\n      scope.update()\n      scope.unsetCameraByConsoleLock();\n      // end of @metacell changes\n\n\n    }\n\n    function onMouseWheel (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      if (scope.noZoom === true) {\n        return;\n      }\n\n      event.preventDefault();\n\n      // _zoomEnd.x  = _zoomStart.x ;\n      // _zoomEnd.y  = _zoomStart.y ;\n      // _zoomEnd.z  = _zoomStart.z ;\n\n      switch (event.deltaMode) {\n\n      case 2:\n        // Zoom in pages\n        _zoomStart.y -= event.deltaY * 0.025;\n        break;\n\n      case 1:\n        // Zoom in lines\n        _zoomStart.y -= event.deltaY * 0.01;\n        break;\n\n      default:\n        // undefined, 0, assume pixels\n        _zoomStart.y -= event.deltaY * 0.00025;\n        break;\n\n      }\n\n      scope.dispatchEvent(_startEvent);\n      scope.dispatchEvent(_endEvent);\n\n      // @metacell changes\n      scope.update()\n      scope.unsetCameraByConsoleLock();\n      // end of @metacell changes\n\n    }\n\n    function onTouchStart (event) {\n\n      trackPointer(event);\n\n      switch (_pointers.length) {\n\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n        _moveCurr.copy(getMouseOnCircle(_pointers[0].pageX, _pointers[0].pageY));\n        _movePrev.copy(_moveCurr);\n        break;\n\n      default: // 2 or more\n        _state = STATE.TOUCH_ZOOM_PAN;\n        const dx = _pointers[0].pageX - _pointers[1].pageX;\n        const dy = _pointers[0].pageY - _pointers[1].pageY;\n        _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n\n        const x = (_pointers[0].pageX + _pointers[1].pageX) / 2;\n        const y = (_pointers[0].pageY + _pointers[1].pageY) / 2;\n        _panStart.copy(getMouseOnScreen(x, y));\n        _panEnd.copy(_panStart);\n        break;\n\n      }\n\n      scope.dispatchEvent(_startEvent);\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n    }\n\n    function onTouchMove (event) {\n\n      trackPointer(event);\n\n      switch (_pointers.length) {\n\n      case 1:\n        _movePrev.copy(_moveCurr);\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n        break;\n\n      default: // 2 or more\n\n        const position = getSecondPointerPosition(event);\n\n        const dx = event.pageX - position.x;\n        const dy = event.pageY - position.y;\n        _touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n\n        const x = (event.pageX + position.x) / 2;\n        const y = (event.pageY + position.y) / 2;\n        _panEnd.copy(getMouseOnScreen(x, y));\n        break;\n\n      }\n\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n    }\n\n    function onTouchEnd (event) {\n\n      switch (_pointers.length) {\n\n      case 0:\n        _state = STATE.NONE;\n        break;\n\n      case 1:\n        _state = STATE.TOUCH_ROTATE;\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n        _movePrev.copy(_moveCurr);\n        break;\n\n      case 2:\n        _state = STATE.TOUCH_ZOOM_PAN;\n        _moveCurr.copy(getMouseOnCircle(event.pageX - _movePrev.pageX, event.pageY - _movePrev.pageY));\n        _movePrev.copy(_moveCurr);\n        break;\n\n      }\n\n      scope.dispatchEvent(_endEvent);\n\n      // @metacell changes\n      scope.update()\n      scope.unsetCameraByConsoleLock();\n      // end of @metacell changes\n\n    }\n\n    function contextmenu (event) {\n\n      if (scope.enabled === false) {\n        return;\n      }\n\n      event.preventDefault();\n      // @metacell changes\n      scope.update()\n      // end of @metacell changes\n\n    }\n\n    function addPointer (event) {\n\n      _pointers.push(event);\n\n    }\n\n    function removePointer (event) {\n\n      delete _pointerPositions[event.pointerId];\n\n      for (let i = 0; i < _pointers.length; i++) {\n\n        if (_pointers[i].pointerId == event.pointerId) {\n\n          _pointers.splice(i, 1);\n          return;\n\n        }\n\n      }\n\n    }\n\n    function trackPointer (event) {\n\n      let position = _pointerPositions[event.pointerId];\n\n      if (position === undefined) {\n\n        position = new Vector2();\n        _pointerPositions[event.pointerId] = position;\n\n      }\n\n      position.set(event.pageX, event.pageY);\n\n    }\n\n    function getSecondPointerPosition (event) {\n\n      const pointer = (event.pointerId === _pointers[0].pointerId) ? _pointers[1] : _pointers[0];\n\n      return _pointerPositions[pointer.pointerId];\n\n    }\n\n    this.updateOnResize = function () {\n      scope.dispatchEvent(_startEvent);\n      scope.dispatchEvent(_endEvent);\n      scope.update();\n      scope.unsetCameraByConsoleLock();\n    }\n\n    this.dispose = function () {\n\n      scope.domElement.removeEventListener('contextmenu', contextmenu);\n\n      scope.domElement.removeEventListener('pointerdown', onPointerDown);\n      scope.domElement.removeEventListener('pointercancel', onPointerCancel);\n      scope.domElement.removeEventListener('wheel', onMouseWheel);\n\n      scope.domElement.removeEventListener('pointermove', onPointerMove);\n      scope.domElement.removeEventListener('pointerup', onPointerUp);\n\n      window.removeEventListener('keydown', keydown);\n      window.removeEventListener('keyup', keyup);\n\n    };\n\n    this.domElement.addEventListener('contextmenu', contextmenu);\n\n    this.domElement.addEventListener('pointerdown', onPointerDown);\n    this.domElement.addEventListener('pointercancel', onPointerCancel);\n    this.domElement.addEventListener('wheel', onMouseWheel, { passive: false });\n\n\n    window.addEventListener('keydown', keydown);\n    window.addEventListener('keyup', keyup);\n\n    this.handleResize();\n\n    // force an update at start\n    this.update();\n\n  }\n}\n\nexport { TrackballControls };"],"mappings":"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","ignoreList":[]}
{"version":3,"file":"Screenshoter.js","names":["htmlToImage","_interopRequireWildcard","require","_utils","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","getOptions","htmlElement","targetResolution","quality","pixelRatio","filter","resolution","getResolutionFixedRatio","options","canvasWidth","width","canvasHeight","height","downloadScreenshot","arguments","length","undefined","filename","concat","formatDate","Date","toPng","then","dataUrl","link","window","document","createElement","download","href","click","target","current","clientHeight","clientWidth","Math","abs","round"],"sources":["../../../src/3d-canvas/captureManager/Screenshoter.js"],"sourcesContent":["import * as htmlToImage from \"html-to-image\";\nimport { formatDate } from \"./utils\";\n\nfunction getOptions (htmlElement, targetResolution, quality, pixelRatio, filter) {\n  const resolution = getResolutionFixedRatio(htmlElement, targetResolution)\n  const options = {\n    quality: quality,\n    canvasWidth: resolution.width,\n    canvasHeight: resolution.height,\n    pixelRatio: pixelRatio,\n    filter: filter\n  }\n  return options;\n}\n\nexport function downloadScreenshot (htmlElement, quality = 0.95, targetResolution = { width: 3840, height: 2160 },\n  pixelRatio = 1, filter = () => true, filename = `Canvas_${formatDate(new Date())}.png`) {\n  const options = getOptions(htmlElement, targetResolution, quality, pixelRatio, filter);\n\n  htmlToImage.toPng(htmlElement, options)\n    .then(function (dataUrl) {\n      const link = window.document.createElement('a');\n      link.download = filename;\n      link.href = dataUrl;\n      link.click();\n    });\n}\n\nfunction getResolutionFixedRatio (htmlElement, target) {\n  const current = {\n    height: htmlElement.clientHeight,\n    width: htmlElement.clientWidth\n  }\n  // if height is closer\n  if (Math.abs(target.width - current.width) * 9 / 16 > Math.abs(target.height - current.height)) {\n    return {\n      height: target.height,\n      width: Math.round(current.width * target.height / current.height)\n    }\n  }\n  return {\n    height: Math.round(current.height * target.width / current.width),\n    width: target.width\n  }\n}\n\n"],"mappings":"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","ignoreList":[]}